!function(){(function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function c(a){return"\\"+vc[a]}function d(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function e(a){return a instanceof e?a:new f(a)}function f(a,b){this.__chain__=!!b,this.__wrapped__=a}function g(a){function b(){if(e){var a=d(e);Jc.apply(a,arguments)}if(this instanceof b){var g=h(c.prototype),i=c.apply(g,a||arguments);return J(i)?i:g}return c.apply(f,a||arguments)}var c=a[0],e=a[2],f=a[4];return b}function h(a){return J(a)?Lc(a):{}}function i(a,b,c){if("function"!=typeof a)return Sb;if("undefined"==typeof b||!("prototype"in a))return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Fb(a,b)}function j(a){function b(){var a=l?i:this;if(f){var q=d(f);Jc.apply(q,arguments)}if((g||n)&&(q||(q=d(arguments)),g&&Jc.apply(q,g),n&&q.length<k))return e|=16,j([c,o?e:-4&e,q,null,i,k]);if(q||(q=arguments),m&&(c=a[p]),this instanceof b){a=h(c.prototype);var r=c.apply(a,q);return J(r)?r:a}return c.apply(a,q)}var c=a[0],e=a[1],f=a[2],g=a[3],i=a[4],k=a[5],l=1&e,m=2&e,n=4&e,o=8&e,p=c;return b}function k(a,b){for(var c=-1,d=s(),e=a?a.length:0,f=[];++c<e;){var g=a[c];d(b,g)<0&&f.push(g)}return f}function l(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(Uc(h)||v(h))){b||(h=l(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function m(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;var f=typeof a,g=typeof b;if(!(a!==a||a&&uc[f]||b&&uc[g]))return!1;if(null==a||null==b)return a===b;var h=Ec.call(a),i=Ec.call(b);if(h!=i)return!1;switch(h){case nc:case oc:return+a==+b;case qc:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case sc:case tc:return a==String(b)}var j=h==mc;if(!j){var k=a instanceof e,l=b instanceof e;if(k||l)return m(k?a.__wrapped__:a,l?b.__wrapped__:b,c,d);if(h!=rc)return!1;var n=a.constructor,o=b.constructor;if(n!=o&&!(I(n)&&n instanceof n&&I(o)&&o instanceof o)&&"constructor"in a&&"constructor"in b)return!1}c||(c=[]),d||(d=[]);for(var p=c.length;p--;)if(c[p]==a)return d[p]==b;var q=!0,r=0;if(c.push(a),d.push(b),j){if(r=b.length,q=r==a.length)for(;r--&&(q=m(a[r],b[r],c,d)););}else _c(b,function(b,e,f){return Ic.call(f,e)?(r++,!(q=Ic.call(a,e)&&m(a[e],b,c,d))&&gc):void 0}),q&&_c(a,function(a,b,c){return Ic.call(c,b)?!(q=--r>-1)&&gc:void 0});return c.pop(),d.pop(),q}function n(a,b){return a+Hc(Sc()*(b-a+1))}function o(a,b,c){for(var d=-1,e=s(),f=a?a.length:0,g=[],h=c?[]:g;++d<f;){var i=a[d],j=c?c(i,d,a):i;(b?!d||h[h.length-1]!==j:e(h,j)<0)&&(c&&h.push(j),g.push(i))}return g}function p(a){return function(b,c,d){var e={};c=Qb(c,d,3);var f=-1,g=b?b.length:0;if("number"==typeof g)for(;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else ad(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function q(a,b,c,d,e,f){var h=2&b,i=16&b,k=32&b;if(!h&&!I(a))throw new TypeError;i&&!c.length&&(b&=-17,i=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=1==b||17===b?g:j;return l([a,b,c,d,e,f])}function r(a){return Xc[a]}function s(){var b=(b=e.indexOf)===rb?a:b;return b}function t(a){return"function"==typeof a&&Fc.test(a)}function u(a){return Yc[a]}function v(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ec.call(a)==lc||!1}function w(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function x(a){return J(a)?Uc(a)?d(a):w({},a):a}function y(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)"undefined"==typeof a[e]&&(a[e]=d[e])}return a}function z(a){var b=[];return _c(a,function(a,c){I(a)&&b.push(c)}),b.sort()}function A(a,b){return a?Ic.call(a,b):!1}function B(a){for(var b=-1,c=Wc(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function C(a){return a===!0||a===!1||a&&"object"==typeof a&&Ec.call(a)==nc||!1}function D(a){return a&&"object"==typeof a&&Ec.call(a)==oc||!1}function E(a){return a&&1===a.nodeType||!1}function F(a){if(!a)return!0;if(Uc(a)||O(a))return!a.length;for(var b in a)if(Ic.call(a,b))return!1;return!0}function G(a,b){return m(a,b)}function H(a){return Nc(a)&&!Oc(parseFloat(a))}function I(a){return"function"==typeof a}function J(a){return!(!a||!uc[typeof a])}function K(a){return M(a)&&a!=+a}function L(a){return null===a}function M(a){return"number"==typeof a||a&&"object"==typeof a&&Ec.call(a)==qc||!1}function N(a){return a&&uc[typeof a]&&Ec.call(a)==sc||!1}function O(a){return"string"==typeof a||a&&"object"==typeof a&&Ec.call(a)==tc||!1}function P(a){return"undefined"==typeof a}function Q(a){var b=[];_c(a,function(a,c){b.push(c)}),b=k(b,l(arguments,!0,!1,1));for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];e[f]=a[f]}return e}function R(a){for(var b=-1,c=Wc(a),d=c.length,e=Array(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function S(a){for(var b=-1,c=l(arguments,!0,!1,1),d=c.length,e={};++b<d;){var f=c[b];f in a&&(e[f]=a[f])}return e}function T(a){for(var b=-1,c=Wc(a),d=c.length,e=Array(d);++b<d;)e[b]=a[c[b]];return e}function U(a,b){var c=s(),d=a?a.length:0,e=!1;return d&&"number"==typeof d?e=c(a,b)>-1:ad(a,function(a){return(e=a===b)&&gc}),e}function V(a,b,c){var d=!0;b=Qb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&(d=!!b(a[e],e,a)););else ad(a,function(a,c,e){return!(d=!!b(a,c,e))&&gc});return d}function W(a,b,c){var d=[];b=Qb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else ad(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function X(a,b,c){b=Qb(b,c,3);var d=-1,e=a?a.length:0;if("number"!=typeof e){var f;return ad(a,function(a,c,d){return b(a,c,d)?(f=a,gc):void 0}),f}for(;++d<e;){var g=a[d];if(b(g,d,a))return g}}function Y(a,b){return mb(a,b,!0)}function Z(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:i(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==gc;);else ad(a,b)}function $(a,b){var c=a?a.length:0;if("number"==typeof c)for(;c--&&b(a[c],c,a)!==!1;);else{var d=Wc(a);c=d.length,ad(a,function(a,e,f){return e=d?d[--c]:--c,b(f[e],e,f)===!1&&gc})}}function _(a,b){var c=d(arguments,2),e=-1,f="function"==typeof b,g=a?a.length:0,h=Array("number"==typeof g?g:0);return Z(a,function(a){h[++e]=(f?b:a[b]).apply(a,c)}),h}function ab(a,b,c){var d=-1,e=a?a.length:0;if(b=Qb(b,c,3),"number"==typeof e)for(var f=Array(e);++d<e;)f[d]=b(a[d],d,a);else f=[],ad(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function bb(a,b,c){var d=-1/0,e=d;"function"!=typeof b&&c&&c[b]===a&&(b=null);var f=-1,g=a?a.length:0;if(null==b&&"number"==typeof g)for(;++f<g;){var h=a[f];h>e&&(e=h)}else b=Qb(b,c,3),Z(a,function(a,c,f){var g=b(a,c,f);g>d&&(d=g,e=a)});return e}function cb(a,b,c){var d=1/0,e=d;"function"!=typeof b&&c&&c[b]===a&&(b=null);var f=-1,g=a?a.length:0;if(null==b&&"number"==typeof g)for(;++f<g;){var h=a[f];e>h&&(e=h)}else b=Qb(b,c,3),Z(a,function(a,c,f){var g=b(a,c,f);d>g&&(d=g,e=a)});return e}function db(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=Qb(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else ad(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function eb(a,b,c,d){var e=arguments.length<3;return b=Qb(b,d,4),$(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function fb(a,b,c){return b=Qb(b,c,3),W(a,function(a,c,d){return!b(a,c,d)})}function gb(a,b,c){if(a&&"number"!=typeof a.length&&(a=T(a)),null==b||c)return a?a[n(0,a.length-1)]:ec;var d=hb(a);return d.length=Rc(Qc(0,b),d.length),d}function hb(a){var b=-1,c=a?a.length:0,d=Array("number"==typeof c?c:0);return Z(a,function(a){var c=n(0,++b);d[b]=d[c],d[c]=a}),d}function ib(a){var b=a?a.length:0;return"number"==typeof b?b:Wc(a).length}function jb(a,b,c){var d;b=Qb(b,c,3);var e=-1,f=a?a.length:0;if("number"==typeof f)for(;++e<f&&!(d=b(a[e],e,a)););else ad(a,function(a,c,e){return(d=b(a,c,e))&&gc});return!!d}function kb(a,c,d){var e=-1,f=a?a.length:0,g=Array("number"==typeof f?f:0);for(c=Qb(c,d,3),Z(a,function(a,b,d){g[++e]={criteria:[c(a,b,d)],index:e,value:a}}),f=g.length,g.sort(b);f--;)g[f]=g[f].value;return g}function lb(a){return Uc(a)?d(a):a&&"number"==typeof a.length?ab(a):T(a)}function mb(a,b,c){return c&&F(b)?ec:(c?X:W)(a,b)}function nb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function ob(a){return k(a,l(arguments,!0,!0,1))}function pb(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=-1;for(b=Qb(b,c,3);++g<f&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[0]:ec;return d(a,0,Rc(Qc(0,e),f))}function qb(a,b){return l(a,b)}function rb(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Qc(0,e+d):d||0}else if(d){var f=yb(b,c);return b[f]===c?f:-1}return a(b,c,d)}function sb(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=Qb(b,c,3);g--&&b(a[g],g,a);)e++}else e=null==b||c?1:b||e;return d(a,0,Rc(Qc(0,f-e),f))}function tb(){for(var a=[],b=-1,c=arguments.length;++b<c;){var d=arguments[b];(Uc(d)||v(d))&&a.push(d)}var e=a[0],f=-1,g=s(),h=e?e.length:0,i=[];a:for(;++f<h;)if(d=e[f],g(i,d)<0){for(var b=c;--b;)if(g(a[b],d)<0)continue a;i.push(d)}return i}function ub(a,b,c){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=Qb(b,c,3);g--&&b(a[g],g,a);)e++}else if(e=b,null==e||c)return a?a[f-1]:ec;return d(a,Qc(0,f-e))}function vb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Qc(0,d+c):Rc(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function wb(a,b,c){a=+a||0,c=+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Qc(0,Gc((b-a)/c)),f=Array(e);++d<e;)f[d]=a,a+=c;return f}function xb(a,b,c){if("number"!=typeof b&&null!=b){var e=0,f=-1,g=a?a.length:0;for(b=Qb(b,c,3);++f<g&&b(a[f],f,a);)e++}else e=null==b||c?1:Qc(0,b);return d(a,e)}function yb(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?Qb(c,d,1):Sb,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function zb(){return o(l(arguments,!0,!0))}function Ab(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=Qb(c,d,3)),o(a,b,c)}function Bb(a){return k(a,d(arguments,1))}function Cb(){for(var a=-1,b=bb(ed(arguments,"length")),c=Array(0>b?0:b);++a<b;)c[a]=ed(arguments,a);return c}function Db(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||Uc(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Eb(a,b){if(!I(b))throw new TypeError;return function(){return--a<1?b.apply(this,arguments):void 0}}function Fb(a,b){return arguments.length>2?q(a,17,d(arguments,2),null,b):q(a,1,null,null,b)}function Gb(a){for(var b=arguments.length>1?l(arguments,!0,!1,1):z(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=q(a[e],1,null,null,a)}return a}function Hb(){for(var a=arguments,b=a.length;b--;)if(!I(a[b]))throw new TypeError;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Ib(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!I(a))throw new TypeError;if(b=Qc(0,b)||0,c===!0){var n=!0;m=!1}else J(c)&&(n=c.leading,l="maxWait"in c&&(Qc(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(fd()-g);if(0>=c){e&&clearTimeout(e);var l=j;e=i=j=ec,l&&(k=fd(),f=a.apply(h,d),i||e||(d=h=null))}else i=setTimeout(o,c)},p=function(){i&&clearTimeout(i),e=i=j=ec,(m||l!==b)&&(k=fd(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=fd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=clearTimeout(e)),k=g,f=a.apply(h,d)):e||(e=setTimeout(p,q))}return r&&i?i=clearTimeout(i):i||b===l||(i=setTimeout(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Jb(a){if(!I(a))throw new TypeError;var b=d(arguments,1);return setTimeout(function(){a.apply(ec,b)},1)}function Kb(a,b){if(!I(a))throw new TypeError;var c=d(arguments,2);return setTimeout(function(){a.apply(ec,c)},b)}function Lb(a,b){var c={};return function(){var d=b?b.apply(this,arguments):hc+arguments[0];return Ic.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}}function Mb(a){var b,c;if(!I(a))throw new TypeError;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Nb(a){return q(a,16,d(arguments,1))}function Ob(a,b,c){var d=!0,e=!0;if(!I(a))throw new TypeError;return c===!1?d=!1:J(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c={},c.leading=d,c.maxWait=b,c.trailing=e,Ib(a,b,c)}function Pb(a,b){return q(b,16,[a])}function Qb(a,b,c){var d=typeof a;if(null==a||"function"==d)return i(a,b,c);if("object"!=d)return Vb(a);var e=Wc(a);return function(b){for(var c=e.length,d=!1;c--&&(d=b[e[c]]===a[e[c]]););return d}}function Rb(a){return null==a?"":String(a).replace($c,r)}function Sb(a){return a}function Tb(a){Z(z(a),function(b){var c=e[b]=a[b];e.prototype[b]=function(){var a=[this.__wrapped__];Jc.apply(a,arguments);var b=c.apply(e,a);return this.__chain__?new f(b,!0):b}})}function Ub(){return wc._=Dc,this}function Vb(a){return function(b){return b[a]}}function Wb(a,b){return null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0,a+Hc(Sc()*(b-a+1))}function Xb(a,b){if(a){var c=a[b];return I(c)?a[b]():c}}function Yb(a,b,d){var f=e,g=f.templateSettings;a=String(a||""),d=y({},d,g);var h=0,i="__p += '",j=d.variable,k=RegExp((d.escape||jc).source+"|"+(d.interpolate||jc).source+"|"+(d.evaluate||jc).source+"|$","g");a.replace(k,function(b,d,e,f,g){return i+=a.slice(h,g).replace(kc,c),d&&(i+="' +\n_.escape("+d+") +\n'"),f&&(i+="';\n"+f+";\n__p += '"),e&&(i+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),h=g+b.length,b}),i+="';\n",j||(j="obj",i="with ("+j+" || {}) {\n"+i+"\n}\n"),i="function("+j+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+i+"return __p\n}";try{var l=Function("_","return "+i)(f)}catch(m){throw m.source=i,m}return b?l(b):(l.source=i,l)}function Zb(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=Array(a);for(b=i(b,c,1);++d<a;)e[d]=b(d);return e}function $b(a){return null==a?"":String(a).replace(Zc,u)}function _b(a){var b=++fc+"";return a?a+b:b}function ac(a){return a=new f(a),a.__chain__=!0,a}function bc(a,b){return b(a),a}function cc(){return this.__chain__=!0,this}function dc(){return this.__wrapped__}var ec,fc=0,gc={},hc=+new Date+"",ic=/<%=([\s\S]+?)%>/g,jc=/($^)/,kc=/['\n\r\t\u2028\u2029\\]/g,lc="[object Arguments]",mc="[object Array]",nc="[object Boolean]",oc="[object Date]",pc="[object Function]",qc="[object Number]",rc="[object Object]",sc="[object RegExp]",tc="[object String]",uc={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},vc={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},wc=uc[typeof window]&&window||this,xc=uc[typeof exports]&&exports&&!exports.nodeType&&exports,yc=uc[typeof module]&&module&&!module.nodeType&&module,zc=yc&&yc.exports===xc&&xc,Ac=uc[typeof global]&&global;!Ac||Ac.global!==Ac&&Ac.window!==Ac||(wc=Ac);var Bc=[],Cc=Object.prototype,Dc=wc._,Ec=Cc.toString,Fc=RegExp("^"+String(Ec).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Gc=Math.ceil,Hc=Math.floor,Ic=Cc.hasOwnProperty,Jc=Bc.push,Kc=Cc.propertyIsEnumerable,Lc=t(Lc=Object.create)&&Lc,Mc=t(Mc=Array.isArray)&&Mc,Nc=wc.isFinite,Oc=wc.isNaN,Pc=t(Pc=Object.keys)&&Pc,Qc=Math.max,Rc=Math.min,Sc=Math.random;f.prototype=e.prototype;var Tc={};!function(){var a={0:1,length:1};Tc.spliceObjects=(Bc.splice.call(a,0,1),!a[0])}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ic,variable:""},Lc||(h=function(){function a(){}return function(b){if(J(b)){a.prototype=b;var c=new a;a.prototype=null}return c||wc.Object()}}()),v(arguments)||(v=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ic.call(a,"callee")&&!Kc.call(a,"callee")||!1});var Uc=Mc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Ec.call(a)==mc||!1},Vc=function(a){var b,c=a,d=[];if(!c)return d;if(!uc[typeof a])return d;for(b in c)Ic.call(c,b)&&d.push(b);return d},Wc=Pc?function(a){return J(a)?Pc(a):[]}:Vc,Xc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Yc=B(Xc),Zc=RegExp("("+Wc(Yc).join("|")+")","g"),$c=RegExp("["+Wc(Xc).join("")+"]","g"),_c=function(a,b){var c,d=a,e=d;if(!d)return e;if(!uc[typeof d])return e;for(c in d)if(b(d[c],c,a)===gc)return e;return e},ad=function(a,b){var c,d=a,e=d;if(!d)return e;if(!uc[typeof d])return e;for(c in d)if(Ic.call(d,c)&&b(d[c],c,a)===gc)return e;return e};I(/x/)&&(I=function(a){return"function"==typeof a&&Ec.call(a)==pc});var bd=p(function(a,b,c){Ic.call(a,c)?a[c]++:a[c]=1}),cd=p(function(a,b,c){(Ic.call(a,c)?a[c]:a[c]=[]).push(b)}),dd=p(function(a,b,c){a[c]=b}),ed=ab,fd=t(fd=Date.now)&&fd||function(){return(new Date).getTime()};e.after=Eb,e.bind=Fb,e.bindAll=Gb,e.chain=ac,e.compact=nb,e.compose=Hb,e.countBy=bd,e.debounce=Ib,e.defaults=y,e.defer=Jb,e.delay=Kb,e.difference=ob,e.filter=W,e.flatten=qb,e.forEach=Z,e.functions=z,e.groupBy=cd,e.indexBy=dd,e.initial=sb,e.intersection=tb,e.invert=B,e.invoke=_,e.keys=Wc,e.map=ab,e.max=bb,e.memoize=Lb,e.min=cb,e.omit=Q,e.once=Mb,e.pairs=R,e.partial=Nb,e.pick=S,e.pluck=ed,e.range=wb,e.reject=fb,e.rest=xb,e.shuffle=hb,e.sortBy=kb,e.tap=bc,e.throttle=Ob,e.times=Zb,e.toArray=lb,e.union=zb,e.uniq=Ab,e.values=T,e.where=mb,e.without=Bb,e.wrap=Pb,e.zip=Cb,e.collect=ab,e.drop=xb,e.each=Z,e.extend=w,e.methods=z,e.object=Db,e.select=W,e.tail=xb,e.unique=Ab,e.clone=x,e.contains=U,e.escape=Rb,e.every=V,e.find=X,e.has=A,e.identity=Sb,e.indexOf=rb,e.isArguments=v,e.isArray=Uc,e.isBoolean=C,e.isDate=D,e.isElement=E,e.isEmpty=F,e.isEqual=G,e.isFinite=H,e.isFunction=I,e.isNaN=K,e.isNull=L,e.isNumber=M,e.isObject=J,e.isRegExp=N,e.isString=O,e.isUndefined=P,e.lastIndexOf=vb,e.mixin=Tb,e.noConflict=Ub,e.random=Wb,e.reduce=db,e.reduceRight=eb,e.result=Xb,e.size=ib,e.some=jb,e.sortedIndex=yb,e.template=Yb,e.unescape=$b,e.uniqueId=_b,e.all=V,e.any=jb,e.detect=X,e.findWhere=Y,e.foldl=db,e.foldr=eb,e.include=U,e.inject=db,e.first=pb,e.last=ub,e.sample=gb,e.take=pb,e.head=pb,Tb(e),e.VERSION="2.4.1",e.prototype.chain=cc,e.prototype.value=dc,Z(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=Bc[a];e.prototype[a]=function(){var a=this.__wrapped__;return b.apply(a,arguments),Tc.spliceObjects||0!==a.length||delete a[0],this}}),Z(["concat","join","slice"],function(a){var b=Bc[a];e.prototype[a]=function(){var a=this.__wrapped__,c=b.apply(a,arguments);return this.__chain__&&(c=new f(c),c.__chain__=!0),c}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(wc._=e,define("underscore",[],function(){return e})):xc&&yc?zc?(yc.exports=e)._=e:xc._=e:wc._=e}).call(this),!function(){"use strict";function a(a){this.s=null!==a&&void 0!==a?"string"==typeof a?a:a.toString():a,this.orig=a,null!==a&&void 0!==a?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=a.length:this.length=-1}function b(){for(var a in k)!function(a){var b=k[a];j.hasOwnProperty(a)||(l.push(a),j[a]=function(){return String.prototype.s=this,b.apply(this,arguments)})}(a)}function c(){for(var a=0;a<l.length;++a)delete String.prototype[l[a]];l.length=0}function d(){for(var a=e(),b={},c=0;c<a.length;++c){var d=a[c],f=j[d];try{var g=typeof f.apply("teststring",[]);b[d]=g}catch(h){}}return b}function e(){var a=[];if(Object.getOwnPropertyNames)return a=Object.getOwnPropertyNames(j),a.splice(a.indexOf("valueOf"),1),a.splice(a.indexOf("toString"),1),a;var b={};for(var c in String.prototype)b[c]=c;for(var c in Object.prototype)delete b[c];for(var c in b)a.push(c);return a}function f(b){return new a(b)}function g(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push(a[c]),b&&b.call(a,a[c],c);return d}var h="1.5.1",i={},j=String.prototype,k=a.prototype={between:function(b,c){var d=this.s,e=d.indexOf(b),f=d.indexOf(c),g=e+b.length;return new a(f>e?d.slice(g,f):"")},camelize:function(){var b=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(a,b,c){return c?c.toUpperCase():""});return new a(b)},capitalize:function(){return new a(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(a){return this.s.charAt(a)},chompLeft:function(b){var c=this.s;return 0===c.indexOf(b)?(c=c.slice(b.length),new a(c)):this},chompRight:function(b){if(this.endsWith(b)){var c=this.s;return c=c.slice(0,c.length-b.length),new a(c)}return this},collapseWhitespace:function(){var b=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new a(b)},contains:function(a){return this.s.indexOf(a)>=0},count:function(a){for(var b=0,c=this.s.indexOf(a);c>=0;)b+=1,c=this.s.indexOf(a,c+1);return b},dasherize:function(){var b=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new a(b)},decodeHtmlEntities:function(){var b=this.s;return b=b.replace(/&#(\d+);?/g,function(a,b){return String.fromCharCode(b)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(a,b){return String.fromCharCode(parseInt(b,16))}).replace(/&([^;\W]+;?)/g,function(a,b){var c=b.replace(/;$/,""),d=i[b]||b.match(/;$/)&&i[c];return"number"==typeof d?String.fromCharCode(d):"string"==typeof d?d:a}),new a(b)},endsWith:function(a){var b=this.s.length-a.length;return b>=0&&this.s.indexOf(a,b)===b},escapeHTML:function(){return new a(this.s.replace(/[&<>"']/g,function(a){return"&"+p[a]+";"}))},ensureLeft:function(b){var c=this.s;return 0===c.indexOf(b)?this:new a(b+c)},ensureRight:function(b){var c=this.s;return this.endsWith(b)?this:new a(c+b)},humanize:function(){if(null===this.s||void 0===this.s)return new a("");var b=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new a(b)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(b){if(b>=0){var c=this.s.substr(0,b);return new a(c)}return this.right(-b)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(b,c){if(c=c||" ",this.s.length>=b)return new a(this.s);b-=this.s.length;var d=Array(Math.ceil(b/2)+1).join(c),e=Array(Math.floor(b/2)+1).join(c);return new a(d+this.s+e)},padLeft:function(b,c){return c=c||" ",new a(this.s.length>=b?this.s:Array(b-this.s.length+1).join(c)+this.s)},padRight:function(b,c){return c=c||" ",new a(this.s.length>=b?this.s:this.s+Array(b-this.s.length+1).join(c))},parseCSV:function(a,b,c,d){a=a||",",c=c||"\\","undefined"==typeof b&&(b='"');var e=0,f=[],g=[],h=this.s.length,i=!1,j=this,k=function(a){return j.s.charAt(a)};if("undefined"!=typeof d)var l=[];for(b||(i=!0);h>e;){var m=k(e);switch(m){case c:if(i&&(c!==b||k(e+1)===b)){e+=1,f.push(k(e));break}if(c!==b)break;case b:i=!i;break;case a:i&&b?f.push(m):(g.push(f.join("")),f.length=0);break;case d:i?f.push(m):l&&(g.push(f.join("")),l.push(g),g=[],f.length=0);break;default:i&&f.push(m)}e+=1}return g.push(f.join("")),l?(l.push(g),l):g},replaceAll:function(b,c){var d=this.s.split(b).join(c);return new a(d)},right:function(b){if(b>=0){var c=this.s.substr(this.s.length-b,b);return new a(c)}return this.left(-b)},slugify:function(){var b=new a(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===b.charAt(0)&&(b=b.substr(1)),new a(b)},startsWith:function(a){return 0===this.s.lastIndexOf(a,0)},stripPunctuation:function(){return new a(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var b=this.s,c=arguments.length>0?arguments:[""];return g(c,function(a){b=b.replace(RegExp("</?"+a+"[^<>]*>","gi"),"")}),new a(b)},template:function(b,c,d){var e=this.s,c=c||f.TMPL_OPEN,d=d||f.TMPL_CLOSE,g=new RegExp(c+"(.+?)"+d,"g"),h=e.match(g)||[];return h.forEach(function(a){var f=a.substring(c.length,a.length-d.length);"undefined"!=typeof b[f]&&(e=e.replace(a,b[f]))}),new a(e)},times:function(b){return new a(new Array(b+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var a=this.s.toLowerCase();return"true"===a||"yes"===a||"on"===a}return this.orig===!0||1===this.orig},toFloat:function(a){var b=parseFloat(this.s);return a?parseFloat(b.toFixed(a)):b},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var b;return b="undefined"==typeof j.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new a(b)},trimLeft:function(){var b;return b=j.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new a(b)},trimRight:function(){var b;return b=j.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new a(b)},truncate:function(b,c){var d=this.s;if(b=~~b,c=c||"...",d.length<=b)return new a(d);var e=function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "},f=d.slice(0,b+1).replace(/.(?=\W*\w*$)/g,e);return f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):new a(f.slice(0,f.length-1)).trimRight().s,new a((f+c).length>d.length?d:d.slice(0,f.length)+c)},toCSV:function(){function b(a){return null!==a&&""!==a}var c=",",d='"',e="\\",f=!0,g=!1,h=[];if("object"==typeof arguments[0]?(c=arguments[0].delimiter||c,c=arguments[0].separator||c,d=arguments[0].qualifier||d,f=!!arguments[0].encloseNumbers,e=arguments[0].escape||e,g=!!arguments[0].keys):"string"==typeof arguments[0]&&(c=arguments[0]),"string"==typeof arguments[1]&&(d=arguments[1]),null===arguments[1]&&(d=null),this.orig instanceof Array)h=this.orig;else for(var i in this.orig)this.orig.hasOwnProperty(i)&&h.push(g?i:this.orig[i]);for(var j=e+d,k=[],l=0;l<h.length;++l){var m=b(d);if("number"==typeof h[l]&&(m&=f),m&&k.push(d),null!==h[l]&&void 0!==h[l]){var n=new a(h[l]).replaceAll(d,j).s;k.push(n)}else k.push("");m&&k.push(d),c&&k.push(c)}return k.length=k.length-1,new a(k.join(""))},toString:function(){return this.s},underscore:function(){var b=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new a(this.s.charAt(0)).isUpper()&&(b="_"+b),new a(b)},unescapeHTML:function(){return new a(this.s.replace(/\&([^;]+);/g,function(a,b){var c;return b in o?o[b]:(c=b.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(c[1],16)):(c=b.match(/^#(\d+)$/))?String.fromCharCode(~~c[1]):a}))},valueOf:function(){return this.s.valueOf()}},l=[],m=d();for(var n in m)!function(b){var c=j[b];"function"==typeof c&&(k[b]||(k[b]="string"===m[b]?function(){return new a(c.apply(this,arguments))}:c))}(n);k.repeat=k.times,k.include=k.contains,k.toInteger=k.toInt,k.toBool=k.toBoolean,k.decodeHTMLEntities=k.decodeHtmlEntities,f.extendPrototype=b,f.restorePrototype=c,f.VERSION=h,f.TMPL_OPEN="{{",f.TMPL_CLOSE="}}",f.ENTITIES=i,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=f:"function"==typeof define&&define.amd?define("string",[],function(){return f}):window.S=f;var o={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},p={};for(var q in o)p[o[q]]=q;i={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this),function(a,b){function c(a){var b=ob[a]={};return $.each(a.split(bb),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qb,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:pb.test(d)?$.parseJSON(d):d}catch(f){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Kb.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a){return $.inArray(a,b)>=0===c})}function k(a){var b=Nb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))
}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xb.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=qc.length;e--;)if(b=qc[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cc(c,"display"),e[f]||"none"===d||$._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=jc.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=$.css(a,c+pc[e],!0)),d?("content"===c&&(f-=parseFloat(cc(a,"padding"+pc[e]))||0),"margin"!==c&&(f-=parseFloat(cc(a,"border"+pc[e]+"Width"))||0)):(f+=parseFloat(cc(a,"padding"+pc[e]))||0,"padding"!==c&&(f+=parseFloat(cc(a,"border"+pc[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(0>=d){if(d=cc(a,b),(0>d||null==d)&&(d=a.style[b]),kc.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(mc[a])return mc[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(dc=P.body.appendChild(dc||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),ec&&dc.createElement||(ec=(dc.contentWindow||dc.contentDocument).document,ec.write("<!doctype html><html><body>"),ec.close()),b=ec.body.appendChild(ec.createElement(a)),c=cc(b,"display"),P.body.removeChild(dc)),mc[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||tc.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(bb),h=0,i=g.length;if($.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Jc;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(b){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function F(){return setTimeout(function(){Uc=b},0),Uc=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=($c[b]||[]).concat($c["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=Zc.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Uc||F(),c=Math.max(0,i.startTime+i.duration-b),d=1-(c/i.duration||0),e=0,f=i.tweens.length;f>e;e++)i.tweens[e].run(d);return g.notifyWith(a,[i,d,c]),1>d&&f?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Uc||F(),duration:c.duration,tweens:[],createTween:function(b,c){var d=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(d),d},stop:function(b){for(var c=0,d=b?i.tweens.length:0;d>c;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);f>e;e++)if(d=Zc[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],p=a.nodeType&&r(a);c.queue||(j=$._queueHooks(a,"fx"),null==j.unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,$.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",$.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Wc.exec(f)){if(delete b[d],f===(p?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),p?$(a).show():l.done(function(){$(a).hide()}),l.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in n)$.style(a,b,n[b])}),d=0;g>d;d++)e=o[d],i=l.createTween(e,p?h[e]:0),n[e]=h[e]||$.style(a,e),e in h||(h[e]=i.start,p&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){for(var c,d={height:a},e=0;4>e;e+=2-b)c=pc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ab=/\S/,bb=/\s+/,cb=ab.test("Â ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,db=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,eb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fb=/^[\],:{}\s]*$/,gb=/(?:^|:|,)(?:\s*\[)+/g,hb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ib=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,jb=/^-ms-/,kb=/-([\da-z])/gi,lb=function(a,b){return(b+"").toUpperCase()},mb=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",mb,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",mb),$.ready())},nb={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:db.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),eb.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||$.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):nb[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Y.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=eb.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fb.test(b.replace(hb,"@").replace(ib,"]").replace(gb,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ab.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(jb,"ms-").replace(kb,lb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":a.toString().replace(cb,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||f.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState||"loading"!==P.readyState&&P.addEventListener)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",mb,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",mb),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){nb["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var ob={};$.Callbacks=function(a){a="string"==typeof a?ob[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){!$.isFunction(d)||a.unique&&m.has(d)?d&&d.length&&c(d):j.push(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return"object"==typeof a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5",!c||!c.length||!d)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pb=/^(?:\{.*\}|\[.*\])$/,qb=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||++$.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;i>k;k++)h=g[k].name,0===h.indexOf("data-")&&(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.shift(),e=$._queueHooks(a,b),f=function(){$.dequeue(a,b)};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)(d=$._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var rb,sb,tb,ub=/[\t\r\n]/g,vb=/\r/g,wb=/^(?:button|input)$/i,xb=/^(?:button|input|object|select|textarea)$/i,yb=/^a(?:rea|)$/i,zb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ab=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(bb),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(bb),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ub," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>-1;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each($.isFunction(a)?function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(bb);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ub," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(vb,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||($.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&$.nodeName(e.parentNode,"optgroup"))){if(b=$(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?$(h[f]).val():g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(zb.test(c)?sb:rb)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(bb);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=zb.test(e),f||$.attr(a,e,""),a.removeAttribute(Ab?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wb.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return rb&&$.nodeName(a,"button")?rb.get(a,b):b in a?a.value:null},set:function(a,b,c){return rb&&$.nodeName(a,"button")?rb.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xb.test(a.nodeName)||yb.test(a.nodeName)&&a.href?0:b}}}}),sb={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Ab||(tb={name:!0,id:!0,coords:!0},rb=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(tb[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),$.attrHooks.contenteditable={get:rb.get,set:function(a,b,c){""===b&&(b="false"),rb.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){return $.isArray(b)?a.checked=$.inArray($(a).val(),b)>=0:void 0}})});var Bb=/^(?:textarea|input|select)$/i,Cb=/^([^\.]*|)(?:\.(.+)|)$/,Db=/(?:^|\s)hover(\.\S+|)\b/,Eb=/^key/,Fb=/^(?:mouse|contextmenu)|click/,Gb=/^(?:focusinfocus|focusoutblur)$/,Hb=function(a){return $.event.special.hover?a:a.replace(Db,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Hb(c)).split(" "),j=0;j<c.length;j++)k=Cb.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;
a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Hb(b||"")).split(" "),f=0;f<b.length;f++)if(g=Cb.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],!e&&i!==p.origType||c&&c.guid!==p.guid||j&&!j.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&(n.teardown&&n.teardown.call(a,j,q.handle)!==!1||$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!Gb.test(q+$.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!$.event.customEvent[q]||$.event.global[q]))if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Gb.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&$.nodeName(e,"a")||!$.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=($._data(this,"events")||{})[c.type]||[],o=n.delegateCount,p=[].slice.call(arguments),q=!c.exclusive&&!c.namespace,r=$.event.special[c.type]||{},s=[];if(p[0]=c,c.delegateTarget=this,!r.preDispatch||r.preDispatch.call(this,c)!==!1){if(o&&(!c.button||"click"!==c.type))for(g=$(this),g.context=this,f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(i={},k=[],g[0]=f,d=0;o>d;d++)l=n[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);k.length&&s.push({elem:f,matches:k})}for(n.length>o&&s.push({elem:this,matches:n.slice(o)}),d=0;d<s.length&&!c.isPropagationStopped();d++)for(j=s[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(q||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,h=(($.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,p),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation())));return r.postDispatch&&r.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{ready:{setup:$.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){{var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector}return(!e||e!==d&&!$.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Bb.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Bb.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),Bb.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?$.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Eb.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fb.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){for(var e=0,f=b.length;f>e;e++)fb(a,b[e],c,d)}function d(a,b,d,e,f,g){var h,i=gb.setFilters[b.toLowerCase()];return i||fb.error(b),(a||!(h=f))&&c(a||"*",e,h=[],f),h.length>0?i(h,d,g):[]}function e(a,e,f,g,h){for(var i,j,k,l,m,n,o,p,q=0,r=h.length,s=S.POS,t=new RegExp("^"+s.source+"(?!"+y+")","i"),u=function(){for(var a=1,c=arguments.length-2;c>a;a++)arguments[a]===b&&(i[a]=b)};r>q;q++){for(s.exec(""),a=h[q],l=[],k=0,m=g;i=s.exec(a);)p=s.lastIndex=i.index+i[0].length,p>k&&(o=a.slice(k,i.index),k=p,n=[e],I.test(o)&&(m&&(n=m),m=g),(j=O.test(o))&&(o=o.slice(0,-5).replace(I,"$&*")),i.length>1&&i[0].replace(t,u),m=d(o,i[1],i[2],n,m,j));m?(l=l.concat(m),(o=a.slice(k))&&")"!==o?I.test(o)?c(o,l,f,g):fb(o,e,f,g?g.concat(m):m):w.apply(f,l)):fb(a,e,f,g)}return 1===r?f:fb.uniqueSort(f)}function f(a,b,c){for(var d,e,f,g=[],h=0,i=K.exec(a),j=!i.pop()&&!i.pop(),k=j&&a.match(J)||[""],l=gb.preFilter,m=gb.filter,n=!c&&b!==p;null!=(e=k[h])&&j;h++)for(g.push(d=[]),n&&(e=" "+e);e;){j=!1,(i=I.exec(e))&&(e=e.slice(i[0].length),j=d.push({part:i.pop().replace(H," "),captures:i}));for(f in m)!(i=S[f].exec(e))||l[f]&&!(i=l[f](i,b,c))||(e=e.slice(i.shift().length),j=d.push({part:f,captures:i}));if(!j)break}return j||fb.error(a),g}function g(a,b,c){var d=b.dir,e=u++;return a||(a=function(a){return a===c}),b.first?function(b,c){for(;b=b[d];)if(1===b.nodeType)return a(b,c)&&b}:function(b,c){for(var f,g=e+"."+l,h=g+"."+k;b=b[d];)if(1===b.nodeType){if((f=b[x])===h)return b.sizset;if("string"==typeof f&&0===f.indexOf(g)){if(b.sizset)return b}else{if(b[x]=h,a(b,c))return b.sizset=!0,b;b.sizset=!1}}}}function h(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function i(a,b,c){for(var d,e,f=0;d=a[f];f++)gb.relative[d.part]?e=g(e,gb.relative[d.part],b):(d.captures.push(b,c),e=h(e,gb.filter[d.part].apply(null,d.captures)));return e}function j(a){return function(b,c){for(var d,e=0;d=a[e];e++)if(d(b,c))return!0;return!1}}var k,l,m,n,o,p=a.document,q=p.documentElement,r="undefined",s=!1,t=!0,u=0,v=[].slice,w=[].push,x=("sizcache"+Math.random()).replace(".",""),y="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",A=z.replace("w","w#"),B="([*^$|!~]?=)",C="\\["+y+"*("+z+")"+y+"*(?:"+B+y+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+A+")|)|)"+y+"*\\]",D=":("+z+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",E=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",F=y+"*([\\x20\\t\\r\\n\\f>+~])"+y+"*",G="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+C+"|"+D.replace(2,7)+"|[^\\\\(),])+",H=new RegExp("^"+y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+y+"+$","g"),I=new RegExp("^"+F),J=new RegExp(G+"?(?="+y+"*,|$)","g"),K=new RegExp("^(?:(?!,)(?:(?:^|,)"+y+"*"+G+")*?|"+y+"*(.*?))(\\)|$)"),L=new RegExp(G.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+F,"g"),M=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,N=/[\x20\t\r\n\f]*[+~]/,O=/:not\($/,P=/h\d/i,Q=/input|select|textarea|button/i,R=/\\(?!\\)/g,S={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),NAME:new RegExp("^\\[name=['\"]?("+z+")['\"]?\\]"),TAG:new RegExp("^("+z.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+C),PSEUDO:new RegExp("^"+D),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+y+"*(even|odd|(([+-]|)(\\d*)n|)"+y+"*(?:([+-]|)"+y+"*(\\d+)|))"+y+"*\\)|)","i"),POS:new RegExp(E,"ig"),needsContext:new RegExp("^"+y+"*[>+~]|"+E,"i")},T={},U=[],V={},W=[],X=function(a){return a.sizzleFilter=!0,a},Y=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},Z=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},_=function(a){var b=!1,c=p.createElement("div");try{b=a(c)}catch(d){}return c=null,b},ab=_(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),bb=_(function(a){a.id=x+0,a.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",q.insertBefore(a,q.firstChild);var b=p.getElementsByName&&p.getElementsByName(x).length===2+p.getElementsByName(x+0).length;return o=!p.getElementById(x),q.removeChild(a),b}),cb=_(function(a){return a.appendChild(p.createComment("")),0===a.getElementsByTagName("*").length}),db=_(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==r&&"#"===a.firstChild.getAttribute("href")}),eb=_(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length?(a.lastChild.className="e",1!==a.getElementsByClassName("e").length):!1}),fb=function(a,b,c,d){c=c||[],b=b||p;var e,f,g,h,i=b.nodeType;if(1!==i&&9!==i)return[];if(!a||"string"!=typeof a)return c;if(g=ib(b),!g&&!d&&(e=M.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&jb(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return w.apply(c,v.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&eb&&b.getElementsByClassName)return w.apply(c,v.call(b.getElementsByClassName(h),0)),c}return mb(a,b,c,d,g)},gb=fb.selectors={cacheLength:50,match:S,order:["ID","TAG"],attrHandle:{},createPseudo:X,find:{ID:o?function(a,b,c){if(typeof b.getElementById!==r&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==r&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==r&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:cb?function(a,b){return typeof b.getElementsByTagName!==r?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(R,""),a[3]=(a[4]||a[5]||"").replace(R,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||fb.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=a[4];return S.CHILD.test(a[0])?null:(c&&(b=K.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:o?function(a){return a=a.replace(R,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(R,""),function(b){var c=typeof b.getAttributeNode!==r&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(R,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=T[a];return b||(b=T[a]=new RegExp("(^|"+y+")"+a+"("+y+"|$)"),U.push(a),U.length>gb.cacheLength&&delete T[U.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==r&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return b?function(d){var e=fb.attr(d,a),f=e+"";if(null==e)return"!="===b;switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&0===f.indexOf(c);case"*=":return c&&f.indexOf(c)>-1;case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return(" "+f+" ").indexOf(c)>-1;case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return null!=fb.attr(b,a)}},CHILD:function(a,b,c,d){if("nth"===a){var e=u++;return function(a){var b,f,g=0,h=a;if(1===c&&0===d)return!0;if(b=a.parentNode,b&&(b[x]!==e||!a.sizset)){for(h=b.firstChild;h&&(1!==h.nodeType||(h.sizset=++g,h!==a));h=h.nextSibling);b[x]=e}return f=a.sizset-d,0===c?0===f:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=gb.pseudos[a]||gb.pseudos[a.toLowerCase()];return e||fb.error("unsupported pseudo: "+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:X(function(a,b,c){var d=lb(a.replace(H,"$1"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!gb.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},contains:X(function(a){return function(b){return(b.textContent||b.innerText||kb(b)).indexOf(a)>-1}}),has:X(function(a){return function(b){return fb(a,b).length>0}}),header:function(a){return P.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:Y("radio"),checkbox:Y("checkbox"),file:Y("file"),password:Y("password"),image:Y("image"),submit:Z("submit"),reset:Z("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Q.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return!(a!==b.activeElement||b.hasFocus&&!b.hasFocus()||!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){for(var d=[],e=c?1:0,f=a.length;f>e;e+=2)d.push(a[e]);return d},odd:function(a,b,c){for(var d=[],e=c?0:1,f=a.length;f>e;e+=2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};gb.setFilters.nth=gb.setFilters.eq,gb.filters=gb.pseudos,db||(gb.attrHandle={href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}}),bb&&(gb.order.push("NAME"),gb.find.NAME=function(a,b){return typeof b.getElementsByName!==r?b.getElementsByName(a):void 0}),eb&&(gb.order.splice(1,0,"CLASS"),gb.find.CLASS=function(a,b,c){return typeof b.getElementsByClassName===r||c?void 0:b.getElementsByClassName(a)});try{v.call(q.childNodes,0)[0].nodeType}catch(hb){v=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}var ib=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},jb=fb.contains=q.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:q.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},kb=fb.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=kb(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=kb(b);return c};fb.attr=function(a,b){var c,d=ib(a);return d||(b=b.toLowerCase()),gb.attrHandle[b]?gb.attrHandle[b](a):ab||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},[0,0].sort(function(){return t=0}),q.compareDocumentPosition?m=function(a,b){return a===b?(s=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:(m=function(a,b){if(a===b)return s=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h)return n(a,b);if(!g)return-1;if(!h)return 1;for(;i;)e.unshift(i),i=i.parentNode;for(i=h;i;)f.unshift(i),i=i.parentNode;c=e.length,d=f.length;for(var j=0;c>j&&d>j;j++)if(e[j]!==f[j])return n(e[j],f[j]);return j===c?n(a,f[j],-1):n(e[j],b,1)},n=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),fb.uniqueSort=function(a){var b,c=1;if(m&&(s=t,a.sort(m),s))for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a};var lb=fb.compile=function(a,b,c){var d,e,g,h=V[a];if(h&&h.context===b)return h;for(e=f(a,b,c),g=0;d=e[g];g++)e[g]=i(d,b,c);return h=V[a]=j(e),h.context=b,h.runs=h.dirruns=0,W.push(a),W.length>gb.cacheLength&&delete V[W.shift()],h};fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){return fb(b,null,null,[a]).length>0};var mb=function(a,b,c,d,f){a=a.replace(H,"$1");var g,h,i,j,m,n,o,p,q,r=a.match(J),s=a.match(L),t=b.nodeType;if(S.POS.test(a))return e(a,b,c,d,r);if(d)g=v.call(d,0);else if(r&&1===r.length){if(s.length>1&&9===t&&!f&&(r=S.ID.exec(s[0]))){if(b=gb.find.ID(r[1],b,f)[0],!b)return c;a=a.slice(s.shift().length)}for(p=(r=N.exec(s[0]))&&!r.index&&b.parentNode||b,q=s.pop(),n=q.split(":not")[0],i=0,j=gb.order.length;j>i;i++)if(o=gb.order[i],r=S[o].exec(n)){if(g=gb.find[o]((r[1]||"").replace(R,""),p,f),null==g)continue;n===q&&(a=a.slice(0,a.length-q.length)+n.replace(S[o],""),a||w.apply(c,v.call(g,0)));break}}if(a)for(h=lb(a,b,f),l=h.dirruns++,null==g&&(g=gb.find.TAG("*",N.test(a)&&b.parentNode||b)),i=0;m=g[i];i++)k=h.runs++,h(m,b)&&c.push(m);return c};p.querySelectorAll&&!function(){var a,b=mb,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=q.matchesSelector||q.mozMatchesSelector||q.webkitMatchesSelector||q.oMatchesSelector||q.msMatchesSelector;_(function(a){a.innerHTML="<select><option selected></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+y+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),_(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+y+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),mb=function(a,d,f,g,h){if(!(g||h||e&&e.test(a)))if(9===d.nodeType)try{return w.apply(f,v.call(d.querySelectorAll(a),0)),f}catch(i){}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d.getAttribute("id"),k=j||x,l=N.test(a)&&d.parentNode||d;j?k=k.replace(c,"\\$&"):d.setAttribute("id",k);try{return w.apply(f,v.call(l.querySelectorAll(a.replace(J,"[id='"+k+"'] $&")),0)),f}catch(i){}finally{j||d.removeAttribute("id")}}return b(a,d,f,g,h)},g&&(_(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push(gb.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join("|")),fb.matchesSelector=function(b,c){if(c=c.replace(d,"='$1']"),!(ib(b)||f.test(c)||e&&e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(i){}return fb(c,null,null,[b]).length>0})}(),fb.attr=$.attr,$.find=fb,$.expr=fb.selectors,$.expr[":"]=$.expr.pseudos,$.unique=fb.uniqueSort,$.text=fb.getText,$.isXMLDoc=fb.isXML,$.contains=fb.contains}(a);var Ib=/Until$/,Jb=/^(?:parents|prev(?:Until|All))/,Kb=/^.[^:#\[\.,]*$/,Lb=$.expr.match.needsContext,Mb={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;c>b;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?Lb.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Lb.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ib.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Mb[a]?$.unique(e):e,this.length>1&&Jb.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Nb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ob=/ jQuery\d+="(?:null|\d+)"/g,Pb=/^\s+/,Qb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Rb=/<([\w:]+)/,Sb=/<tbody/i,Tb=/<|&#?\w+;/,Ub=/<(?:script|style|link)/i,Vb=/<(?:script|object|embed|option|style)/i,Wb=new RegExp("<(?:"+Nb+")[\\s/>]","i"),Xb=/^(?:checkbox|radio)$/,Yb=/checked\s*(?:[^=]|=\s*.checked.)/i,Zb=/\/(java|ecma)script/i,$b=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_b={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ac=k(P),bc=ac.appendChild(P.createElement("div"));_b.optgroup=_b.option,_b.tbody=_b.tfoot=_b.colgroup=_b.caption=_b.thead,_b.th=_b.td,$.support.htmlSerialize||(_b._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each($.isFunction(a)?function(b){$(this).wrapInner(a.call(this,b))}:function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||$.filter(a,[c]).length)&&(b||1!==c.nodeType||($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this
},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Ob,""):b;if(!("string"!=typeof a||Ub.test(a)||!$.support.htmlSerialize&&Wb.test(a)||!$.support.leadingWhitespace&&Pb.test(a)||_b[(Rb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Qb,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Yb.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;m>i;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($b,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=(c[0]||c).ownerDocument||c[0]||c,"undefined"==typeof c.createDocumentFragment&&(c=P),!(1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0))||Vb.test(h)||!$.support.checkClone&&Yb.test(h)||!$.support.html5Clone&&Wb.test(h)||(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wb.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bc.innerHTML=a.outerHTML,bc.removeChild(g=bc.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=0,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),f=b===P&&ac;null!=(g=a[r]);r++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Tb.test(g)){for(f=f||k(b),l=l||f.appendChild(b.createElement("div")),g=g.replace(Qb,"<$1></$2>"),h=(Rb.exec(g)||["",""])[1].toLowerCase(),i=_b[h]||_b._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sb.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,e=n.length-1;e>=0;--e)$.nodeName(n[e],"tbody")&&!n[e].childNodes.length&&n[e].parentNode.removeChild(n[e]);!$.support.leadingWhitespace&&Pb.test(g)&&l.insertBefore(b.createTextNode(Pb.exec(g)[0]),l.firstChild),g=l.childNodes,l=f.lastChild}else g=b.createTextNode(g);g.nodeType?s.push(g):s=$.merge(s,g)}if(l&&(f.removeChild(l),g=l=f=null),!$.support.appendChecked)for(r=0;null!=(g=s[r]);r++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){return!a.type||Zb.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},r=0;null!=(g=s[r]);r++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[r+1,0].concat(q)),r+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cc,dc,ec,fc=/alpha\([^)]*\)/i,gc=/opacity=([^)]*)/,hc=/^(top|right|bottom|left)$/,ic=/^margin/,jc=new RegExp("^("+_+")(.*)$","i"),kc=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),lc=new RegExp("^([-+])=("+_+")","i"),mc={},nc={position:"absolute",visibility:"hidden",display:"block"},oc={letterSpacing:0,fontWeight:400,lineHeight:1},pc=["Top","Right","Bottom","Left"],qc=["Webkit","O","Moz","ms"],rc=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?rc.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cc(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=lc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||$.cssNumber[i]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cc(a,c)),"normal"===f&&c in oc&&(f=oc[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cc=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],""!==c||$.contains(a.ownerDocument.documentElement,a)||(c=$.style(a,b)),kc.test(c)&&ic.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:P.documentElement.currentStyle&&(cc=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),kc.test(e)&&!hc.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0!==a.offsetWidth||"none"!==cc(a,"display")?v(a,b,d):$.swap(a,nc,function(){return v(a,b,d)}):void 0},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fc.test(f)?f.replace(fc,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){return b?cc(a,"marginRight"):void 0})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cc(a,b);return kc.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cc(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;4>d;d++)f[a+pc[d]+b]=e[d]||e[d-2]||e[0];return f}},ic.test(a)||($.cssHooks[a+b].set=t)});var sc=/%20/g,tc=/\[\]$/,uc=/\r?\n/g,vc=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,wc=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||wc.test(this.nodeName)||vc.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a){return{name:b.name,value:a.replace(uc,"\r\n")}}):{name:b.name,value:c.replace(uc,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(sc,"+")};var xc,yc,zc=/#.*$/,Ac=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bc=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Cc=/^(?:GET|HEAD)$/,Dc=/^\/\//,Ec=/\?/,Fc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Gc=/([?&])_=[^&]*/,Hc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ic=$.fn.load,Jc={},Kc={},Lc=["*/"]+["*"];try{xc=Q.href}catch(Mc){xc=P.createElement("a"),xc.href="",xc=xc.href}yc=Hc.exec(xc.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Fc,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:xc,isLocal:Bc.test(yc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Lc},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Jc),ajaxTransport:y(Kc),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,(!x||a)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=""+(c||x),j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Ac.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(zc,"").replace(Dc,yc[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(bb),null==m.crossDomain&&(j=Hc.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]==yc[1]&&j[2]==yc[2]&&(j[3]||("http:"===j[1]?80:443))==(yc[3]||("http:"===yc[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Jc,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Cc.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Ec.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Gc,"$1_="+x);m.url=y+(y===m.url?(Ec.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Lc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Kc,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(A){if(!(2>u))throw A;d(-1,A)}}else d(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Nc=[],Oc=/\?/,Pc=/(=)\?(?=&|$)|\?\?/,Qc=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Nc.pop()||$.expando+"_"+Qc++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Pc.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pc.test(i);return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Pc,"$1"+f):m?c.data=i.replace(Pc,"$1"+f):k&&(c.url+=(Oc.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Nc.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Rc,Sc=a.ActiveXObject?function(){for(var a in Rc)Rc[a](0,1)}:!1,Tc=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Sc&&delete Rc[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Tc,Sc&&(Rc||(Rc={},$(a).unload(Sc)),Rc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Uc,Vc,Wc=/^(?:toggle|show|hide)$/,Xc=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Yc=/queueHooks$/,Zc=[J],$c={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=Xc.exec(b),h=f.cur(),i=+h||0,j=1;if(g){if(c=+g[2],d=g[3]||($.cssNumber[a]?"":"px"),"px"!==d&&i){i=$.css(f.elem,a,!0)||c||1;do e=j=j||".5",i/=j,$.style(f.elem,a,i+d),j=f.cur()/h;while(1!==j&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],$c[c]=$c[c]||[],$c[c].unshift(b)},prefilter:function(a,b){b?Zc.unshift(a):Zc.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.pos=b=$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Yc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){for(var a,b=$.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||$.fx.stop()},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Vc&&(Vc=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Vc),Vc=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var _c=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(n)return(e=n.body)===m?$.offset.bodyOffset(m):(d=n.documentElement,$.contains(d,m)?(c=m.getBoundingClientRect(),f=M(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=_c.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!_c.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="1.0.0";var h=b._;h||"undefined"==typeof require||(h=require("underscore")),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,"once",a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j>i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m>l;l++)e=f[l],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:"on",listenToOnce:"once"};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId("c"),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&&(d=this.parse(d,b)||{}),(c=h.result(this,"defaults"))&&(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=["url","urlRoot","collection"];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if("object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&&(this._pending=!0);for(var m=0,n=g.length;n>m;m++)this.trigger("change:"+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&&c(b,d,a),void b.trigger("sync",b,d,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||"object"==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&&c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=h.extend({},g,d)),void 0===c.parse&&(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&&(b=h.extend(d||{},b)),h.isObject(b)&&!i.set(b,c)?!1:(j&&j(i,a,c),void i.trigger("sync",i,a,c))},L(this,c),e=this.isNew()?"create":c.patch?"patch":"update","patch"===e&&(c.attrs=d),f=this.sync(e,this,c),d&&c.wait&&(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&&d(),c&&c(b,e,a),b.isNew()||b.trigger("sync",b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync("delete",this,a);return a.wait||d(),e},url:function(){var a=h.result(this,"urlRoot")||h.result(this.collection,"url")||K();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger("invalid",this,c,h.extend(b||{},{validationError:c})),!1):!0
}});var p=["keys","values","pairs","invert","pick","omit"];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&&(this.url=b.url),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d>c;c++)f=this.get(a[c]),f&&(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&&(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&&null==k&&b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d>c;c++)(f=this._prepareModel(a[c],b))&&((i=this.get(f))?(b.remove&&(p[i.cid]=!0),b.merge&&(i.set(f.attributes,b),l&&!j&&i.hasChanged(m)&&(j=!0))):b.add&&(n.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d>c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&&this.remove(o,b)}if(n.length&&(l&&(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&&this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d>c;c++)(f=n[c]).trigger("add",f,this,b);return j&&this.trigger("sort",this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d>c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,"get",a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?"reset":"set";c[e](d,a),b&&b(c,d,a),c.trigger("sync",c,d,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&&c.add(a,b),d&&d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger("invalid",this,a,b),!1)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=["groupBy","countBy","sortBy"];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];h.extend(v.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&&this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=h.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,""===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(a){this.options&&(a=h.extend({},h.result(this,"options"),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,"el"),!1);else{var b=h.extend({},h.result(this,"attributes"));this.id&&(b.id=h.result(this,"id")),this.className&&(b["class"]=h.result(this,"className"));var c=a.$("<"+h.result(this,"tagName")+">").attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:"json"};if(d.url||(f.url=h.result(c,"url")||K()),null!=d.data||!c||"create"!==b&&"update"!==b&&"patch"!==b||(f.contentType="application/json",f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),d.emulateHTTP&&("PUT"===e||"DELETE"===e||"PATCH"===e)){f.type="POST",d.emulateJSON&&(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",e),g?g.apply(this,arguments):void 0}}"GET"===f.type||d.emulateJSON||(f.processData=!1),"PATCH"!==f.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger("request",c,i,d),i};var y={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&&(d=c,c=""),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&&d.apply(e,g),e.trigger.apply(e,["route:"+c].concat(g)),e.trigger("route",c,g),a.history.trigger("route",e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,"routes");for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(A,"(?:$1)?").replace(B,function(a,b){return b?a:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(b){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=h.extend({},{root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&&(!d||7>=d);this.root=("/"+this.root+"/").replace(G,"/"),e&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!e?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&g&&f.hash&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&&h.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}.call(this),define("backbone",["underscore","jquery"],function(a){return function(){var b;return b||a.Backbone}}(this)),define("underscore.mixins",["underscore","string"],function(a,b){a.mixin({compactURI:function(b,c){function d(b){var d=!b||!a.isString(b);if(d)return b;var e=b.lastIndexOf("#"),f={};if(c&&!a.isEmpty(c)){var g=a.pairs(c)[0][0];f=g.indexOf(":")<0?a.invert(c)||{}:c}if(0>e&&(e=b.lastIndexOf(b.lastIndexOf("/")<0?":":"/"),0>e))return b;var h=b.substring(0,e+1),i=b.substring(e+1);return f[h]||""===f[h]?f[h]+":"+i:b}return b?a.isArray(b)?a.map(a.compact(b),d):a.isString(b)?d(b):b:b},expandURI:function(b,c){function d(b){var d=!b||!a.isString(b);if(d)return b;var e=b.indexOf(":"),f={};if(c&&!a.isEmpty(c)){var g=a.pairs(c)[0][0];f=g.indexOf(":")<0?c:a.invert(c)||{}}if(0>e)return b;var h=b.substring(0,e),i=b.substring(e+1),j=f[h];return j?j+i:b}return a.isArray(b)?a.map(a.compact(b),d):a.isString(b)?d(b):b},localName:function(b){var c=!b||!a.isString(b);if(c)return b;var d=b.lastIndexOf("#");if(0>d&&(d=b.lastIndexOf(b.lastIndexOf("/")<0?":":"/"),0>d))return b;var e=b.substring(d+1);return e.trim()?e:b},isImage:function(c){var d=!c||!a.isString(c)||!a.isUri(c);if(d)return!1;var e=c.toLowerCase();return b(e).endsWith(".jpg")||b(e).endsWith(".jpeg")||b(e).endsWith(".png")||b(e).endsWith(".gif")||b(e).endsWith(".svg")},isUri:function(b){var c=!b||!a.isString(b);if(c)return!1;if(!b||b.indexOf(":")<0||b.indexOf(" ")>=0)return!1;var d=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;return d.test(b)},stringLiteral:function(b){var c=!b||a.isArray(b)&&0===b.length||a.isObject(b)&&0===a.keys(b).length;if(c)return b;var d=b;if(b instanceof Array){if(b=a.compact(b),0===b.length)return;if(1===b.length)d=b[0];else if(d=a.find(b,function(b){return!a.isObject(b)}),d||(d=a.find(b,function(a){return"en"==a["@language"]})),!d){var e=a.sortBy(b,function(a){return a["@value"].length});d=e[0]}}else d=b;return a.isObject(d)?d["@value"]:d},isDiff:function(b,c){var d=function(b,c){if(c.length!=b.length)return!0;var d=function(b){if(a.isObject(b)){if(a.has(b,"@id"))return b["@id"];var c=a.has(b,"@language")?b["@language"]:"";return b["@value"]+"@"+c}return a.isString(b)?b.trim():b},e=a.map(b,d),f=a.map(c,d);return!a.isEmpty(a.difference(e,f))||!a.isEmpty(a.difference(f,e))};if(typeof b!=typeof c){if(a.isString(b)||a.isString(c)){var e=JSON.stringify(b)||"",f=JSON.stringify(c)||"";return f.trim()!=e.trim()}return!0}if(a.isString(b)||a.isString(c))return a.isString(b)&&a.isString(c)?b.trim()!=c.trim():b!=c;var g=[];g.push(c),g=a.flatten(g);var h=[];return h.push(b),h=a.flatten(h),d(h,g)},determineRdfFormat:function(a){return a.match(/.*\.xml|.*\.rdf/i)?"application/rdf+xml":a.match(/.*\.n3/i)?"text/n3":a.match(/.*\.ttl/i)?"text/turtle":a.match(/.*\.nq/i)?"text/x-nquads":a.match(/.*\.trig/i)?"application/x-trig":a.match(/.*\.trix/i)?"application/trix":a.match(/.*\.rq/i)||a.match(/.*\.sparql/i)?"application/sparql-query":"text/plain"},filtersString:function(b){var c=function(a){return"filter=("+a.facet+"|$eq|"+a.value+")"};if(a.isArray(b)){var d=a.map(b,c);return d.join("&")}if(a.isObject(b)&&a.has(b,"facet")&&a.has(b,"value"))return c(b);throw new Error('Invalid argument: must be an Array of Objects or an Object with the format: { "facet": <property>, "value": <value> }')},asArray:function(b){if(!b)return b;var c=[];return c.push(b),a.compact(a.flatten(c))},urlFor:function(b){if(!b)throw new Error("baseUrl argument is required to generate a service URL!");var c=Array.prototype.slice.call(arguments,1),d=function(a){var c;return c="string"==typeof a?new Array(a):a||[],c.unshift(b),c.join("/")};return function(){var b=a.compact(a.toArray(arguments));return b.unshift.apply(b,c),d(b)}}})}),define("egad.config.model",["underscore","string","backbone","underscore.mixins"],function(a,b,c){var d={},e={LABEL:"usingLabel",LIMIT:"limit",ORDER:"order",FIELDS:"fields",TEMPLATE:"template"},f="http://www.w3.org/2002/07/owl#Thing",g="rdfs:label",h=20,i={};i[e.LABEL]=g,i[e.LIMIT]=h,i[e.ORDER]=void 0,i[e.FIELDS]=[],i[e.TEMPLATE]=[];var j=d.TemplateField=c.Model.extend({idAttribute:"property",getProperty:function(){return this.get("property")},getType:function(){return this.get("type")},getRange:function(){return this.get("range")},getValue:function(){return this.get("value")}}),k=d.Template=c.Collection.extend({model:j}),l=d.Collection=c.Model.extend({idAttribute:"rdfId",defaults:{fields:[],template:[]},getLabel:function(){return this.get(e.LABEL)},getLimit:function(){return this.get(e.LIMIT)},getOrderProperty:function(){return this.get(e.ORDER)},getFields:function(){return this.get(e.FIELDS)},getTemplate:function(){return this.template||(this.template=new k(this.get(e.TEMPLATE))),this.template}}),m=d.Collections=c.Collection.extend({model:l}),n=d.DefaultCollection=l.extend({defaults:i});return d.Model=c.Model.extend({stores:{EGAD_WIDGETS:"egad:widgets",EGAD_MODELS:"egad:models",EGAD_COLLECTIONS:"egad:collections",EGAD_LABELS:"egad:labels",EGAD_SCHEMA_CLASSES:"egad:schema:classes",EGAD_SCHEMA_PROPERTIES:"egad:schema:properties",EGAD_NAMESPACES:"egad:namespaces",EGAD_METADATA:"egad:metadata"},name:function(){return this.has("name")?this.get("name"):""},label:function(){return this.has("label")?this.get("label"):""},isStardogEmbedded:function(){return this.get("embeddedInStardog")},sparqlEndpoint:function(){var a=this,b=function(){return a.isStardogEmbedded()?window.location.protocol+"//"+window.location.host+window.location.pathname+"/query":a.get("sparqlEndpoint")}();return b?b:""},apiEndpoint:function(){var a=this,b=function(){var b=a.get("apiEndpoint");return a.isStardogEmbedded()?window.location.protocol+"//"+window.location.host+b+window.location.pathname:b}();return b?b:""},namespaces:function(b){function d(a){var b=new j;if(a)return b.fetch();b.fetch({async:!1});var c=b.toJSON();return sessionStorage.setItem(g.stores.EGAD_NAMESPACES,JSON.stringify(c)),c}var e,f,g=this,h=a.urlFor(g.apiEndpoint(),"graph"),i=g.get("namespaces")||{},j=c.Model.extend({id:"namespaces",url:function(){return h("namespaces")},sync:c.cachingSync(c.sync,"ns:namespaces",120)});return f=sessionStorage.getItem(g.stores.EGAD_NAMESPACES),b?d(b):f?(e=JSON.parse(f),a.extend(i,e)):(e=d(!1),e?a.extend(i,e):i)},getCollections:function(){var c=this;return c.collections||(c.collections=new m,c.get("collections")&&a.each(c.get("collections"),function(d){var e=a.clone(d);if(a.has(e,"rdfId")){e.rdfId=a.expandURI(b(d.rdfId).trim().s,c.namespaces());var g;g=e.rdfId===f?new n(e):new l(e),c.collections.add(g)}}),c.collections.get(f)||c.collections.add(new n({rdfId:f}))),c.collections},getCollection:function(b){var c=a.expandURI(b,this.namespaces());return this.getCollections().get(c)},getDefaultCollection:function(){return this.getCollection(f)},hasCollection:function(a){var b=this.getCollections();return 0===b.size()?!1:this.getCollection(a)?!0:!1},_getCollectionSettingDefaultAware:function(a,b){var c,d=this.getCollection(a);return c=d&&d.get(b)?d.get(b):this.getDefaultCollection().get(b)},getLabelFor:function(a){return this._getCollectionSettingDefaultAware(a,e.LABEL)},getLimitFor:function(a){return this._getCollectionSettingDefaultAware(a,e.LIMIT)},getOrderFor:function(a){return this._getCollectionSettingDefaultAware(a,e.ORDER)},getFieldsFor:function(a){return this._getCollectionSettingDefaultAware(a,e.FIELDS)},getTemplateFor:function(b){var c=this,d=a.asArray(b),e=c.getDefaultCollection().getTemplate().toJSON();return a.each(d,function(b){var d=a.pluck(e,"property"),f=c.getCollection(b);if(f){var g=f.getTemplate().toJSON();a.each(g,function(b){a.contains(d,b.property)||e.push(b)})}}),new k(e)}}),d}),define("egad.config",["underscore","egad.config.model"],function(a,b){var c=new b.Model;return c.set("name","Stardog Web Console"),c.set("label","img/sd.png"),c.set("sparqlEndpoint","unused"),c.set("apiEndpoint","/annex"),c.set("editData",!0),c.set("embeddedInStardog",!0),c.set("namespaces",{"http://www.w3.org/2004/02/skos/core#":"skos","http://www.w3.org/ns/org#":"org","http://purl.org/dc/elements/1.1/":"dc","http://dbpedia.org/resource/":"dbpedia","http://rdfs.org/ns/void#":"void","http://www.w3.org/ns/sparql-service-description#":"sd","http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/ns/formats/":"formats","http://xmlns.com/foaf/0.1/":"foaf","http://www.w3.org/2002/07/owl#":"owl","http://www.w3.org/2001/XMLSchema#":"xsd","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://clarkparsia.com/annex#":"annex","http://www.w3.org/2003/11/swrl#":"swrl"}),c.set("collections",{"default":{limit:20}}),c.set("modules",{home:{module:"webconsole"},footer:{content:"ext/footerContent.html"},navbar:{items:[{htmlId:"adminConsole",label:"Admin Console",type:"link",using:"/",icon:"icon-gears"},{htmlId:"queryPanel",label:"Query",type:"link",using:"#!/query",icon:"icon-terminal"},{htmlId:"schemaBrowser",label:"Browse",type:"link",using:"#!/schema",icon:"icon-sitemap"}],dropdowns:[]},browse:!0,query:{mainUrl:"#!/query",label:"Query",reasoning:!0},schema:{label:"Browse",mainUrl:"#!/schema"},search:{label:"Search",mainUrl:"#!/search",htmlId:"searchItem"},metadata:!0,treebrowser:!0,data:{code:"mods/data/module",templates:"mods/data/templates",styles:{location:"mods/data/styles"}},webconsole:{code:"mods/webconsole/module",templates:"mods/webconsole/templates",libs:{location:"mods/webconsole/libs",paths:{flot:"libs/webconsole/jquery.flot.min"},shim:{flot:["jquery"]}},styles:{location:"mods/webconsole/styles"}},help:!0,skos:!1,pelorus:!1}),{config:c}}),define("egad.vocabulary",[],function(){var a={};return a.xsd=new function(){this.NS="http://www.w3.org/2001/XMLSchema#",this.DATETIME=this.NS+"dateTime"},a.rdfs=new function(){this.NS="http://www.w3.org/2000/01/rdf-schema#",this.LABEL=this.NS+"label",this.COMMENT=this.NS+"comment"},a.rdf=new function(){this.NS="http://www.w3.org/1999/02/22-rdf-syntax-ns#",this.TYPE=this.NS+"type"},a.owl=new function(){this.NS="http://www.w3.org/2002/07/owl#",this.THING=this.NS+"Thing",this.DATATYPE_PROPERTY=this.NS+"DatatypeProperty",this.OBJECT_PROPERTY=this.NS+"ObjectProperty"},a.foaf=new function(){this.NS="http://xmlns.com/foaf/0.1/",this.NAME=this.NS+"name",this.HOMEPAGE=this.NS+"homepage"},a}),define("uri",["require","exports","module"],function(a,b,c){function d(a){return a=decodeURIComponent(a),a=a.replace("+"," ")}function e(a){var b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],d=b.exec(a||""),e={};return c.forEach(function(a,b){e[a]=d[b]||""}),e}function f(a){var b,c,d,e,f,g,h=[];if("undefined"==typeof a||null===a||""===a)return h;for(0===a.indexOf("?")&&(a=a.substring(1)),c=a.toString().split(/[&;]/),b=0;b<c.length;b++)d=c[b],e=d.split("="),f=e[0],g=-1===d.indexOf("=")?null:null===e[1]?"":e[1],h.push([f,g]);return h}function g(a){this.uriParts=e(a),this.queryPairs=f(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b||this,this[c],c,this)}),["protocol","userInfo","host","port","path","anchor"].forEach(function(a){g.prototype[a]=function(b){return"undefined"!=typeof b&&(this.uriParts[a]=b),this.uriParts[a]}}),g.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},g.prototype.query=function(a){var b,c,d="";for("undefined"!=typeof a&&(this.queryPairs=f(a)),b=0;b<this.queryPairs.length;b++)c=this.queryPairs[b],d.length>0&&(d+="&"),null===c[1]?d+=c[0]:(d+=c[0],d+="=",(c[1]||0===c[1])&&(d+=encodeURIComponent(c[1])));return d.length>0?"?"+d:d},g.prototype.getQueryParamValue=function(a){var b,c;for(c=0;c<this.queryPairs.length;c++)if(b=this.queryPairs[c],d(a)===d(b[0]))return b[1]},g.prototype.getQueryParamValues=function(a){var b,c,e=[];for(b=0;b<this.queryPairs.length;b++)c=this.queryPairs[b],d(a)===d(c[0])&&e.push(c[1]);return e},g.prototype.deleteQueryParam=function(a,b){var c,e,f,g,h=[];for(c=0;c<this.queryPairs.length;c++)e=this.queryPairs[c],f=d(e[0])===d(a),g=d(e[1])===d(b),(1===arguments.length&&!f||2===arguments.length&&!f&&!g)&&h.push(e);return this.queryPairs=h,this},g.prototype.addQueryParam=function(a,b,c){return 3===arguments.length&&-1!==c?(c=Math.min(c,this.queryPairs.length),this.queryPairs.splice(c,0,[a,b])):arguments.length>0&&this.queryPairs.push([a,b]),this},g.prototype.replaceQueryParam=function(a,b,c){var e,f,g=-1;if(3===arguments.length){for(e=0;e<this.queryPairs.length;e++)if(f=this.queryPairs[e],d(f[0])===d(a)&&decodeURIComponent(f[1])===d(c)){g=e;break}this.deleteQueryParam(a,c).addQueryParam(a,b,g)}else{for(e=0;e<this.queryPairs.length;e++)if(f=this.queryPairs[e],d(f[0])===d(a)){g=e;break}this.deleteQueryParam(a),this.addQueryParam(a,b,g)}return this},["protocol","hasAuthorityPrefix","userInfo","host","port","path","query","anchor"].forEach(function(a){var b="set"+a.charAt(0).toUpperCase()+a.slice(1);g.prototype[b]=function(b){return this[a](b),this}}),g.prototype.scheme=function(){var a="";return this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//"),a},g.prototype.origin=function(){var a=this.scheme();return this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@")),this.host()&&(a+=this.host(),this.port()&&(a+=":"+this.port())),a},g.prototype.toString=function(){var a=this.origin();return this.path()?a+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(a+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(a+="?"),a+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(a+="#"),a+=this.anchor()),a},g.prototype.clone=function(){return new g(this.toString())},"undefined"==typeof c?window.Uri=g:c.exports=g}),function(a,b){"function"==typeof define&&define.amd?define("burry",[],function(){return b()}):a.Burry=b()}(this,function(){var a={Store:function(b,c){var d=a.stores();b&&(this._CACHE_SUFFIX=this._CACHE_SUFFIX+b,this._EXPIRY_KEY=this._EXPIRY_KEY+b,-1===d.indexOf(b)&&d.push(b)),localStorage.setItem("_burry_stores_",JSON.stringify(d)),this.default_ttl=c},_EXPIRY_UNITS:6e4,_mEpoch:function(){return Math.floor((new Date).getTime()/a._EXPIRY_UNITS)},stores:function(){var a=localStorage.getItem("_burry_stores_");return a=a?JSON.parse(a):[""]},isSupported:function(){if(a._isSupported)return a._isSupported;try{localStorage.setItem("_burry_","_burry_"),localStorage.removeItem("_burry_")}catch(b){return a._isSupported=!1}return a._isSupported=JSON?!0:!1},flushExpired:function(){var b,c,d,e,f,g=[],h=a._mEpoch(),i=new RegExp("(.+)"+a.Store.prototype._EXPIRY_KEY+"(.*)");for(b=0;b<localStorage.length;b++)d=localStorage.key(b),c=d.match(i),c&&(e=localStorage.getItem(d),h>e&&(d=c[1],f=c[2],g.push(d+a.Store.prototype._CACHE_SUFFIX+f),g.push(d+a.Store.prototype._EXPIRY_KEY+f)));for(b=0;b<g.length;b++)localStorage.removeItem(g[b])}};return a.Store.prototype={_CACHE_SUFFIX:"-_burry_",_EXPIRY_KEY:"-_burry_exp_",_internalKey:function(a){return a=decodeURIComponent(a),a+this._CACHE_SUFFIX},_expirationKey:function(a){return a=decodeURIComponent(a),a+this._EXPIRY_KEY},_isInternalKey:function(a){return a=decodeURIComponent(a),a.slice(-this._CACHE_SUFFIX.length)===this._CACHE_SUFFIX?a.slice(0,-this._CACHE_SUFFIX.length):!1},_isExpirationKey:function(a){return a=decodeURIComponent(a),a.slice(-this._EXPIRY_KEY.length)===this._EXPIRY_KEY?a.slice(0,-this._EXPIRY_KEY.length):!1},_expiresOn:function(a){a=decodeURIComponent(a);var b=localStorage.getItem(this._expirationKey(a));return b?parseInt(b,10):void 0},_getCounter:function(a){var b=localStorage.getItem(a);return null===b?0:parseInt(b,10)},get:function(a){var b=localStorage.getItem(this._internalKey(a));if(null===b)return void 0;if(this.hasExpired(a))return void this.remove(a);try{b=JSON.parse(b)}catch(c){return void 0}return b},set:function(b,c,d){if(d=d||this.default_ttl,d&&(d=parseInt(d,10)),void 0!==typeof b&&void 0!==typeof c){c=JSON.stringify(c);try{localStorage.setItem(this._internalKey(b),c),d?localStorage.setItem(this._expirationKey(b),a._mEpoch()+d):localStorage.removeItem(this._expirationKey(b))}catch(e){if("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name){a.flushExpired();try{localStorage.setItem(this._internalKey(b),c),d?localStorage.setItem(this._expirationKey(b),a._mEpoch()+d):localStorage.removeItem(this._expirationKey(b))}catch(e){}}}}},add:function(a,b,c){(null===localStorage.getItem(this._internalKey(a))||this.hasExpired(a))&&this.set(a,b,c)},replace:function(a,b,c){null===localStorage.getItem(this._internalKey(a))||this.hasExpired(a)||this.set(a,b,c)},remove:function(a){localStorage.removeItem(this._internalKey(a)),localStorage.removeItem(this._expirationKey(a))},incr:function(a){var b=this._internalKey(a),c=this._getCounter(b);c++,localStorage.setItem(b,c)},decr:function(a){var b=this._internalKey(a),c=this._getCounter(b);c--,localStorage.setItem(b,c)},hasExpired:function(b){var c=this._expiresOn(b);return c&&c<a._mEpoch()?!0:!1},keys:function(){var a,b,c,d=[];for(a=0;a<localStorage.length;a++)b=localStorage.key(a),c=this._isInternalKey(b),c&&d.push(c);return d},expirableKeys:function(){var a,b,c,d={};for(a=0;a<localStorage.length;a++)b=localStorage.key(a),c=this._isExpirationKey(b),c&&(d[c]=parseInt(localStorage.getItem(b),10));return d},flush:function(){var a,b,c=[];for(a=0;a<localStorage.length;a++)b=localStorage.key(a),(this._isInternalKey(b)||this._isExpirationKey(b))&&c.push(b);for(a=0;a<c.length;a++)localStorage.removeItem(c[a])},flushExpired:function(){var b,c,d=this.expirableKeys(),e=a._mEpoch();for(b in d)c=d[b],e>c&&this.remove(b)}},a}),function(a,b){"function"==typeof define&&define.amd?define("backbone.cachingsync",["jquery","underscore","backbone","burry"],function(c,d,e,f){return a.Backbone.cachingSync=b(c,d,e,f)}):a.Backbone.cachingSync=b(a.$,a._,a.Backbone,a.Burry)}(this,function(a,b,c,d){var e=function(c,e,f){function g(d,e){var f,g=l.get(d.id),h=a.Deferred(),i={};return f=c("read",d,e),f&&f.done(function(a){d.set(a),l.set(d.id,d.toJSON())}),"undefined"!=typeof g?(b.each(g,function(a,b){d.get(b)!==a&&(i[b]=a)}),h.resolve(i)):f.done(h.resolve).fail(h.reject),h.promise()}function h(d,e){var f,g=l.get("__ids__"),h=a.Deferred();return f=c("read",d,e).done(function(a){b.each(a,function(a){l.set(a.id,a)}),e?d.set(a,e):d.reset(a),l.set("__ids__",b.pluck(d.models,"id"))}),"undefined"!=typeof g?h.resolve(b.map(g,function(a){return json=l.get(a),json.id=a,json})):f.done(h.resolve).fail(h.reject),h.promise()}function i(a,d){return c("create",a,d).done(function(c){l.set(c[a.idAttribute],c),a.collection&&l.set("__ids__",b(a.collection.models).chain().pluck("id").union([c[a.idAttribute]]).without(void 0).value())}).promise()}function j(a,b){var d=l.get(a.id);return l.set(a.id,a.attributes),c("update",a,b).fail(function(){d?l.set(a.id,d):l.remove(a.id)}).promise()}function k(a,b){var d=l.get(a.id);return l.remove(a.id),c("delete",a,b).fail(function(){d&&l.set(a.id,d)}).promise()}var l=new d.Store(e,f);return function(a,b,c){var d;switch(c=c||{},a){case"read":d="undefined"!=typeof b.id?g(b,c):h(b,c);
break;case"create":d=i(b,c);break;case"update":d=j(b,c);break;case"delete":d=k(b,c)}return c.success&&d.done(c.success),c.error&&d.fail(c.error),d}};return e}),define("egad.ajax",["underscore","egad.config","egad.vocabulary","backbone","uri","backbone.cachingsync","underscore.mixins"],function(a,b,c,d,e){var f,g=b.config.isStardogEmbedded(),h=g?window.location.pathname.substring(1):"",i=b.config.apiEndpoint(),j=b.config.sparqlEndpoint(),k=b.config.getDefaultCollection().limit,l=a.urlFor(i,"graph"),m=a.urlFor(i,"graph","reasoning"),n=a.urlFor(i,"search"),o=a.urlFor(i,"schema"),p=a.urlFor(i,"sparql","query"),q=function(){return h},r=function(){return i},s=function(a,b){var c=new e(p());return b?c.addQueryParam("url",b+"?query="+a):g?c.addQueryParam("query",decodeURIComponent(a)):c.addQueryParam("url",j+"?query="+a),c},t=function(b,c){var d=a.urlFor(i,"sparql");return d()+"/"+b+"?url="+encodeURIComponent(c)},u=d.Model.extend({url:function(){return o(this.id)}}),v=d.Model.extend({url:function(){return o("superclasses",this.id)}}),w=function(a,c){var d=new u({id:a});if(c)return d.fetch();d.fetch({async:!1});var e=d.toJSON();return"classes"===a?sessionStorage.setItem(b.config.stores.EGAD_SCHEMA_CLASSES,JSON.stringify(e)):sessionStorage.setItem(b.config.stores.EGAD_SCHEMA_PROPERTIES,JSON.stringify(e)),e},x=function(a){var c=sessionStorage.getItem(b.config.stores.EGAD_SCHEMA_CLASSES);return!a&&c?JSON.parse(c):w("classes",a)},y=function(a){var c=sessionStorage.getItem(b.config.stores.EGAD_SCHEMA_PROPERTIES);return!a&&c?JSON.parse(c):w("properties",a)},z=function(a){var b=new v({id:encodeURIComponent(a)});return b.fetch({async:!1}),b.get("superclasses")},A=function(b){var c="literal",d=b;return a.isObject(b)&&(b["@id"]?(d=b["@id"],c="uri"):b["@value"]?d=b["@value"]:""===b["@value"]&&(d='<span class="label label-important">Empty</span>')),{type:c,val:d}},B=function(b,d,e,f){var g=A(e);return d="@type"===d?c.rdf.TYPE:d,"uri"===g.type&&(g.val=a.expandURI(g.val,f)),{s:{type:"uri",value:a.expandURI(b,f)},p:{type:"uri",value:a.expandURI(d,f)},o:{type:g.type,value:g.val}}},C=function(c){var d={head:{vars:["s","p","o"]},results:{bindings:[]}};if(a.isArray(c)){for(var e=0;e<c.length;e++){var g=d.results.bindings.concat(C(c[e],d).results.bindings);d.results.bindings=g}return d}if(a.isObject(c)&&!a.isString(c)&&a.has(c,"@id")){f=a.has(c,"@context")?c["@context"]:b.config.namespaces();var h=c["@id"];return a.each(c,function(b,c){if("@"!==c.charAt(0)||"@type"===c)if(a.isArray(b))for(var e=0;e<b.length;e++)d.results.bindings.push(B(h,c,b[e],f));else d.results.bindings.push(B(h,c,b,f))}),d}return c};return{stardogDB:q,rootUrl:r,graphUrl:l,graphReasoningUrl:m,searchUrl:n,schemaUrl:o,queryUrl:p,sparqlEndpoint:j,sparqlEndpointUrl:s,sparqlPathFor:t,listingLimit:k,getClassSchemaInfo:x,getPropertySchemaInfo:y,getSuperClasses:z,convertResultsToTable:C}}),define("egad.model",["underscore","backbone","egad.ajax","egad.config","egad.vocabulary","burry","uri","underscore.mixins","backbone.cachingsync"],function(a,b,c,d,e,f,g){var h={};return h.Resource=b.Model.extend({idAttribute:"@id",labelProperty:"rdfs:label",sync:b.cachingSync(b.sync,d.config.stores.EGAD_MODELS,120),initialize:function(a){a=a||{},a&&a.labelProperty&&(this.labelProperty=a.labelProperty),this.setUrl(a),this.afterInitialize&&this.afterInitialize(a)},validate:function(b,c){function f(a){g=!1,h.push(a)}var g=!0,h=[],i=[];if(c&&c.fieldsTemplate&&c.fieldsTemplate.forEach(function(c){if(a.expandURI(c.id,d.config.namespaces())!==e.rdf.TYPE){i.push(c.id);var g,h=a.expandURI(c.id,d.config.namespaces()),j=a.compactURI(c.id,d.config.namespaces());if(a.has(b,h))g=h;else{if(!a.has(b,j))return void f(c.id);g=j}var k=b[g];(!k||k instanceof Array&&0===k.length||k instanceof Object&&a.isEmpty(k))&&f(c.id)}}),!g){var j=a.asArray(b["@type"]),k=j?"with type(s): "+a.map(j,function(b){return"<code>"+a.compactURI(b)+"</code>"}).join(", "):"resource";return"<p>New instance "+k+" must have values for properties: "+i.join(", ")+"</p><p>Missing: <strong>"+h.join(", ")+"</strong></p>"}},setUrl:function(a){var b,e=a.fromCollection||"resource";b=d.config.get("modules").browse&&d.config.get("modules").browse.reasoning?c.graphReasoningUrl:c.graphUrl,this.url=function(){var c=b(e,this.id),d=new g(c);return a.fields&&d.addQueryParam("fields","("+a.fields.join(",")+")"),d.toString()},this.urlRoot=b(e)},getConfigLabelField:function(){var b,c=[],e=a.asArray(this.get("@type"));return d.config.has("collections")&&(c=a.map(e,function(a){return d.config.getLabelFor(a)})),b=c.length>0?c:this.labelProperty},getLabel:function(b){var c="";if(b||(b=this.getConfigLabelField()),a.isArray(b)){for(var d=0;d<b.length;d+=1)if(this.has(b[d])){this.labelProperty=b[d];break}}else a.isString(b)&&(this.labelProperty=b);return c=a.stringLiteral(this.get(this.labelProperty)),c||"rdfs:label"==this.labelProperty||(c=a.stringLiteral(this.get("rdfs:label"))),c||this.labelProperty==e.rdfs.LABEL||(c=a.stringLiteral(this.get(e.rdfs.LABEL))),!c&&this.id&&(c=decodeURIComponent(a.localName(decodeURIComponent(this.id)))),c},getComment:function(){return this.hasProperty(e.rdfs.COMMENT)?a.stringLiteral(this.getProperty(e.rdfs.COMMENT)):void 0},getId:function(){return this.id?decodeURIComponent(this.id):void 0},getType:function(){return this.get("@type")?a.asArray(this.get("@type")):[]},setType:function(b){b&&this.set("@type",a.asArray(b))},hasLabel:function(){return this.has(this.labelProperty)},getProperties:function(){var b=this,c=new h.Properties;if(0!==a.keys(b.attributes).length){for(var d in b.attributes){var e;"@"!=d.charAt(0)&&(e=new h.Property({"@id":encodeURIComponent(d)}),e.fetch({async:!1}),e.set("@value",b.getProperty(d)),c.add(e))}return c}},getProperty:function(b){var c=this.get("@context")||d.config.namespaces();return this.get(a.expandURI(b,c))||this.get(a.compactURI(b,c))},hasProperty:function(a){return this.getProperty(a)?!0:!1},setProperty:function(b,c){var e=this.get("@context")||d.config.namespaces(),f=a.compactURI(b,e),g=a.expandURI(b,e);this.get(f)||this.get("@context")?this.set(f,c):this.set(g,c)},unsetProperty:function(b){var c=this.get("@context")||d.config.namespaces(),e=a.compactURI(b,c),f=a.expandURI(b,c);this.get(e)?this.unset(e):this.has(f)&&this.unset(f)}}),h.ResourceLabel=h.Resource.extend({labelProperty:"rdfs:label",sync:b.cachingSync(b.sync,d.config.stores.EGAD_LABELS,120),afterInitialize:function(){var b=this;this.url=function(){return c.graphUrl("resource",this.id)+"?fields=("+this.labelProperty+")"};var d;this.fetch({async:!1}).done(function(){d=b.get(b.labelProperty)}),this.set("@egadLabel",a.stringLiteral(d)||decodeURIComponent(this.id))}}),h.ResourceCollection=b.Collection.extend({model:h.Resource,page:0,limit:void 0,rdfType:"owl:Thing",rdfTypeLabel:"Thing",usingProperty:"",initialize:function(a,b){var e=this;this.url=function(){var a,f;f=d.config.get("modules").browse&&d.config.get("modules").browse.reasoning?c.graphReasoningUrl:c.graphUrl,e.rdfType=b.rdfType||e.rdfType,e.usingProperty=b.usingProperty,a=e.usingProperty?f("using",encodeURIComponent(e.usingProperty)):f(encodeURIComponent(e.rdfType));var h=new g(a);if(b.filter&&h.query(b.filter),b.fields&&h.addQueryParam("fields","("+b.fields.join(",")+")"),b.order&&h.addQueryParam("order","("+b.order+",1)"),!b.all){e.limit=b.limit||d.config.getLimitFor(e.rdfType)||c.listingLimit,e.page=b.page||0;var i=0;e.limit||(e.limit=15),i=e.limit*e.page,h.addQueryParam("limit",e.limit).addQueryParam("offset",i)}return h}},isFull:function(){return this.length==this.limit}}),h.Property=h.Resource.extend({defaults:{"@value":""}}),h.Properties=h.ResourceCollection.extend({model:h.Property,url:c.graphUrl("resource")}),h}),function(a){function b(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function c(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function d(a){for(t in v)v[t]=a[B[t]]}function e(a,c){var e,f,g,i,j;if(e=a.keyCode,-1==b(A,e)&&A.push(e),(93==e||224==e)&&(e=91),e in v){v[e]=!0;for(g in x)x[g]==e&&(h[g]=!0)}else if(d(a),h.filter.call(this,a)&&e in u)for(i=0;i<u[e].length;i++)if(f=u[e][i],f.scope==c||"all"==f.scope){j=f.mods.length>0;for(g in v)(!v[g]&&b(f.mods,+g)>-1||v[g]&&-1==b(f.mods,+g))&&(j=!1);(0!=f.mods.length||v[16]||v[18]||v[17]||v[91])&&!j||f.method(a,f)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}function f(a){var c,d=a.keyCode,e=b(A,d);if(e>=0&&A.splice(e,1),(93==d||224==d)&&(d=91),d in v){v[d]=!1;for(c in x)x[c]==d&&(h[c]=!1)}}function g(){for(t in v)v[t]=!1;for(t in x)h[t]=!1}function h(a,b,c){var d,e;d=p(a),void 0===c&&(c=b,b="all");for(var f=0;f<d.length;f++)e=[],a=d[f].split("+"),a.length>1&&(e=q(a),a=[a[a.length-1]]),a=a[0],a=z(a),a in u||(u[a]=[]),u[a].push({shortcut:d[f],scope:b,method:c,key:d[f],mods:e})}function i(a,b){var d,e,f=a.split("+"),g=[];if(f.length>1&&(g=q(f),a=f[f.length-1]),a=z(a),void 0===b&&(b=n()),u[a])for(d in u[a])e=u[a][d],e.scope===b&&c(e.mods,g)&&(u[a][d]={})}function j(a){return"string"==typeof a&&(a=z(a)),-1!=b(A,a)}function k(){return A.slice(0)}function l(a){var b=(a.target||a.srcElement).tagName;return!("INPUT"==b||"SELECT"==b||"TEXTAREA"==b)}function m(a){w=a||"all"}function n(){return w||"all"}function o(a){var b,c,d;for(b in u)for(c=u[b],d=0;d<c.length;)c[d].scope===a?c.splice(d,1):d++}function p(a){var b;return a=a.replace(/\s/g,""),b=a.split(","),""==b[b.length-1]&&(b[b.length-2]+=","),b}function q(a){for(var b=a.slice(0,a.length-1),c=0;c<b.length;c++)b[c]=x[b[c]];return b}function r(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}function s(){var b=a.key;return a.key=C,b}var t,u={},v={16:!1,18:!1,17:!1,91:!1},w="all",x={"â§":16,shift:16,"â¥":18,alt:18,option:18,"â":17,ctrl:17,control:17,"â":91,command:91},y={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},z=function(a){return y[a]||a.toUpperCase().charCodeAt(0)},A=[];for(t=1;20>t;t++)y["f"+t]=111+t;var B={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(t in x)h[t]=!1;r(document,"keydown",function(a){e(a,w)}),r(document,"keyup",f),r(window,"focus",g);var C=a.key;a.key=h,a.key.setScope=m,a.key.getScope=n,a.key.deleteScope=o,a.key.filter=l,a.key.isPressed=j,a.key.getPressedKeyCodes=k,a.key.noConflict=s,a.key.unbind=i,"undefined"!=typeof module&&(module.exports=key)}(this),define("keymaster",function(a){return function(){var b;return b||a.key}}(this)),function(a,b){"use strict";"undefined"!=typeof exports?exports.Mediator=b():"function"==typeof define&&define.amd?define("mediator-js",[],function(){return a.Mediator=b(),a.Mediator()}):a.Mediator=b()}(this,function(){"use strict";function a(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function b(c,d,e){return this instanceof b?(this.id=a(),this.fn=c,this.options=d,this.context=e,void(this.channel=null)):new b(c,d,e)}function c(a,b){return this instanceof c?(this.namespace=a||"",this._subscribers=[],this._channels=[],this._parent=b,void(this.stopped=!1)):new c(a)}function d(){return this instanceof d?void(this._channels=new c("")):new d}return b.prototype={update:function(a){a&&(this.fn=a.fn||this.fn,this.context=a.context||this.context,this.options=a.options||this.options,this.channel&&this.options&&void 0!==this.options.priority&&this.channel.setPriority(this.id,this.options.priority))}},c.prototype={addSubscriber:function(a,c,d){var e=new b(a,c,d);return c&&void 0!==c.priority?(c.priority=c.priority>>0,c.priority<0&&(c.priority=0),c.priority>=this._subscribers.length&&(c.priority=this._subscribers.length-1),this._subscribers.splice(c.priority,0,e)):this._subscribers.push(e),e.channel=this,e},stopPropagation:function(){this.stopped=!0},getSubscriber:function(a){var b=0,c=this._subscribers.length;for(c;c>b;b++)if(this._subscribers[b].id===a||this._subscribers[b].fn===a)return this._subscribers[b]},setPriority:function(a,b){var c,d,e,f,g=0,h=0;for(h=0,f=this._subscribers.length;f>h&&(this._subscribers[h].id!==a&&this._subscribers[h].fn!==a);h++)g++;c=this._subscribers[g],d=this._subscribers.slice(0,g),e=this._subscribers.slice(g+1),this._subscribers=d.concat(e),this._subscribers.splice(b,0,c)},addChannel:function(a){this._channels[a]=new c((this.namespace?this.namespace+":":"")+a,this)},hasChannel:function(a){return this._channels.hasOwnProperty(a)},returnChannel:function(a){return this._channels[a]},removeSubscriber:function(a){var b=this._subscribers.length-1;if(!a)return void(this._subscribers=[]);for(b;b>=0;b--)(this._subscribers[b].fn===a||this._subscribers[b].id===a)&&(this._subscribers[b].channel=null,this._subscribers.splice(b,1))},publish:function(a){var b,c,d,e=0,f=this._subscribers.length,g=!1;for(f;f>e;e++)this.stopped||(b=this._subscribers[e],void 0!==b.options&&"function"==typeof b.options.predicate?b.options.predicate.apply(b.context,a)&&(b.fn.apply(b.context,a),g=!0):(c=this._subscribers.length,b.fn.apply(b.context,a),d=this._subscribers.length,f=d,d===c-1&&e--,g=!0)),g&&b.options&&void 0!==b.options&&(b.options.calls--,b.options.calls<1&&(this.removeSubscriber(b.id),f--,e--));this._parent&&this._parent.publish(a),this.stopped=!1}},d.prototype={getChannel:function(a){var b=this._channels,c=a.split(":"),d=0,e=c.length;if(""===a)return b;if(c.length>0)for(e;e>d;d++)b.hasChannel(c[d])||b.addChannel(c[d]),b=b.returnChannel(c[d]);return b},subscribe:function(a,b,c,d){var e=this.getChannel(a);return c=c||{},d=d||{},e.addSubscriber(b,c,d)},once:function(a,b,c,d){return c=c||{},c.calls=1,this.subscribe(a,b,c,d)},getSubscriber:function(a,b){return this.getChannel(b||"").getSubscriber(a)},remove:function(a,b){this.getChannel(a).removeSubscriber(b)},publish:function(a){var b=Array.prototype.slice.call(arguments,1),c=this.getChannel(a);b.push(c),this.getChannel(a).publish(b)}},d.prototype.on=d.prototype.subscribe,d.prototype.bind=d.prototype.subscribe,d.prototype.emit=d.prototype.publish,d.prototype.trigger=d.prototype.publish,d.prototype.off=d.prototype.remove,d.Channel=c,d.Subscriber=b,d.version="0.9.4",d}),define("egad.event",["underscore","mediator-js","keymaster"],function(a,b){var c={},d={},e=null,f=c.defaultModule="main";a.extend(c,{eventType:"eventGlobal",defaultModule:f,currentModule:function(a){e=a||f},getCurrentModule:function(){return e},on:function(a){var c=function(){},e=a.actionName||"default",f=a.callback||c,g=a.module||this.defaultModule,h=this.eventType+":"+g+":"+e;return b.subscribe(h,f),d[g]||(d[g]={}),d[g][e]=a.description,h},off:function(){if(!arguments[0])throw new Error("NO NAMESPACE WAS GIVEN FOR TRIGGER");b.remove.apply(b,arguments)},trigger:function(){if(!arguments[0])throw new Error("NO NAMESPACE WAS GIVEN FOR TRIGGER!");b.publish.apply(b,arguments)},getDescriptions:function(){return d}});var g={};a.extend(g,c,{eventType:"comm",actions:{},_actionKey:function(a,b){return a+"#"+b},_addAction:function(a,b,c){this.actions[this._actionKey(a,b)]=c},_getAction:function(a,b){return this.actions[this._actionKey(a,b)]},addListener:function(a,b,c,d){var e=this.on({module:a,actionName:b,description:c,callback:d});this._addAction(a,b,e)},sendMessage:function(a,b,c){this.trigger(this._getAction(a,b),c)}});var h={};return a.extend(h,c,{eventType:"shortcuts",registerShortcut:function(a,b,d,e){var f=this,g=f.on({module:a,actionName:b,callback:e,description:d});key(b,function(b){(a===c.defaultModule||a===c.getCurrentModule())&&f.trigger(g,b)})},getModuleEvents:function(a){var d,e,f,g=b.getChannel(h.eventType),i={},j=h.getDescriptions(),k=c.defaultModule;if(e=g._channels[k])for(d in e._channels)i[d]=j[k][d];if(a&&g._channels[a]&&(f=g._channels[a]._channels))for(d in f)i[d]=j[a][d];return i},showHelp:function(){var a=h.getModuleEvents(c.getCurrentModule());g.sendMessage("help","showHelp",{moduleEvents:a})}}),{EventManager:c,CommManager:g,ShortcutsManager:h}}),function(a){"use strict";var b,c=a.Backbone,d=a._,e=c.$,f=a.console&&a.console.warn,g=a.console&&a.console.trace,h=c.View.prototype._configure,i=(c.View.prototype.render,Array.prototype.push),j=Array.prototype.concat,k=Array.prototype.splice,l=c.View.extend({constructor:function(a){a=a||{},l.setupView(this,a),c.View.call(this,a)},insertView:function(a,b){return b?this.setView(a,b,!0):this.setView(a,!0)},insertViews:function(a){return d.isArray(a)?this.setViews({"":a}):(d.each(a,function(b,c){a[c]=d.isArray(b)?b:[b]}),this.setViews(a))},getView:function(a){return null==a&&(a=arguments[1]),this.getViews(a).first().value()},getViews:function(a){var b;return"string"==typeof a?(b=this.views[a]||[],d.chain([].concat(b))):(b=d.chain(this.views).map(function(a){return d.isArray(a)?a:[a]},this).flatten(),"object"==typeof a?b.where(a):"function"==typeof a?b.filter(a):b)},removeView:function(a){return this.getViews(a).each(function(a){a.remove()})},setView:function(a,b,c){var e,f,g,h=this;if("string"!=typeof a&&(c=b,b=a,a=""),this.views=this.views||{},e=b.__manager__,f=this.views[a],!e)throw new Error("Please set `View#manage` property with selector '"+a+"' to `true`.");return g=b.getAllOptions(),e.parent=h,e.selector=a,b.on("all",function(a){"beforeRender"!==a&&"afterRender"!==a&&h.trigger.apply(h,arguments)},b),c?(this.views[a]=j.call([],f||[],b),e.insert=!0,b):(e.hasRendered&&g.partial(h.$el,b.$el,h.__manager__,e),f&&d.each(j.call([],f),function(a){a.remove()}),this.views[a]=b)},setViews:function(a){return d.each(a,function(a,b){return d.isArray(a)?d.each(a,function(a){this.insertView(b,a)},this):void this.setView(b,a)},this),this},render:function(){function b(){function b(){var b=h.afterRender;b&&b.call(e,e),e.trigger("afterRender",e),j.noel&&e.$el.length>1&&f&&!h.suppressWarnings&&(a.console.warn("Using `el: false` with multiple top level elements is not supported."),g&&a.console.trace())}var c;return k&&(h.contains(k.el,e.el)||h.partial(k.$el,e.$el,m,j)),e.delegateEvents(),j.hasRendered=!0,(c=j.queue.shift())?c():delete j.queue,m&&m.queue?k.once("afterRender",b):b(),n.resolveWith(e,[e])}function c(){{var a=e.getAllOptions(),c=e.__manager__,f=c.parent;f&&f.__manager__}e._render(l._viewRender,a).done(function(){if(!d.keys(e.views).length)return b();var c=d.map(e.views,function(a){var b=d.isArray(a);return b&&a.length?d.reduce(a.slice(1),function(a,b){return a.then(function(){return b.render()})},a[0].render()):b?a:a.render()});a.when(c).done(b)})}var e=this,h=e.getAllOptions(),j=e.__manager__,k=j.parent,m=k&&k.__manager__,n=h.deferred();return j.queue?i.call(j.queue,c):(j.queue=[],c(e,n)),n.view=e,n},remove:function(){return l._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return d.extend({},this,l.prototype.options,this.options)}},{_cache:{},_makeAsync:function(a,b){var c=a.deferred();return c.async=function(){return c._isAsync=!0,b},c},_viewRender:function(a,b){function c(c){c&&(k.noel?(c=e.trim(c),j=e(c),a.$el.slice(1).remove(),a.$el.replaceWith(j),a.setElement(j,!1)):b.html(a.$el,c)),i.resolveWith(a,[a])}function f(a,d){var e,f=l._makeAsync(b,function(a){c(a)});l.cache(g,d),d&&(e=b.render.call(f,d,a)),f._isAsync||c(e)}var g,h,i,j,k=a.__manager__;return{render:function(){var c=a.serialize||b.serialize,e=a.template||b.template;return d.isFunction(c)&&(c=c.call(a)),i=l._makeAsync(b,function(a){f(c,a)}),"string"==typeof e&&(g=b.prefix+e),(h=l.cache(g))?(f(c,h,g),i):("string"==typeof e?h=b.fetch.call(i,b.prefix+e):"function"==typeof e?h=e:null!=e&&(h=b.fetch.call(i,e)),i._isAsync||f(c,h),i)}}},_removeViews:function(a,b){"boolean"==typeof a&&(b=a,a=this),a=a||this,a.getViews().each(function(a){(a.__manager__.hasRendered||b)&&l._removeView(a,b)})},_removeView:function(a,b){var c,e=a.__manager__,f="boolean"==typeof a.keep?a.keep:a.options.keep;if(!f&&e.insert===!0||b){if(l.cleanViews(a),a._removeViews(!0),a.$el.remove(),!e.parent)return;if(c=e.parent.views[e.selector],d.isArray(c))return d.each(d.clone(c),function(a,b){a&&a.__manager__===e&&k.call(c,b,1)});delete e.parent.views[e.selector]}},cache:function(a,b){return a in this._cache&&null==b?this._cache[a]:null!=a&&null!=b?this._cache[a]=b:void 0},cleanViews:function(a){d.each(j.call([],a),function(a){var b;a.unbind(),a.model instanceof c.Model&&a.model.off(null,null,a),a.collection instanceof c.Collection&&a.collection.off(null,null,a),a.stopListening(),b=a.getAllOptions().cleanup,d.isFunction(b)&&b.call(a)})},configure:function(a){d.extend(l.prototype.options,a),a.manage&&(c.View.prototype.manage=!0),a.el===!1&&(c.View.prototype.el=!1),a.suppressWarnings===!0&&(c.View.prototype.suppressWarnings=!0)},setupView:function(a,e){d.each(j.call([],a),function(a){if(!a.__manager__){var f,g,h,i=l.prototype,k=d.pick(a,b);d.defaults(a,{views:{},__manager__:{},_removeViews:l._removeViews,_removeView:l._removeView},l.prototype),e=a.options=d.defaults(e||{},a.options,i.options),h=d.pick(e,j.call(["events"],d.values(e.events))),d.extend(a,h),(k.render===l.prototype.render||k.render===c.View.prototype.render)&&delete k.render,d.extend(e,k),a._remove=c.View.prototype.remove,a._render=function(a,b){var c=this,d=c.__manager__,e=b.beforeRender;return d.hasRendered&&this._removeViews(),e&&e.call(this,this),this.trigger("beforeRender",this),a(this,b).render()},a.render=l.prototype.render,a.remove!==i.remove&&(a._remove=a.remove,a.remove=i.remove),f=e.views||a.views,d.keys(f).length&&(g=f,a.views={},a.setViews(g)),a.options.template?a.options.template=e.template:a.template&&(e.template=a.template)}})}});c.Layout=l,l.VERSION="0.8.7",c.View.prototype._configure=function(a){var b,c;return("el"in a?a.el===!1:this.el===!1)&&(b=!0),c=h.apply(this,arguments),(a.manage||this.manage)&&l.setupView(this),this.__manager__&&(this.__manager__.noel=b,this.__manager__.suppressWarnings=a.suppressWarnings),c},l.prototype.options={prefix:"",deferred:function(){return e.Deferred()},fetch:function(a){return d.template(e(a).html())},partial:function(a,b,c,d){if(d.selector)if(c.noel){var e=a.filter(d.selector);a=e.length?e:a.find(d.selector)}else a=a.find(d.selector);d.insert?this.insert(a,b):this.html(a,b)},html:function(a,b){a.html(b)},insert:function(a,b){a.append(b)},when:function(a){return e.when.apply(null,a)},render:function(a,b){return a(b)},contains:function(a,b){return e.contains(a,b)}},b=d.keys(l.prototype.options)}("object"==typeof global?global:this),define("backbone.layoutmanager",function(){});var a={};if(function(a,b){a.VERSION="1.0.0",a.COMPILER_REVISION=4,a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},a.helpers={},a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d)throw new a.Exception("Arg not supported with multiple helpers");a.Utils.extend(this.helpers,b)}else f&&(d.not=f),this.helpers[b]=d},a.registerPartial=function(b,d){c.call(b)===e?a.Utils.extend(this.partials,b):this.partials[b]=d},a.registerHelper("helperMissing",function(a){if(2===arguments.length)return b;throw new Error("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn,h=c.call(b);return h===d&&(b=b.call(this)),b===!0?g(this):b===!1||null==b?f(this):"[object Array]"===h?b.length>0?a.helpers.each(b,e):f(this):g(b)}),a.K=function(){},a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;return a.K.prototype=null,c},a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];"undefined"!=typeof console&&console[d]&&console[d].call(console,c)}}},a.log=function(b,c){a.logger.log(b,c)},a.registerHelper("each",function(b,e){var f,g=e.fn,h=e.inverse,i=0,j="",k=c.call(b);if(k===d&&(b=b.call(this)),e.data&&(f=a.createFrame(e.data)),b&&"object"==typeof b)if(b instanceof Array)for(var l=b.length;l>i;i++)f&&(f.index=i),j+=g(b[i],{data:f});else for(var m in b)b.hasOwnProperty(m)&&(f&&(f.key=m),j+=g(b[m],{data:f}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),!b||a.Utils.isEmpty(b)?e.inverse(this):e.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})}),a.registerHelper("with",function(b,e){var f=c.call(b);return f===d&&(b=b.call(this)),a.Utils.isEmpty(b)?void 0:e.fn(b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)});var f=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.$=new d.ProgramNode([],f[g]);break;case 3:this.$=new d.ProgramNode(f[g-2],f[g]);break;case 4:this.$=new d.ProgramNode(f[g-1],[]);break;case 5:this.$=new d.ProgramNode(f[g]);break;case 6:this.$=new d.ProgramNode([],[]);break;case 7:this.$=new d.ProgramNode([]);break;case 8:this.$=[f[g]];break;case 9:f[g-1].push(f[g]),this.$=f[g-1];break;case 10:this.$=new d.BlockNode(f[g-2],f[g-1].inverse,f[g-1],f[g]);break;case 11:this.$=new d.BlockNode(f[g-2],f[g-1],f[g-1].inverse,f[g]);break;case 12:this.$=f[g];break;case 13:this.$=f[g];break;case 14:this.$=new d.ContentNode(f[g]);break;case 15:this.$=new d.CommentNode(f[g]);break;case 16:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 17:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1]);break;case 18:this.$=f[g-1];break;case 19:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],"&"===f[g-2][2]);break;case 20:this.$=new d.MustacheNode(f[g-1][0],f[g-1][1],!0);break;case 21:this.$=new d.PartialNode(f[g-1]);break;case 22:this.$=new d.PartialNode(f[g-2],f[g-1]);break;case 23:break;case 24:this.$=[[f[g-2]].concat(f[g-1]),f[g]];break;case 25:this.$=[[f[g-1]].concat(f[g]),null];break;case 26:this.$=[[f[g-1]],f[g]];break;case 27:this.$=[[f[g]],null];break;case 28:this.$=[[f[g]],null];break;case 29:f[g-1].push(f[g]),this.$=f[g-1];break;case 30:this.$=[f[g]];break;case 31:this.$=f[g];break;case 32:this.$=new d.StringNode(f[g]);break;case 33:this.$=new d.IntegerNode(f[g]);break;case 34:this.$=new d.BooleanNode(f[g]);break;case 35:this.$=f[g];break;case 36:this.$=new d.HashNode(f[g]);break;case 37:f[g-1].push(f[g]),this.$=f[g-1];break;case 38:this.$=[f[g]];break;case 39:this.$=[f[g-2],f[g]];break;case 40:this.$=[f[g-2],new d.StringNode(f[g])];break;case 41:this.$=[f[g-2],new d.IntegerNode(f[g])];break;case 42:this.$=[f[g-2],new d.BooleanNode(f[g])];break;case 43:this.$=[f[g-2],f[g]];break;case 44:this.$=new d.PartialNameNode(f[g]);break;case 45:this.$=new d.PartialNameNode(new d.StringNode(f[g]));break;case 46:this.$=new d.PartialNameNode(new d.IntegerNode(f[g]));break;case 47:this.$=new d.DataNode(f[g]);break;case 48:this.$=new d.IdNode(f[g]);break;case 49:f[g-2].push({part:f[g],separator:f[g-1]}),this.$=f[g-2];break;case 50:this.$=[{part:f[g]}]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(a){throw new Error(a)
},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){switch(c){case 0:return b.yytext="\\",14;case 1:if("\\"!==b.yytext.slice(-1)&&this.begin("mu"),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu")),b.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 4:return b.yytext=b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;case 12:this.popState(),this.begin("com");break;case 13:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 19:break;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),31;case 23:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;case 28:return 36;case 29:return b.yytext=b.yytext.substr(1,b.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},a.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();a.Parser=f,a.parse=function(b){return b.constructor===a.AST.ProgramNode?b:(a.Parser.yy=a.AST,a.Parser.parse(b))},a.AST={},a.AST.ProgramNode=function(b,c){this.type="program",this.statements=b,c&&(this.inverse=new a.AST.ProgramNode(c))},a.AST.MustacheNode=function(a,b,c){this.type="mustache",this.escaped=!c,this.hash=b;var d=this.id=a[0],e=this.params=a.slice(1),f=this.eligibleHelper=d.isSimple;this.isHelper=f&&(e.length||b)},a.AST.PartialNode=function(a,b){this.type="partial",this.partialName=a,this.context=b},a.AST.BlockNode=function(b,c,d,e){var f=function(b,c){if(b.original!==c.original)throw new a.Exception(b.original+" doesn't match "+c.original)};f(b.id,e),this.type="block",this.mustache=b,this.program=c,this.inverse=d,this.inverse&&!this.program&&(this.isInverse=!0)},a.AST.ContentNode=function(a){this.type="content",this.string=a},a.AST.HashNode=function(a){this.type="hash",this.pairs=a},a.AST.IdNode=function(b){this.type="ID";for(var c="",d=[],e=0,f=0,g=b.length;g>f;f++){var h=b[f].part;if(c+=(b[f].separator||"")+h,".."===h||"."===h||"this"===h){if(d.length>0)throw new a.Exception("Invalid path: "+c);".."===h?e++:this.isScoped=!0}else d.push(h)}this.original=c,this.parts=d,this.string=d.join("."),this.depth=e,this.isSimple=1===b.length&&!this.isScoped&&0===e,this.stringModeValue=this.string},a.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME",this.name=a.original},a.AST.DataNode=function(a){this.type="DATA",this.id=a},a.AST.StringNode=function(a){this.type="STRING",this.original=this.string=this.stringModeValue=a},a.AST.IntegerNode=function(a){this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},a.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},a.AST.CommentNode=function(a){this.type="comment",this.comment=a};var g=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(){for(var a=Error.prototype.constructor.apply(this,arguments),b=0;b<g.length;b++)this[g[b]]=a[g[b]]},a.Exception.prototype=new Error,a.SafeString=function(a){this.string=a},a.SafeString.prototype.toString=function(){return this.string.toString()};var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/,k=function(a){return h[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},escapeExpression:function(b){return b instanceof a.SafeString?b.toString():null==b||b===!1?"":(b=b.toString(),j.test(b)?b.replace(i,k):b)},isEmpty:function(a){return a||0===a?"[object Array]"===c.call(a)&&0===a.length?!0:!1:!0}};var l=a.Compiler=function(){},m=a.JavaScriptCompiler=function(){};l.prototype={compiler:l,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b,c=a.statements;this.opcodes=[];for(var d=0,e=c.length;e>d;d++)b=c[d],this[b.type](b);return this.isSimple=1===e,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,d):"simple"===e?(this.simpleMustache(b),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a),this.opcode(a.escaped&&!b.noEscape?"appendEscaped":"append")},ambiguousMustache:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleMustache:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+e);this.opcode("invokeHelper",d.length,e)}},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(b){if(this.options.data=!0,b.id.isScoped||b.id.depth)throw new a.Exception("Scoped data references are not supported: "+b.original);this.opcode("lookupData");for(var c=b.id.parts,d=0,e=c.length;e>d;d++)this.opcode("lookup",c[d])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw new Error("EWOT");0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this[b.type](b)},setupMustacheParams:function(a){var b=a.params;return this.pushParams(b),a.hash?this.hash(a.hash):this.opcode("emptyHash"),b},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}};var n=function(a){this.value=a};m.prototype={nameLookup:function(a,b){return/^[0-9]+$/.test(b)?a+"["+b+"]":m.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,d,e){this.environment=b,this.options=c||{},a.log(a.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!d,this.context=d||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(b,c);var f,g=b.opcodes;for(this.i=0,r=g.length;this.i<r;this.i++)f=g[this.i],"DECLARE"===f.opcode?this[f.name]=f.value:this[f.opcode].apply(this,f.args);return this.createFunctionContext(e)},nextOpcode:function(){var a=this.environment.opcodes;return a[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}a.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);if(c.length>0&&(this.source[1]=this.source[1]+", "+c.join(", ")),!this.isChild)for(var d in this.context.aliases)this.context.aliases.hasOwnProperty(d)&&(this.source[1]=this.source[1]+", "+d+"="+this.context.aliases[d]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var e=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],f=0,g=this.environment.depths.list.length;g>f;f++)e.push("depth"+this.environment.depths.list[f]);var h=this.mergeSource();if(!this.isChild){var i=a.COMPILER_REVISION,j=a.REVISION_CHANGES[i];h="this.compilerInfo = ["+i+",'"+j+"'];\n"+h}if(b)return e.push(h),Function.apply(this,e);var k="function "+(this.name||"")+"("+e.join(",")+") {\n  "+h+"}";return a.log(a.logger.DEBUG,k+"\n\n"),k},mergeSource:function(){for(var a,c="",d=0,e=this.source.length;e>d;d++){var f=this.source[d];f.appendToBuffer?a=a?a+"\n    + "+f.content:f.content:(a&&(c+="buffer += "+a+";\n  ",a=b),c+=f+"\n  ")}return c},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),a[a.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"string"==typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=b,this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes","{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){this.pushStackLiteral(null!=a?this.programExpression(a):null)},invokeHelper:function(a,b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b,!0),d=this.nameLookup("depth"+this.lastContext,b,"context");this.push(c.name+" || "+d),this.replaceStack(function(a){return a+" ? "+a+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();this.source.push("if ("+f+" = "+d+") { "+f+" = "+f+".call("+c.callParams+"); }"),this.source.push("else { "+f+" = "+e+"; "+f+" = typeof "+f+" === functionType ? "+f+".apply(depth0) : "+f+"; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:m,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],e.push(1===b?"depth0":"depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new n(a))},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.source.push(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,c="",d=this.isInline();if(d){var e=this.popStack(!0);if(e instanceof n)b=e.value;else{var f=this.stackSlot?this.topStackName():this.incrStack();c="("+this.push(f)+" = "+e+"),",b=this.topStack()}}else b=this.topStack();var g=a.call(this,b);return d?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+c+g+")")):(/^stack/.test(b)||(b=this.nextStack()),this.source.push(b+" = ("+c+g+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var d=a[b];d instanceof n?this.compileStack.push(d):this.pushStack(d)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();return!a&&c instanceof n?c.value:(b||this.stackSlot--,c)},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,c=b[b.length-1];return!a&&c instanceof n?c.value:c},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];this.setupParams(a,d,c);var e=this.nameLookup("helpers",b,"helper");return{params:d,name:e,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupParams:function(a,b,c){var d,e,f,g=[],h=[],i=[];g.push("hash:"+this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(this.context.aliases.self="this",f="self.noop"),e||(this.context.aliases.self="this",e="self.noop"),g.push("inverse:"+e),g.push("fn:"+f));for(var j=0;a>j;j++)d=this.popStack(),b.push(d),this.options.stringParams&&(i.push(this.popStack()),h.push(this.popStack()));return this.options.stringParams&&(g.push("contexts:["+h.join(",")+"]"),g.push("types:["+i.join(",")+"]"),g.push("hashContexts:hashContexts"),g.push("hashTypes:hashTypes")),this.options.data&&g.push("data:data"),g="{"+g.join(",")+"}",c?(this.register("options",g),b.push("options")):b.push(g),b.join(", ")}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),p=m.RESERVED_WORDS={},q=0,r=o.length;r>q;q++)p[o[q]]=!0;m.isValidJavaScriptVariableName=function(a){return!m.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1},a.precompile=function(b,c){if(null==b||"string"!=typeof b&&b.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+b);c=c||{},"data"in c||(c.data=!0);var d=a.parse(b),e=(new l).compile(d,c);return(new m).compile(e,c)},a.compile=function(c,d){function e(){var e=a.parse(c),f=(new l).compile(e,d),g=(new m).compile(f,d,b,!0);return a.template(g)}if(null==c||"string"!=typeof c&&c.constructor!==a.AST.ProgramNode)throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);d=d||{},"data"in d||(d.data=!0);var f;return function(a,b){return f||(f=e()),f.call(this,a,b)}},a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];return d?e=a.VM.program(b,c,d):e||(e=this.programs[b]=a.VM.program(b,c)),e},merge:function(b,c){var d=b||c;return b&&c&&(d={},a.Utils.extend(d,c),a.Utils.extend(d,b)),d},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data),g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(i>h){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+g[1]+")."}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e},program:function(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b)throw new a.Exception("The partial "+d+" could not be found");if(c instanceof Function)return c(e,i);if(a.compile)return g[d]=a.compile(c,{data:h!==b}),g[d](e,i);throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}},a.template=a.VM.template}(a),define("handlebars",["jquery"],function(a){return function(){var b;return b||a.Handlebars}}(this)),define("handlebars.helpers",["jquery","underscore","string","handlebars","underscore.mixins"],function(b,c,d){a.registerHelper("eachO",function(a,b){var c="";for(var d in a)c+=b.fn(a[d]);return c}),a.registerHelper("isURL",function(a,b){if("string"==typeof a){var e=decodeURIComponent(a);if(c.isUri(e)&&(d(e).startsWith("http")||d(e).startsWith("https")))return b.fn(this)}return b.inverse?b.inverse(this):void 0}),a.registerHelper("isObject",function(a,b){return c.isObject(a)?b.fn(this):b.inverse?b.inverse(this):void 0}),a.registerHelper("islongtext",function(a,b){if("string"==typeof a){var c=new String(a),d=b.hash.size;if(c.length>=d)return b.fn(this)}return b.inverse?b.inverse(this):void 0}),a.registerHelper("truncateStr",function(a,b){var c=a;if("string"==typeof a){c=new String(a);var e=b.hash.size,f=new Boolean(b.hash.decode);f&&(c=decodeURIComponent(c)),c=d(c).truncate(e).s}return c}),a.registerHelper("rdfid",function(a){return c.compactUri(a)}),a.registerHelper("encodeURIComp",function(a){return encodeURIComponent(a)}),a.registerHelper("localname",function(a){return c.localName(decodeURIComponent(a))}),a.registerHelper("decodeURIComp",function(a){return decodeURIComponent(a)}),a.registerHelper("linkFormat",function(a){return encodeURIComponent(decodeURIComponent(a))}),a.registerHelper("values",function(a,b){var c='<div class="valuesbox" style="display: block">',d="";if(a instanceof Array){var e=b.hash.pagesize,f=b.hash.name,g=b.hash.align?b.hash.align:"",h=b.hash.pagertype?b.hash.pagertype:"",i=Math.ceil(a.length/e),j=0;if(i>1){d+='<div id="pagination-'+f+'" class="pagination '+g+' btn-group">',d+='<button class="btn btn-pager" target="#prev"><i class="icon-arrow-left"></i></button>';for(var k=1;i>=k;k++){if(1===k){d+="numeric"==h?'<button id="li_'+f+"_"+k+'" class="btn btn-pager page'+k+' active" target="'+k+'"></button>':'<button id="li_'+f+"_"+k+'" class="btn btn-pager page'+k+' active" style="display: none;" target="'+k+'"></button>',c=c+'<div id="'+f+"-"+k+'" class="page-container" style="display: block;">';for(var l=0;e>l&&j<a.length;l++,j++)c=c+'<div class="v-page-elem">'+b.fn(a[j])+"</div>"}else{d+="numeric"==h?'<button id="li_'+f+"_"+k+'" class="btn btn-pager page'+k+'" target="'+k+'"></button>':'<button id="li_'+f+"_"+k+'" class="btn btn-pager page'+k+'" style="display: none;" target="'+k+'"></button>',c=c+'<div id="'+f+"-"+k+'" class="page-container" style="display: none;">';for(var l=0;e>l&&j<a.length;l++,j++)c=c+'<div class="h-page-elem">'+b.fn(a[j])+"</div>"}c+="</div>"}d+='<button class="btn btn-pager" target="#next"><i class="icon-arrow-right"></i></button>',d+="</div>",c+=d}else for(var l=0;e>l&&j<a.length;l++,j++)c=c+'<div class="v-page-elem">'+b.fn(a[j])+"</div>"}else c+='<div class="v-page-elem">',c+=b.fn(a),c+="</div>";return c+="</div>"}),a.registerHelper("ieach",function(a,b){if(a instanceof Array){var c="";if(a.length>0)for(var d=0;d<a.length;d++)c+=b.fn(a[d]);return c}return b.fn(a)}),a.registerHelper("generateRows",function(b,c){for(var d="",e=0;e<b.length;e++){d+="<tr>\n";for(var f=0;f<c.length;f++)if(b[e][c[f]]){var g=b[e][c[f]].value;d+="<td>",d+="uri"==b[e][c[f]].type?"<a href='"+g+"' class='uriDesc'>"+g+"</a>":g,d+="</td>"}else d+="<td></td>";d+="</tr>\n"}return new a.SafeString(d)}),a.registerHelper("ifequal",function(a,b,c){return a===b?c.fn(this):c.inverse?c.inverse(this):void 0
}),a.registerHelper("ifnotequal",function(a,b,c){return a!==b?c.fn(this):c.inverse?c.inverse(this):void 0}),a.registerHelper("isArray",function(a,c){return b.isArray(a)?c.fn(this):c.inverse?c.inverse(this):void 0}),a.registerHelper("prtable",function(a,b){var c="",d="<thead><tr><th>Result</th><th>Type(s)</th><th>Matches</th></tr></thead>";if(a instanceof Array){var e=b.hash.name,f=b.hash["class"];console.log("class:",f);var g=0;if(a.length>0&&e){c=c+'<table id="'+e+'" class="page-container table table-striped '+(f?f:"")+'" style="display: table;">',c+=d,c+="<tbody>";for(var h=0;g<a.length;h++,g++)c=c+'<tr class="page-elem">'+b.fn(a[g])+"</tr>";c+="</tbody>",c+="</table>"}else c+="<h2>No search results.</h2>"}return c})}),define("handlebars.partials",["jquery","handlebars"],function(b){a.getPartialTemplate=function(c){return(void 0===a.partials||void 0===a.partials[c])&&b.ajax({url:"partials/"+c+".html",success:function(b){void 0===a.partials&&(a.partials={}),a.partials[c]=a.compile(b)},async:!1}),a.partials[c]},a.registerPartial("homeContent",a.getPartialTemplate("homeContentDefault")),a.registerPartial("footer",a.getPartialTemplate("footerContent"))}),define("layoutconfig",["jquery","backbone","handlebars","backbone.layoutmanager","handlebars.helpers","handlebars.partials"],function(b,c){c.Layout.configure({prefix:"templates/",manage:!1,fetch:function(a){var c=this.async();b.ajax(a+".html",{global:!1,cache:!0,dataType:"text"}).done(function(a){c(a)})},render:function(b,c){return a.compile(b)(c)}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),define("bootstrap",function(){}),define("egad.view",["underscore","egad.config","egad.event","layoutconfig","underscore.mixins","bootstrap","keymaster"],function(a,b,c){var d={},e={"ctrl+/":{handler:c.ShortcutsManager.showHelp,description:"Show this help"}};return a.each(e,function(a,b){c.ShortcutsManager.registerShortcut(c.EventManager.defaultModule,b,a.description,a.handler)}),d.ShortcutsView=Backbone.Layout.extend({constructor:function(a){var b=a||{};Backbone.Layout.call(this,b),this._initShortcuts(b)},shortcuts:{},_initShortcuts:function(){var b=this,d=c.EventManager.getCurrentModule(),e=function(a){var c="function"==typeof a?a:b[a];if("function"!=typeof c)throw new Error("Function '"+a+"' doesn't exist!");return c};a.each(b.shortcuts,function(a,b){"ctrl+/"===b?console.warn("shortcut '",b,"' is already defined for help."):c.ShortcutsManager.registerShortcut(d,b,a.description,e(a.handler))})}}),d}),define("egad",["underscore","mediator-js","egad.ajax","egad.model","egad.config","egad.vocabulary","egad.event","egad.view"],function(a,b,c,d,e,f,g,h){var i={},j=["id","name","routes"],k=i.Module=function(b){if(this.id=a.uniqueId("egadModule-"),b=b||{},a.extend(this,a.pick(b,j)),this.initialize.call(this,arguments),i.MainModuleRegistry.register(this),this.routes){var c=this;i.Mediator.subscribe("router:go",function(b){var d=b.join("/");if(c.routes instanceof Object&&"function"!=typeof c.routes&&!(c.routes instanceof Array)){var e=!1;a.each(c.routes,function(b,f){var h=f;a.isRegExp(h)||(h=c._routeToRegExp(h));var i=c._extractParameters(h,d);
i&&!e&&(e=!0,g.EventManager.currentModule(c.name),c[b].apply(c,i))})}else console.log("routes property is not well defined, must be a map of <route, callback> elements")})}},l=/\((.*?)\)/g,m=/(\(\?)?:\w+/g,n=/\*\w+/g,o=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(k.prototype,{initialize:function(){},routeMatch:function(){},getId:function(){return this.id},getName:function(){return this.name?this.name:this.id},setRoutes:function(a){this.routes=a},getRoutes:function(){return this.routes},_routeToRegExp:function(a){return a=a.replace(o,"\\$&").replace(l,"(?:$1)?").replace(m,function(a,b){return b?a:"([^/]+)"}).replace(n,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(b,c){var d=b.exec(c);if(!d)return null;var e=d.slice(1);return a.map(e,function(a){return a?decodeURIComponent(a):null})}});var p=["modules"],q=i.ModuleRegistry=function(b){this.id=a.uniqueId("egadRegistry-"),b=b||{},a.extend(this,a.pick(b,p)),this.modules=this.modules||{}};a.extend(q.prototype,{register:function(a){if(!a)throw new Error("Module to register must be defined!");console.log("registering module: "+a.getName()),this.modules[a.getId()]=a},unregister:function(b){b&&(this.modules=a.omit(this.modules,b))}}),i.Mediator=b,i.MainModuleRegistry=new q;var r=function(b,c){var d,e=this;d=b&&a.has(b,"constructor")?b.constructor:function(){return e.apply(this,arguments)},a.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,b&&a.extend(d.prototype,b),d.__super__=e.prototype,d};return k.extend=q.extend=r,{api:i,ajax:c,config:e.config,model:d,vocabulary:f,event:g,view:h}}),function(a){"function"==typeof module?module.exports=a(this.jQuery||require("jquery")):this.NProgress=a(this.jQuery)}(function(a){function b(a,b,c){return b>a?b:a>c?c:a}function c(a){return 100*(-1+a)}function d(a,b,d){var e;return e="translate3d"===f.positionUsing?{transform:"translate3d("+c(a)+"%,0,0)"}:"translate"===f.positionUsing?{transform:"translate("+c(a)+"%,0)"}:{"margin-left":c(a)+"%"},e.transition="all "+b+"ms "+d,e}var e={};e.version="0.1.2";var f=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};return e.configure=function(b){return a.extend(f,b),this},e.status=null,e.set=function(a){var c=e.isStarted();a=b(a,f.minimum,1),e.status=1===a?null:a;var g=e.render(!c),h=g.find('[role="bar"]'),i=f.speed,j=f.easing;return g[0].offsetWidth,g.queue(function(b){""===f.positionUsing&&(f.positionUsing=e.getPositioningCSS()),h.css(d(a,i,j)),1===a?(g.css({transition:"none",opacity:1}),g[0].offsetWidth,setTimeout(function(){g.css({transition:"all "+i+"ms linear",opacity:0}),setTimeout(function(){e.remove(),b()},i)},i)):setTimeout(b,i)}),this},e.isStarted=function(){return"number"==typeof e.status},e.start=function(){e.status||e.set(0);var a=function(){setTimeout(function(){e.status&&(e.trickle(),a())},f.trickleSpeed)};return f.trickle&&a(),this},e.done=function(a){return a||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(a){var c=e.status;return c?("number"!=typeof a&&(a=(1-c)*b(Math.random()*c,.1,.95)),c=b(c+a,0,.994),e.set(c)):e.start()},e.trickle=function(){return e.inc(Math.random()*f.trickleRate)},e.render=function(b){if(e.isRendered())return a("#nprogress");a("html").addClass("nprogress-busy");var d=a("<div id='nprogress'>").html(f.template),g=b?"-100":c(e.status||0);return d.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+g+"%,0,0)"}),f.showSpinner||d.find('[role="spinner"]').remove(),d.appendTo(document.body),d},e.remove=function(){a("html").removeClass("nprogress-busy"),a("#nprogress").remove()},e.isRendered=function(){return a("#nprogress").length>0},e.getPositioningCSS=function(){var a=document.body.style,b="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return b+"Perspective"in a?"translate3d":b+"Transform"in a?"translate":"margin"},e}),define("nprogress",["jquery"],function(a){return function(){var b;return b||a.NProgress}}(this)),define("alerts/alerts",["jquery","underscore","egad","backbone","bootstrap"],function(a,b,c,d){var e={Views:{}};return e.Views.Alert=d.Layout.extend({template:"alerts/alert",tagName:"div",className:"alert",afterRender:function(){this.$el.find(".alert:first").alert(),this.options.isBlock&&this.$el.addClass("alert-block")},serialize:function(){return this.model?this.model.toJSON():{title:"Alert!",message:"There was an alert generated by the system."}}}),e.Views.WarningAlert=e.Views.Alert.extend({className:"alert alert-warning"}),e.Views.ErrorAlert=e.Views.Alert.extend({className:"alert alert-danger"}),e.Views.InfoAlert=e.Views.Alert.extend({className:"alert alert-info"}),e.Views.SuccessAlert=e.Views.Alert.extend({className:"alert alert-success"}),e}),define("alerts/main",["jquery","underscore","backbone","alerts/alerts","egad","bootstrap"],function(a,b,c,d,e){var f=e.api.Module.extend({name:"alerts",initialize:function(){b.bindAll(this);var f=function(b){var c=b?"."===b.charAt(0)?b:"."+b:".alert",d=a("#page").find(c);d&&d.remove()},g=function(a){a||(a={});var d=b.defaults({title:"Alert!",message:'<span class="label label-important">No message provided.</span>',isBlock:!1});return b.defaults(a,d),new c.Model(a)},h=function(b){f(),a("#page").prepend(b.el),b.render().done(function(){e.api.Mediator.publish("module:alerts:render")}),window.scrollTo(0,0)};e.event.CommManager.addListener("alerts","showWarningAlert","Renders a warning alert in the UI",function(a){var b=g(a),c=new d.Views.WarningAlert({model:g(a),isBlock:b.get("isBlock")});h(c)}),e.event.CommManager.addListener("alerts","showErrorAlert","Renders an error alert in the UI",function(a){var b=g(a),c=new d.Views.ErrorAlert({model:b,isBlock:b.get("isBlock")});h(c)}),e.event.CommManager.addListener("alerts","showInfoAlert","Renders an info alert in the UI",function(a){var b=g(a),c=new d.Views.InfoAlert({model:b,isBlock:b.get("isBlock")});h(c)}),e.event.CommManager.addListener("alerts","showSuccessAlert","Renders a success alert in the UI",function(a){var b=new c.Model(a),e=new d.Views.SuccessAlert({model:b,isBlock:b.get("isBlock")});h(e)}),e.event.CommManager.addListener("alerts","removeAlerts","Removes all alerts from the UI",function(a){a&&a.type?f(a.type):f(),e.api.Mediator.publish("module:alerts:remove")})}});return new f}),define("alerts",["alerts/main"],function(a){return a}),define("home/homepage-view",["jquery","underscore","egad","backbone","bootstrap","handlebars.helpers","handlebars.partials"],function(a,b,c,d){var e=d.Layout.extend({template:"home/homePage",tagName:"div",id:"homePage",className:"pageContent home",serialize:function(){return{}}});return e}),define("home/main",["jquery","underscore","egad","home/homepage-view"],function(a,b,c,d){var e=c.api.Module.extend({name:"home",routes:{"!/home":"goHome"},goHome:function(){console.log("Route match on HomepageView!");if(c.config.get("modules").home&&c.config.get("modules").home.module){var b=c.config.get("modules").home.module;c.api.Mediator.publish("router:navigate:redirect","#!/"+b,{trigger:!0})}else if(c.config.get("modules").home&&c.config.get("modules").home.link){var e=c.config.get("modules").home.link;c.api.Mediator.publish("router:navigate:redirect",e,{trigger:!0})}else{var f=new d;a(".pageContainer").html(f.$el),f.render().done(function(){c.api.Mediator.publish("module:home:route:done")})}}});return new e}),define("home",["home/main"],function(a){return a}),function(a){"use strict";var b=this;"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?exports=module.exports=a(b):"function"==typeof define&&define.amd?define("stardog",[],function(){return b.Stardog=a(b),b.Stardog}):b.Stardog=a(b)}.call(this,function(a){"use strict";var b={};b.VERSION="0.1.4";var c="undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports;if(c){var d=a.rest;d||"undefined"==typeof require||(d=require("restler"));var e=a.qs;e||"undefined"==typeof require||(e=require("querystring"))}var f=a._;f||"undefined"==typeof require||(f=require("lodash"));var g=b.Connection=function(){this.endpoint="http://localhost:5820/nodeDB/",this.reasoning=void 0};return g.prototype.setEndpoint=function(a){for(var b=a.length-1;b>=0&&"/"==a[b];b-=1);this.endpoint=a.substring(0,b+1)+"/"},g.prototype.getEndpoint=function(){return this.endpoint},g.prototype.setCredentials=function(a,b){this.credentials={},this.credentials.username=a,this.credentials.password=b},g.prototype.getCredentials=function(){return this.credentials},g.prototype.setReasoning=function(a){this.reasoning=a},g.prototype.getReasoning=function(){return this.reasoning},g.prototype._getSdConnectionString=function(a){return"reasoning="+a},c?g.prototype._httpRequest=function(a,b){function c(a,c){var d;if(a instanceof Error)console.log("Error found!"),console.log(JSON.stringify(a)),b(a,c);else{try{d=a?JSON.parse(a):{}}catch(e){d=a}b(d,c)}}var e,f,g=a.httpMethod,h=this.endpoint+a.resource,i=a.params||{},j=a.msgBody,k=a.acceptHeader,l=a.isJsonBody,m=a.contentType,n=a.multipart,o={};o.Accept=k||"text/plain",!n&&j&&(o["Content-Type"]=l?"application/json":m),e={method:g,query:i,username:this.credentials.username,password:this.credentials.password,headers:o,data:l?JSON.stringify(j):j,multipart:n||!1},n&&(f={root:j},e.data=f),d.request(h,e).on("complete",c)}:(g.prototype._base64Encode="function"==typeof btoa?function(a){return btoa(a)}:null,g.prototype._httpRequest=function(a,b){var c,d,e,h,i=a.httpMethod,j=a.acceptHeader,k=this.endpoint+a.resource,l=a.params||{},m=a.contentType,n=a.msgBody||null,o=a.isJsonBody,p=a.multipart,q={};if(q.Accept=j||"application/sparql-results+json",this.credentials){if(c=this.credentials.username,d=this.credentials.password,!this._base64Encode)throw new Error("Your browser does not support btoa() natively.\n Please provide a javascript implementation for Connection.prototype._base64Encode");h=this._base64Encode(c.concat(":",d)),q.Authorization="Basic ".concat(h)}k=f.isEmpty(l)?k:k+"?"+$.param(l),e={type:i,url:k,processData:!1,dataType:j.match(/json/gi)?"json":"text",data:o?JSON.stringify(n):n,headers:q},o?q["Content-Type"]="application/json":m?q["Content-Type"]=m:p&&(e.contentType=!1),$.ajax(e).done(function(a,c,d){var e;e=a&&(a.hasOwnProperty("@id")||a.hasOwnProperty("@context"))?g._convertToLinkedJson(a):a,b(e,{responseText:d.responseText,statusCode:d.status,statusText:d.statusText})}).fail(function(a,c,d){b(a.responseText,{responseText:a.responseText,statusCode:a.status,statusText:a.statusText},d)})}),g.prototype.getProperty=function(a,b){var c=a.uri,d={database:a.database,query:"select ?val where { "+a.uri+" "+a.property+" ?val }",params:a.params};this.query(d,function(a){a.results&&a.results.bindings.length>0&&(c=a.results.bindings[0].val.value),b(c)})},g.prototype.getDB=function(a,b){var c={resource:a.database,acceptHeader:"*/*",httpMethod:"GET",params:a.params||""};this._httpRequest(c,b)},g.prototype.getDBSize=function(a,b){var c={resource:a.database+"/size",httpMethod:"GET",acceptHeader:"*/*",params:a.params||""};this._httpRequest(c,b)},g.prototype.query=function(a,b){var d={acceptHeader:a.mimetype||"application/sparql-results+json",resource:a.database+"/query",httpMethod:"POST",params:{}},e=a.reasoning||this.reasoning,g=f.extend({query:a.query},a.params);if(a.baseURI&&(g.baseURI=a.baseURI),a.limit&&(g.limit=a.limit),a.offset&&(g.offset=a.offset),e&&(d.params.reasoning=e),c)d.msgBody=g;else{var h=f.map(f.pairs(g),function(a){return a[0]+"="+a[1]});d.msgBody=h.join("&")}this._httpRequest(d,b)},g.prototype.queryGraph=function(a,b){var d={acceptHeader:a.mimetype||"application/ld+json",resource:a.database+"/query",httpMethod:"POST",params:{}},e=a.reasoning||this.reasoning,g=f.extend({query:a.query},a.params);if(a.baseURI&&(g.baseURI=a.baseURI),a.limit&&(g.limit=a.limit),a.offset&&(g.offset=a.offset),e&&(d.params.reasoning=e),c)d.msgBody=g;else{var h=f.map(f.pairs(g),function(a){return a[0]+"="+a[1]});d.msgBody=h.join("&")}this._httpRequest(d,b)},g.prototype.queryExplain=function(a,b){var c={resource:a.database+"/explain",httpMethod:"GET",acceptHeader:"text/plain",params:f.extend({query:a.query},a.params)};a.baseURI&&(c.params.baseURI=a.baseURI),this._httpRequest(c,b)},g.prototype.begin=function(a,b){var c={httpMethod:"POST",resource:a.database+"/transaction/begin",acceptHeader:"text/plain",params:a.params};this._httpRequest(c,b)},g.prototype.commit=function(a,b){var c={httpMethod:"POST",resource:a.database+"/transaction/commit/"+a.txId,acceptHeader:"text/plain",params:a.params};this._httpRequest(c,b)},g.prototype.rollback=function(a,b){var c={httpMethod:"POST",resource:a.database+"/transaction/rollback/"+a.txId,acceptHeader:"text/plain",params:a.params};this._httpRequest(c,b)},g.prototype.queryInTransaction=function(a,b){var c={acceptHeader:a.mimetype||"application/sparql-results+json",resource:a.database+"/"+a.txId+"/query",httpMethod:"GET",params:f.extend({query:a.query},a.params)};a.baseURI&&(c.params.baseURI=a.baseURI),a.limit&&(c.params.limit=a.limit),a.offset&&(c.params.offset=a.offset),this._httpRequest(c,b)},g.prototype.addInTransaction=function(a,b){var c={httpMethod:"POST",resource:a.database+"/"+a.txId+"/add",acceptHeader:"*/*",params:a.params||{},msgBody:a.body,contentType:a.contentType,isJsonBody:!1,multipart:null};a.graphUri&&(c.params["graph-uri"]=a.graphUri),this._httpRequest(c,b)},g.prototype.removeInTransaction=function(a,b){var c={httpMethod:"POST",resource:a.database+"/"+a.txId+"/remove",acceptHeader:"text/plain",params:a.params||{},msgBody:a.body,contentType:a.contentType,isJsonBody:!1,multipart:null};a.graphUri&&(c.params["graph-uri"]=a.graphUri),this._httpRequest(c,b)},g.prototype.clearDB=function(a,b){var c={httpMethod:"POST",resource:a.database+"/"+a.txId+"/clear",acceptHeader:"text/plain",params:a.params||{}};a.graphUri&&(c.params["graph-uri"]=a.graphUri),this._httpRequest(c,b)},g.prototype.reasoningExplain=function(a,b){var c={httpMethod:"POST",resource:a.database+"/reasoning/"+(a.txId&&null!==a.txId?"/"+a.txId:""),acceptHeader:"application/x-turtle",params:a.params||null,msgBody:a.axioms,isJsonBody:!1,contentType:a.contentType||"text/plain"};this._httpRequest(c,b)},g.prototype.isConsistent=function(a,b){var c={httpMethod:"GET",resource:a.database+"/reasoning/consistency",acceptHeader:"text/boolean",params:a.params||{}};a.graphUri&&(c.params["graph-uri"]=a.graphUri),this._httpRequest(c,b)},g.prototype.getICV=function(a,b){var c={httpMethod:"GET",resource:a.database+"/icv",acceptHeader:a.acceptMime||"text/plain",params:a.params||null,contentType:a.contentType||"text/plain"};this._httpRequest(c,b)},g.prototype.setICV=function(a,b){var c={httpMethod:"POST",resource:a.database+"/icv/add",acceptHeader:"text/boolean",params:a.params||null,contentType:a.contentType||"text/plain",msgBody:a.icvAxioms,isJsonBody:!1};this._httpRequest(c,b)},g.prototype.removeICV=function(a,b){var c={httpMethod:"POST",resource:a.database+"/icv/remove",acceptHeader:"text/boolean",params:a.params||null,contentType:a.contentType||"text/plain",msgBody:a.icvAxioms,isJsonBody:!1};this._httpRequest(c,b)},g.prototype.clearICV=function(a,b){var c={httpMethod:"POST",resource:a.database+"/icv/clear",acceptHeader:"text/boolean",params:a.params||null};this._httpRequest(c,b)},g.prototype.fromICVtoSPARQL=function(a,b){var c={httpMethod:"POST",resource:a.database+"/icv/convert",acceptHeader:"text/plain",params:a.params||{},msgBody:a.icvAxiom,isJsonBody:!1,contentType:a.contentType||"text/plain"};a.graphUri&&(c.params["graph-uri"]=a.graphUri),this._httpRequest(c,b)},g.prototype.getNamespaces=function(a,b){if(!a||!a.database)throw new Error("Option `database` is required.");this.getDBOptions({database:a.database,optionsObj:{"database.namespaces":""}},function(a,c){var d=a["database.namespaces"].split("")||{},e={};f.each(d,function(a){var b=a.split("=");e[b[0]]=b[1]}),b(e,c)})},g.prototype.getPrefixes=function(a,b){try{this.getNamespaces(a,b)}catch(c){throw new Error("Option `database` is required.")}},g.prototype.queryList=function(a,b){var c={httpMethod:"GET",resource:"admin/queries",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.queryGet=function(a,b){var c={httpMethod:"GET",resource:"admin/queries/"+a.queryId,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.queryKill=function(a,b){var c={httpMethod:"DELETE",resource:"admin/queries/"+a.queryId,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.listDBs=function(a,b){var c={httpMethod:"GET",resource:"admin/databases",acceptHeader:"application/json",params:a&&"function"!=typeof a?a.params:""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.copyDB=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.dbsource+"/copy",acceptHeader:"application/json",params:f.extend({to:a.dbtarget},a.params)};this._httpRequest(c,b)},g.prototype.createDB=function(a,b){var d,e,f,g;d={dbname:a.database,options:a.options,files:a.files},e=JSON.stringify(d),c?f=e:(f=new window.FormData,f.append("root",e)),g={httpMethod:"POST",resource:"admin/databases",acceptHeader:"*/*",params:a.params||"",isJsonBody:!1,multipart:!0,msgBody:f,files:a.files},this._httpRequest(g,b)},g.prototype.dropDB=function(a,b){var c={httpMethod:"DELETE",resource:"admin/databases/"+a.database,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.migrateDB=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.database+"/migrate",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.optimizeDB=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.database+"/optimize",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.onlineDB=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.database+"/online",acceptHeader:"application/json",params:f.extend({strategy:a.strategyOp},a.params)};this._httpRequest(c,b)},g.prototype.offlineDB=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.database+"/offline",acceptHeader:"application/json",params:f.extend({strategy:a.strategyOp},a.params)};a.timeoutMS&&(c.msgBody={timeout:a.timeout},c.isJsonBody=!0),this._httpRequest(c,b)},g.prototype.setDBOptions=function(a,b){var c={httpMethod:"POST",resource:"admin/databases/"+a.database+"/options",acceptHeader:"application/json",params:a.params,msgBody:a.optionsObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.getDBOptions=function(a,b){var c={httpMethod:"PUT",resource:"admin/databases/"+a.database+"/options",acceptHeader:"application/json",params:a.params||"",msgBody:a.optionsObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.createUser=function(a,b){var c={httpMethod:"POST",resource:"admin/users",acceptHeader:"application/json",msgBody:{username:a.username,password:a.password.split("")},isJsonBody:!0,params:a.params||""};a.superuser&&(c.msgBody.superuser=a.superuser),this._httpRequest(c,b)},g.prototype.changePwd=function(a,b){var c={httpMethod:"PUT",resource:"admin/users/"+a.user+"/pwd",acceptHeader:"application/json",msgBody:{password:a.newPwd},isJsonBody:!0,params:a.params||""};this._httpRequest(c,b)},g.prototype.isUserEnabled=function(a,b){var c={httpMethod:"GET",resource:"admin/users/"+a.user+"/enabled",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.isSuperUser=function(a,b){var c={httpMethod:"GET",resource:"admin/users/"+a.user+"/superuser",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.listUserRoles=function(a,b){var c={httpMethod:"GET",resource:"admin/users/"+a.user+"/roles",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.listUsers=function(a,b){var c={httpMethod:"GET",resource:"admin/users",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.deleteUser=function(a,b){var c={httpMethod:"DELETE",resource:"admin/users/"+a.user,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.userEnabled=function(a,b){var c={httpMethod:"PUT",resource:"admin/users/"+a.user+"/enabled",acceptHeader:"application/json",params:a.params||"",msgBody:{enabled:a.enableFlag},isJsonBody:!0};this._httpRequest(c,b)},g.prototype.setUserRoles=function(a,b){var c={httpMethod:"PUT",resource:"admin/users/"+a.user+"/roles",acceptHeader:"application/json",params:a.params||"",msgBody:{roles:a.roles},isJsonBody:!0};this._httpRequest(c,b)},g.prototype.createRole=function(a,b){var c={httpMethod:"POST",resource:"admin/roles",acceptHeader:"application/json",params:a.params||"",msgBody:{rolename:a.rolename},isJsonBody:!0};this._httpRequest(c,b)},g.prototype.listRoles=function(a,b){var c={httpMethod:"GET",resource:"admin/roles",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},g.prototype.listRoleUsers=function(a,b){var c={httpMethod:"GET",resource:"admin/roles/"+a.role+"/users",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.deleteRole=function(a,b){var c={httpMethod:"DELETE",resource:"admin/roles/"+a.role,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.assignPermissionToRole=function(a,b){var c={httpMethod:"PUT",resource:"admin/permissions/role/"+a.role,acceptHeader:"application/json",params:a.params||"",msgBody:a.permissionObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.assignPermissionToUser=function(a,b){var c={httpMethod:"PUT",resource:"admin/permissions/user/"+a.user,acceptHeader:"application/json",params:a.params||"",msgBody:a.permissionObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.deletePermissionFromRole=function(a,b){var c={httpMethod:"POST",resource:"admin/permissions/role/"+a.role+"/delete",acceptHeader:"application/json",params:a.params||"",msgBody:a.permissionObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.deletePermissionFromUser=function(a,b){var c={httpMethod:"POST",resource:"admin/permissions/user/"+a.user+"/delete",acceptHeader:"application/json",params:a.params||"",msgBody:a.permissionObj,isJsonBody:!0};this._httpRequest(c,b)},g.prototype.listRolePermissions=function(a,b){var c={httpMethod:"GET",resource:"admin/permissions/role/"+a.role,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.listUserPermissions=function(a,b){var c={httpMethod:"GET",resource:"admin/permissions/user/"+a.user,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.listUserEffPermissions=function(a,b){var c={httpMethod:"GET",resource:"admin/permissions/effective/user/"+a.user,acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,b)},g.prototype.shutdownServer=function(a,b){var c={httpMethod:"POST",resource:"admin/shutdown",acceptHeader:"application/json",params:a.params||""};this._httpRequest(c,"function"==typeof a?a:b)},b}),define("metadata/metadata",["underscore","jquery","egad","stardog"],function(a,b,c){var d={},e=d.Settings=function(){this.dbname=c.ajax.stardogDB(),this.initialize()};return e.prototype.initialize=function(){function a(a){d.metadataValues=a,sessionStorage.setItem(c.config.stores.EGAD_METADATA,JSON.stringify(a))}var d=this;if(this.metadataValues={},this.optionsObj={"builtin.ontologies":"","database.name":"","database.namespaces":"","database.online":"","database.time.creation":"","database.time.modification":"","icv.active.graphs":"","icv.consistency.automatic":"","icv.enabled":"","icv.reasoning.type":"","index.differential.enable.limit":"","index.differential.merge.limit":"","index.differential.size":"","index.literals.canonical":"","index.named.graphs":"","index.persist":"","index.size":"","index.statistics.update.automatic":"","index.type":"","reasoning.consistency.automatic":"","reasoning.punning.enabled":"","reasoning.schema.graphs":"","search.enabled":"","search.reindex.mode":"","transactions.durable":""},sessionStorage){var e=sessionStorage.getItem(c.config.stores.EGAD_METADATA);if(e)return void(this.metadataValues=JSON.parse(e))}if("undefined"!=typeof Stardog){var f=new Stardog.Connection;f.setEndpoint("/"),b.ajaxSetup({async:!1}),f.getDBOptions({database:d.dbname,optionsObj:d.optionsObj},a),b.ajaxSetup({async:!0})}else b.ajax({async:!1,url:c.ajax.rootUrl()+"/metadata",data:JSON.stringify(d.optionsObj),processData:!1,contentType:"application/json",type:"POST",dataType:"json"}).done(a).fail(function(a,b,c){console.error(c,b)})},e.prototype.get=function(a){return this.metadataValues[a]},e.prototype.getAll=function(){return this.metadataValues},d.IS_SEARCHABLE=function(){var a=new d.Settings;return a.get("search.enabled")}(),d}),define("metadata/main",["metadata/metadata"],function(a){return a}),define("metadata",["metadata/main"],function(a){return a}),define("footer/footer-view",["underscore","egad","backbone","metadata","bootstrap"],function(a,b,c,d){var e=c.Layout.extend({template:"footer/main",tagName:"div",id:"footer-container",className:"container",serialize:function(){console.log("rendering footer");var c=function(){var a=new d.Settings;return a.getAll()}();if(b.config.get("footer"))return{footer:b.config.get("footer").context,metadata:c};var e=a.collect(b.config.get("modules"),function(b){return a.extend(b,{metadata:c})});return{footer:{modules:e,about:{name:{label:b.config.get("name")},egad:{label:"EGAD"}},help:{faq:{label:"FAQ"}}},metadata:c}}});return e}),define("footer/main",["jquery","underscore","egad","footer/footer-view"],function(a,b,c,d){var e=c.api.Module.extend({name:"footer",initialize:function(){var b=new d;a("#footer").html(b.$el),b.render()}});return new e}),define("footer",["footer/main"],function(a){return a}),function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:u+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function c(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function f(a){var b=-1,d=a.length,e=a[0],f=a[d/2|0],g=a[d-1];if(e&&"object"==typeof e&&f&&"object"==typeof f&&g&&"object"==typeof g)return!1;var h=i();h["false"]=h["null"]=h["true"]=h.undefined=!1;var j=i();for(j.array=a,j.cache=h,j.push=c;++b<d;)j.push(a[b]);return j}function g(a){return"\\"+_[a]}function h(){return q.pop()||[]}function i(){return r.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function j(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function l(a){a.length=0,q.length<w&&q.push(a)}function m(a){var b=a.cache;b&&m(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,r.length<w&&r.push(a)}function n(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function o(c){function q(a){return a&&"object"==typeof a&&!ke(a)&&Rd.call(a,"__wrapped__")?a:new r(a)}function r(a,b){this.__chain__=!!b,this.__wrapped__=a}function w(a){function b(){if(d){var a=n(d);Sd.apply(a,arguments)}if(this instanceof b){var f=bb(c.prototype),g=c.apply(f,a||arguments);return Lb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return je(b,a),b}function _(a,b,c,d,e){if(c){var f=c(a);if("undefined"!=typeof f)return f}var g=Lb(a);if(!g)return a;var i=Kd.call(a);if(!W[i]||!he.nodeClass&&j(a))return a;var k=fe[i];switch(i){case O:case P:return new k(+a);case S:case V:return new k(a);case U:return f=k(a.source,C.exec(a)),f.lastIndex=a.lastIndex,f}var m=ke(a);if(b){var o=!d;d||(d=h()),e||(e=h());for(var p=d.length;p--;)if(d[p]==a)return e[p];f=m?k(a.length):{}}else f=m?n(a):ve({},a);return m&&(Rd.call(a,"index")&&(f.index=a.index),Rd.call(a,"input")&&(f.input=a.input)),b?(d.push(a),e.push(f),(m?ue:ye)(a,function(a,g){f[g]=_(a,b,c,d,e)}),o&&(l(d),l(e)),f):f}function bb(a){return Lb(a)?Yd(a):{}}function cb(a,b,c){if("function"!=typeof a)return ed;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(he.funcNames&&(d=!a.name),d=d||!he.funcDecomp,!d)){var e=Pd.call(a);he.funcNames||(d=!D.test(e)),d||(d=H.test(e),je(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pc(a,b)}function db(a){function b(){var a=i?g:this;if(e){var o=n(e);Sd.apply(o,arguments)}if((f||k)&&(o||(o=n(arguments)),f&&Sd.apply(o,f),k&&o.length<h))return d|=16,db([c,l?d:-4&d,o,null,g,h]);if(o||(o=arguments),j&&(c=a[m]),this instanceof b){a=bb(c.prototype);var p=c.apply(a,o);return Lb(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=1&d,j=2&d,k=4&d,l=8&d,m=c;return je(b,a),b}function eb(c,d){var e=-1,g=pb(),h=c?c.length:0,i=h>=v&&g===a,j=[];if(i){var k=f(d);k?(g=b,d=k):i=!1}for(;++e<h;){var l=c[e];g(d,l)<0&&j.push(l)}return i&&m(d),j}function gb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(ke(h)||tb(h))){b||(h=gb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function hb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var i=typeof a,k=typeof b;if(!(a!==a||a&&$[i]||b&&$[k]))return!1;if(null==a||null==b)return a===b;var m=Kd.call(a),n=Kd.call(b);if(m==M&&(m=T),n==M&&(n=T),m!=n)return!1;switch(m){case O:case P:return+a==+b;case S:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case U:case V:return a==Dd(b)}var o=m==N;if(!o){var p=Rd.call(a,"__wrapped__"),q=Rd.call(b,"__wrapped__");if(p||q)return hb(p?a.__wrapped__:a,q?b.__wrapped__:b,c,d,e,f);if(m!=T||!he.nodeClass&&(j(a)||j(b)))return!1;var r=!he.argsObject&&tb(a)?Bd:a.constructor,s=!he.argsObject&&tb(b)?Bd:b.constructor;if(r!=s&&!(Kb(r)&&r instanceof r&&Kb(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=h()),f||(f=h());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),o){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=hb(a[w],x,c,d,e,f)););else if(!(g=hb(a[v],x,c,d,e,f)))break}}else xe(b,function(b,h,i){return Rd.call(i,h)?(v++,g=Rd.call(a,h)&&hb(a[h],b,c,d,e,f)):void 0}),g&&!d&&xe(a,function(a,b,c){return Rd.call(c,b)?g=--v>-1:void 0});return e.pop(),f.pop(),t&&(l(e),l(f)),g}function ib(a,b,c,d,e){(ke(b)?dc:ye)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=ke(b))||ze(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?ke(j)?j:[]:ze(j)?j:{}),d.push(b),e.push(j),l||ib(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function jb(a,b){return a+Od(ee()*(b-a+1))}function kb(c,d,e){var g=-1,i=pb(),j=c?c.length:0,k=[],n=!d&&j>=v&&i===a,o=e||n?h():k;if(n){var p=f(o);i=b,o=p}for(;++g<j;){var q=c[g],r=e?e(q,g,c):q;(d?!g||o[o.length-1]!==r:i(o,r)<0)&&((e||n)&&o.push(r),k.push(q))
}return n?(l(o.array),m(o)):e&&l(o),k}function lb(a){return function(b,c,d){var e={};if(c=q.createCallback(c,d,3),ke(b))for(var f=-1,g=b.length;++f<g;){var h=b[f];a(e,h,c(h,f,b),b)}else ue(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function mb(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=16&b,k=32&b;if(!h&&!Kb(a))throw new Ed;j&&!c.length&&(b&=-17,j=c=!1),k&&!d.length&&(b&=-33,k=d=!1);var l=a&&a.__bindData__;if(l&&l!==!0)return l=n(l),l[2]&&(l[2]=n(l[2])),l[3]&&(l[3]=n(l[3])),!g||1&l[1]||(l[4]=e),!g&&1&l[1]&&(b|=8),!i||4&l[1]||(l[5]=f),j&&Sd.apply(l[2]||(l[2]=[]),c),k&&Wd.apply(l[3]||(l[3]=[]),d),l[1]|=b,mb.apply(null,l);var m=1==b||17===b?w:db;return m([a,b,c,d,e,f])}function nb(){Z.shadowedProps=K,Z.array=Z.bottom=Z.loop=Z.top="",Z.init="iterable",Z.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)Z[c]=a[c];var d=Z.args;Z.firstArg=/^[^,]+/.exec(d)[0];var e=yd("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+ie(Z)+"\n}");return e(cb,Q,Gd,Rd,t,tb,ke,Qb,Z.keys,Hd,$,ge,V,Id,Kd)}function ob(a){return qe[a]}function pb(){var b=(b=q.indexOf)===yc?a:b;return b}function qb(a){return"function"==typeof a&&Ld.test(a)}function rb(a){var b,c;return!a||Kd.call(a)!=T||(b=a.constructor,Kb(b)&&!(b instanceof b))||!he.argsClass&&tb(a)||!he.nodeClass&&j(a)?!1:he.ownLast?(xe(a,function(a,b,d){return c=Rd.call(d,b),!1}),c!==!1):(xe(a,function(a,b){c=b}),"undefined"==typeof c||Rd.call(a,c))}function sb(a){return re[a]}function tb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==M||!1}function ub(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),_(a,b,"function"==typeof c&&cb(c,d,1))}function vb(a,b,c){return _(a,!0,"function"==typeof b&&cb(b,c,1))}function wb(a,b){var c=bb(a);return b?ve(c,b):c}function xb(a,b,c){var d;return b=q.createCallback(b,c,3),ye(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function yb(a,b,c){var d;return b=q.createCallback(b,c,3),Ab(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function zb(a,b,c){var d=[];xe(a,function(a,b){d.push(b,a)});var e=d.length;for(b=cb(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Ab(a,b,c){var d=me(a),e=d.length;for(b=cb(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Bb(a){var b=[];return xe(a,function(a,c){Kb(a)&&b.push(c)}),b.sort()}function Cb(a,b){return a?Rd.call(a,b):!1}function Db(a){for(var b=-1,c=me(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Eb(a){return a===!0||a===!1||a&&"object"==typeof a&&Kd.call(a)==O||!1}function Fb(a){return a&&"object"==typeof a&&Kd.call(a)==P||!1}function Gb(a){return a&&1===a.nodeType||!1}function Hb(a){var b=!0;if(!a)return b;var c=Kd.call(a),d=a.length;return c==N||c==V||(he.argsClass?c==M:tb(a))||c==T&&"number"==typeof d&&Kb(a.splice)?!d:(ye(a,function(){return b=!1}),b)}function Ib(a,b,c,d){return hb(a,b,"function"==typeof c&&cb(c,d,2))}function Jb(a){return $d(a)&&!_d(parseFloat(a))}function Kb(a){return"function"==typeof a}function Lb(a){return!(!a||!$[typeof a])}function Mb(a){return Ob(a)&&a!=+a}function Nb(a){return null===a}function Ob(a){return"number"==typeof a||a&&"object"==typeof a&&Kd.call(a)==S||!1}function Pb(a){return a&&$[typeof a]&&Kd.call(a)==U||!1}function Qb(a){return"string"==typeof a||a&&"object"==typeof a&&Kd.call(a)==V||!1}function Rb(a){return"undefined"==typeof a}function Sb(a,b,c){var d={};return b=q.createCallback(b,c,3),ye(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Tb(a){var b=arguments,c=2;if(!Lb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=cb(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=n(arguments,1,c),f=-1,g=h(),i=h();++f<c;)ib(a,e[f],d,g,i);return l(g),l(i),a}function Ub(a,b,c){var d={};if("function"!=typeof b){var e=[];xe(a,function(a,b){e.push(b)}),e=eb(e,gb(arguments,!0,!1,1));for(var f=-1,g=e.length;++f<g;){var h=e[f];d[h]=a[h]}}else b=q.createCallback(b,c,3),xe(a,function(a,c,e){b(a,c,e)||(d[c]=a)});return d}function Vb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wb(a,b,c){var d={};if("function"!=typeof b)for(var e=-1,f=gb(arguments,!0,!1,1),g=Lb(a)?f.length:0;++e<g;){var h=f[e];h in a&&(d[h]=a[h])}else b=q.createCallback(b,c,3),xe(a,function(a,c,e){b(a,c,e)&&(d[c]=a)});return d}function Xb(a,b,c,d){var e=ke(a);if(null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=bb(g)}return b&&(b=q.createCallback(b,d,4),(e?ue:ye)(a,function(a,d,e){return b(c,a,d,e)})),c}function Yb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;)e[b]=a[c[b]];return e}function Zb(a){var b=arguments,c=-1,d=gb(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=ud(e);for(he.unindexedChars&&Qb(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $b(a,b,c){var d=-1,e=pb(),f=a?a.length:0,g=!1;return c=(0>c?be(0,f+c):c)||0,ke(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qb(a)?a.indexOf(b,c):e(a,b,c))>-1:ue(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function _b(a,b,c){var d=!0;if(b=q.createCallback(b,c,3),ke(a))for(var e=-1,f=a.length;++e<f&&(d=!!b(a[e],e,a)););else ue(a,function(a,c,e){return d=!!b(a,c,e)});return d}function ac(a,b,c){var d=[];if(b=q.createCallback(b,c,3),ke(a))for(var e=-1,f=a.length;++e<f;){var g=a[e];b(g,e,a)&&d.push(g)}else ue(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function bc(a,b,c){if(b=q.createCallback(b,c,3),!ke(a)){var d;return ue(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}for(var e=-1,f=a.length;++e<f;){var g=a[e];if(b(g,e,a))return g}}function cc(a,b,c){var d;return b=q.createCallback(b,c,3),ec(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}function dc(a,b,c){if(b&&"undefined"==typeof c&&ke(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ue(a,b,c);return a}function ec(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:cb(b,c,3),ke(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=me(a);e=f.length}else he.unindexedChars&&Qb(a)&&(d=a.split(""));ue(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fc(a,b){var c=n(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=ud("number"==typeof f?f:0);return dc(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gc(a,b,c){var d=-1,e=a?a.length:0,f=ud("number"==typeof e?e:0);if(b=q.createCallback(b,c,3),ke(a))for(;++d<e;)f[d]=b(a[d],d,a);else ue(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function hc(a,b,c){var e=-1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&ke(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];i>f&&(f=i)}else b=null==b&&Qb(a)?d:q.createCallback(b,c,3),ue(a,function(a,c,d){var g=b(a,c,d);g>e&&(e=g,f=a)});return f}function ic(a,b,c){var e=1/0,f=e;if("function"!=typeof b&&c&&c[b]===a&&(b=null),null==b&&ke(a))for(var g=-1,h=a.length;++g<h;){var i=a[g];f>i&&(f=i)}else b=null==b&&Qb(a)?d:q.createCallback(b,c,3),ue(a,function(a,c,d){var g=b(a,c,d);e>g&&(e=g,f=a)});return f}function jc(a,b,c,d){var e=arguments.length<3;if(b=q.createCallback(b,d,4),ke(a)){var f=-1,g=a.length;for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a)}else ue(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function kc(a,b,c,d){var e=arguments.length<3;return b=q.createCallback(b,d,4),ec(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function lc(a,b,c){return b=q.createCallback(b,c,3),ac(a,function(a,c,d){return!b(a,c,d)})}function mc(a,b,c){if(a&&"number"!=typeof a.length?a=Yb(a):he.unindexedChars&&Qb(a)&&(a=a.split("")),null==b||c)return a?a[jb(0,a.length-1)]:p;var d=nc(a);return d.length=ce(be(0,b),d.length),d}function nc(a){var b=-1,c=a?a.length:0,d=ud("number"==typeof c?c:0);return dc(a,function(a){var c=jb(0,++b);d[b]=d[c],d[c]=a}),d}function oc(a){var b=a?a.length:0;return"number"==typeof b?b:me(a).length}function pc(a,b,c){var d;if(b=q.createCallback(b,c,3),ke(a))for(var e=-1,f=a.length;++e<f&&!(d=b(a[e],e,a)););else ue(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function qc(a,b,c){var d=-1,f=ke(b),g=a?a.length:0,j=ud("number"==typeof g?g:0);for(f||(b=q.createCallback(b,c,3)),dc(a,function(a,c,e){var g=j[++d]=i();f?g.criteria=gc(b,function(b){return a[b]}):(g.criteria=h())[0]=b(a,c,e),g.index=d,g.value=a}),g=j.length,j.sort(e);g--;){var k=j[g];j[g]=k.value,f||l(k.criteria),m(k)}return j}function rc(a){return a&&"number"==typeof a.length?he.unindexedChars&&Qb(a)?a.split(""):n(a):Yb(a)}function sc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tc(a){return eb(a,gb(arguments,!0,!0,1))}function uc(a,b,c){var d=-1,e=a?a.length:0;for(b=q.createCallback(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function vc(a,b,c){var d=a?a.length:0;for(b=q.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function wc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=-1;for(b=q.createCallback(b,c,3);++f<e&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:p;return n(a,0,ce(be(0,d),e))}function xc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gc(a,c,d)),gb(a,b)}function yc(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?be(0,e+d):d||0}else if(d){var f=Hc(b,c);return b[f]===c?f:-1}return a(b,c,d)}function zc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=q.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return n(a,0,ce(be(0,e-d),e))}function Ac(){for(var c=[],d=-1,e=arguments.length,g=h(),i=pb(),j=i===a,k=h();++d<e;){var n=arguments[d];(ke(n)||tb(n))&&(c.push(n),g.push(j&&n.length>=v&&f(d?c[d]:k)))}var o=c[0],p=-1,q=o?o.length:0,r=[];a:for(;++p<q;){var s=g[0];if(n=o[p],(s?b(s,n):i(k,n))<0){for(d=e,(s||k).push(n);--d;)if(s=g[d],(s?b(s,n):i(c[d],n))<0)continue a;r.push(n)}}for(;e--;)s=g[e],s&&m(s);return l(g),l(k),r}function Bc(a,b,c){var d=0,e=a?a.length:0;if("number"!=typeof b&&null!=b){var f=e;for(b=q.createCallback(b,c,3);f--&&b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:p;return n(a,be(0,e-d))}function Cc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?be(0,d+c):ce(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Dc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vd.call(a,f--,1),e--);return a}function Ec(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=be(0,Md((b-a)/(c||1))),f=ud(e);++d<e;)f[d]=a,a+=c;return f}function Fc(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=q.createCallback(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),Vd.call(a,d--,1),e--)}return f}function Gc(a,b,c){if("number"!=typeof b&&null!=b){var d=0,e=-1,f=a?a.length:0;for(b=q.createCallback(b,c,3);++e<f&&b(a[e],e,a);)d++}else d=null==b||c?1:be(0,b);return n(a,d)}function Hc(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?q.createCallback(c,d,1):ed,b=c(b);f>e;){var g=e+f>>>1;c(a[g])<b?e=g+1:f=g}return e}function Ic(){return kb(gb(arguments,!0,!0))}function Jc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(c=q.createCallback(c,d,3)),kb(a,b,c)}function Kc(a){return eb(a,n(arguments,1))}function Lc(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(ke(c)||tb(c))var d=d?kb(eb(d,c).concat(eb(c,d))):c}return d||[]}function Mc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hc(De(a,"length")):0,d=ud(0>c?0:c);++b<c;)d[b]=De(a,b);return d}function Nc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||ke(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Oc(a,b){if(!Kb(b))throw new Ed;return function(){return--a<1?b.apply(this,arguments):void 0}}function Pc(a,b){return arguments.length>2?mb(a,17,n(arguments,2),null,b):mb(a,1,null,null,b)}function Qc(a){for(var b=arguments.length>1?gb(arguments,!0,!1,1):Bb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=mb(a[e],1,null,null,a)}return a}function Rc(a,b){return arguments.length>2?mb(b,19,n(arguments,2),null,a):mb(b,3,null,null,a)}function Sc(){for(var a=arguments,b=a.length;b--;)if(!Kb(a[b]))throw new Ed;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tc(a,b){return b="number"==typeof b?b:+b||a.length,mb(a,4,null,null,null,b)}function Uc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Kb(a))throw new Ed;if(b=be(0,b)||0,c===!0){var n=!0;m=!1}else Lb(c)&&(n=c.leading,l="maxWait"in c&&(be(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fe()-g);if(0>=c){e&&Nd(e);var l=j;e=i=j=p,l&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Ud(o,c)},q=function(){i&&Nd(i),e=i=j=p,(m||l!==b)&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=Fe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var p=l-(g-k),r=0>=p;r?(e&&(e=Nd(e)),k=g,f=a.apply(h,d)):e||(e=Ud(q,p))}return r&&i?i=Nd(i):i||b===l||(i=Ud(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vc(a){if(!Kb(a))throw new Ed;var b=n(arguments,1);return Ud(function(){a.apply(p,b)},1)}function Wc(a,b){if(!Kb(a))throw new Ed;var c=n(arguments,2);return Ud(function(){a.apply(p,c)},b)}function Xc(a,b){if(!Kb(a))throw new Ed;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return Rd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yc(a){var b,c;if(!Kb(a))throw new Ed;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zc(a){return mb(a,16,n(arguments,1))}function $c(a){return mb(a,32,null,n(arguments,1))}function _c(a,b,c){var d=!0,e=!0;if(!Kb(a))throw new Ed;return c===!1?d=!1:Lb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),X.leading=d,X.maxWait=b,X.trailing=e,Uc(a,b,X)}function ad(a,b){return mb(b,16,[a])}function bd(a){return function(){return a}}function cd(a,b,c){var d=typeof a;if(null==a||"function"==d)return cb(a,b,c);if("object"!=d)return id(a);var e=me(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Lb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=hb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dd(a){return null==a?"":Dd(a).replace(te,ob)}function ed(a){return a}function fd(a,b,c){var d=!0,e=b&&Bb(b);b&&(c||e.length)||(null==c&&(c=b),f=r,b=a,a=q,e=Bb(b)),c===!1?d=!1:Lb(c)&&"chain"in c&&(d=c.chain);var f=a,g=Kb(f);dc(e,function(c){var e=a[c]=b[c];g&&(f.prototype[c]=function(){var b=this.__chain__,c=this.__wrapped__,g=[c];Sd.apply(g,arguments);var h=e.apply(a,g);if(d||b){if(c===h&&Lb(h))return this;h=new f(h),h.__chain__=b}return h})})}function gd(){return c._=Jd,this}function hd(){}function id(a){return function(b){return b[a]}}function jd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ee();return ce(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return jb(a,b)}function kd(a,b){if(a){var c=a[b];return Kb(c)?a[b]():c}}function ld(a,b,c){var d=q.templateSettings;a=Dd(a||""),c=we({},c,d);var e,f=we({},c.imports,d.imports),h=me(f),i=Yb(f),j=0,k=c.interpolate||G,l="__p += '",m=Cd((c.escape||G).source+"|"+k.source+"|"+(k===E?B:G).source+"|"+(c.evaluate||G).source+"|$","g");a.replace(m,function(b,c,d,f,h,i){return d||(d=f),l+=a.slice(j,i).replace(I,g),c&&(l+="' +\n__e("+c+") +\n'"),h&&(e=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var n=c.variable,o=n;o||(n="obj",l="with ("+n+") {\n"+l+"\n}\n"),l=(e?l.replace(y,""):l).replace(z,"$1").replace(A,"$1;"),l="function("+n+") {\n"+(o?"":n+" || ("+n+" = {});\n")+"var __t, __p = '', __e = _.escape"+(e?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var r="\n/*\n//# sourceURL="+(c.sourceURL||"/lodash/template/source["+L++ +"]")+"\n*/";try{var s=yd(h,"return "+l+r).apply(p,i)}catch(t){throw t.source=l,t}return b?s(b):(s.source=l,s)}function md(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=ud(a);for(b=cb(b,c,1);++d<a;)e[d]=b(d);return e}function nd(a){return null==a?"":Dd(a).replace(se,sb)}function od(a){var b=++s;return Dd(null==a?"":a)+b}function pd(a){return a=new r(a),a.__chain__=!0,a}function qd(a,b){return b(a),a}function rd(){return this.__chain__=!0,this}function sd(){return Dd(this.__wrapped__)}function td(){return this.__wrapped__}c=c?fb.defaults(ab.Object(),c,fb.pick(ab,J)):ab;var ud=c.Array,vd=c.Boolean,wd=c.Date,xd=c.Error,yd=c.Function,zd=c.Math,Ad=c.Number,Bd=c.Object,Cd=c.RegExp,Dd=c.String,Ed=c.TypeError,Fd=[],Gd=xd.prototype,Hd=Bd.prototype,Id=Dd.prototype,Jd=c._,Kd=Hd.toString,Ld=Cd("^"+Dd(Kd).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Md=zd.ceil,Nd=c.clearTimeout,Od=zd.floor,Pd=yd.prototype.toString,Qd=qb(Qd=Bd.getPrototypeOf)&&Qd,Rd=Hd.hasOwnProperty,Sd=Fd.push,Td=Hd.propertyIsEnumerable,Ud=c.setTimeout,Vd=Fd.splice,Wd=Fd.unshift,Xd=function(){try{var a={},b=qb(b=Bd.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Yd=qb(Yd=Bd.create)&&Yd,Zd=qb(Zd=ud.isArray)&&Zd,$d=c.isFinite,_d=c.isNaN,ae=qb(ae=Bd.keys)&&ae,be=zd.max,ce=zd.min,de=c.parseInt,ee=zd.random,fe={};fe[N]=ud,fe[O]=vd,fe[P]=wd,fe[R]=yd,fe[T]=Bd,fe[S]=Ad,fe[U]=Cd,fe[V]=Dd;var ge={};ge[N]=ge[P]=ge[S]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ge[O]=ge[V]={constructor:!0,toString:!0,valueOf:!0},ge[Q]=ge[R]=ge[U]={constructor:!0,toString:!0},ge[T]={constructor:!0},function(){for(var a=K.length;a--;){var b=K[a];for(var c in ge)Rd.call(ge,c)&&!Rd.call(ge[c],b)&&(ge[c][b]=!1)}}(),r.prototype=q.prototype;var he=q.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},d=[];a.prototype={valueOf:1,y:1};for(var e in new a)d.push(e);for(e in arguments);he.argsClass=Kd.call(arguments)==M,he.argsObject=arguments.constructor==Bd&&!(arguments instanceof ud),he.enumErrorProps=Td.call(Gd,"message")||Td.call(Gd,"name"),he.enumPrototypes=Td.call(a,"prototype"),he.funcDecomp=!qb(c.WinRTError)&&H.test(o),he.funcNames="string"==typeof yd.name,he.nonEnumArgs=0!=e,he.nonEnumShadows=!/valueOf/.test(d),he.ownLast="x"!=d[0],he.spliceObjects=(Fd.splice.call(b,0,1),!b[0]),he.unindexedChars="x"[0]+Bd("x")[0]!="xx";try{he.nodeClass=!(Kd.call(document)==T&&!({toString:0}+""))}catch(f){he.nodeClass=!0}}(1),q.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:q}};var ie=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",he.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):he.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),he.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),he.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(he.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),he.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",he.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||he.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yd||(bb=function(){function a(){}return function(b){if(Lb(b)){a.prototype=b;var d=new a;a.prototype=null}return d||c.Object()}}());var je=Xd?function(a,b){Y.value=b,Xd(a,"__bindData__",Y)}:hd;he.argsClass||(tb=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rd.call(a,"callee")&&!Td.call(a,"callee")||!1});var ke=Zd||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==N||!1},le=nb({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),me=ae?function(a){return Lb(a)?he.enumPrototypes&&"function"==typeof a||he.nonEnumArgs&&a.length&&tb(a)?le(a):ae(a):[]}:le,ne={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:me,loop:"if (callback(iterable[index], index, collection) === false) return result"},oe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:me,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pe={top:"if (!objectTypes[typeof iterable]) return result;\n"+ne.top,array:!1},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re=Db(qe),se=Cd("("+me(re).join("|")+")","g"),te=Cd("["+me(qe).join("")+"]","g"),ue=nb(ne),ve=nb(oe,{top:oe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),we=nb(oe),xe=nb(ne,pe,{useHas:!1}),ye=nb(ne,pe);Kb(/x/)&&(Kb=function(a){return"function"==typeof a&&Kd.call(a)==R});var ze=Qd?function(a){if(!a||Kd.call(a)!=T||!he.argsClass&&tb(a))return!1;var b=a.valueOf,c=qb(b)&&(c=Qd(b))&&Qd(c);return c?a==c||Qd(a)==c:rb(a)}:rb,Ae=lb(function(a,b,c){Rd.call(a,c)?a[c]++:a[c]=1}),Be=lb(function(a,b,c){(Rd.call(a,c)?a[c]:a[c]=[]).push(b)}),Ce=lb(function(a,b,c){a[c]=b}),De=gc,Ee=ac,Fe=qb(Fe=wd.now)&&Fe||function(){return(new wd).getTime()},Ge=8==de(x+"08")?de:function(a,b){return de(Qb(a)?a.replace(F,""):a,b||0)};return q.after=Oc,q.assign=ve,q.at=Zb,q.bind=Pc,q.bindAll=Qc,q.bindKey=Rc,q.chain=pd,q.compact=sc,q.compose=Sc,q.constant=bd,q.countBy=Ae,q.create=wb,q.createCallback=cd,q.curry=Tc,q.debounce=Uc,q.defaults=we,q.defer=Vc,q.delay=Wc,q.difference=tc,q.filter=ac,q.flatten=xc,q.forEach=dc,q.forEachRight=ec,q.forIn=xe,q.forInRight=zb,q.forOwn=ye,q.forOwnRight=Ab,q.functions=Bb,q.groupBy=Be,q.indexBy=Ce,q.initial=zc,q.intersection=Ac,q.invert=Db,q.invoke=fc,q.keys=me,q.map=gc,q.mapValues=Sb,q.max=hc,q.memoize=Xc,q.merge=Tb,q.min=ic,q.omit=Ub,q.once=Yc,q.pairs=Vb,q.partial=Zc,q.partialRight=$c,q.pick=Wb,q.pluck=De,q.property=id,q.pull=Dc,q.range=Ec,q.reject=lc,q.remove=Fc,q.rest=Gc,q.shuffle=nc,q.sortBy=qc,q.tap=qd,q.throttle=_c,q.times=md,q.toArray=rc,q.transform=Xb,q.union=Ic,q.uniq=Jc,q.values=Yb,q.where=Ee,q.without=Kc,q.wrap=ad,q.xor=Lc,q.zip=Mc,q.zipObject=Nc,q.collect=gc,q.drop=Gc,q.each=dc,q.eachRight=ec,q.extend=ve,q.methods=Bb,q.object=Nc,q.select=ac,q.tail=Gc,q.unique=Jc,q.unzip=Mc,fd(q),q.clone=ub,q.cloneDeep=vb,q.contains=$b,q.escape=dd,q.every=_b,q.find=bc,q.findIndex=uc,q.findKey=xb,q.findLast=cc,q.findLastIndex=vc,q.findLastKey=yb,q.has=Cb,q.identity=ed,q.indexOf=yc,q.isArguments=tb,q.isArray=ke,q.isBoolean=Eb,q.isDate=Fb,q.isElement=Gb,q.isEmpty=Hb,q.isEqual=Ib,q.isFinite=Jb,q.isFunction=Kb,q.isNaN=Mb,q.isNull=Nb,q.isNumber=Ob,q.isObject=Lb,q.isPlainObject=ze,q.isRegExp=Pb,q.isString=Qb,q.isUndefined=Rb,q.lastIndexOf=Cc,q.mixin=fd,q.noConflict=gd,q.noop=hd,q.now=Fe,q.parseInt=Ge,q.random=jd,q.reduce=jc,q.reduceRight=kc,q.result=kd,q.runInContext=o,q.size=oc,q.some=pc,q.sortedIndex=Hc,q.template=ld,q.unescape=nd,q.uniqueId=od,q.all=_b,q.any=pc,q.detect=bc,q.findWhere=bc,q.foldl=jc,q.foldr=kc,q.include=$b,q.inject=jc,fd(function(){var a={};return ye(q,function(b,c){q.prototype[c]||(a[c]=b)}),a}(),!1),q.first=wc,q.last=Bc,q.sample=mc,q.take=wc,q.head=wc,ye(q,function(a,b){var c="sample"!==b;q.prototype[b]||(q.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&&(!d||c&&"function"==typeof b)?new r(f,e):f})}),q.VERSION="2.4.1",q.prototype.chain=rd,q.prototype.toString=sd,q.prototype.value=td,q.prototype.valueOf=td,ue(["join","pop","shift"],function(a){var b=Fd[a];q.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new r(c,a):c}}),ue(["push","reverse","sort","unshift"],function(a){var b=Fd[a];q.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),ue(["concat","slice","splice"],function(a){var b=Fd[a];q.prototype[a]=function(){return new r(b.apply(this.__wrapped__,arguments),this.__chain__)}}),he.spliceObjects||ue(["pop","shift","splice"],function(a){var b=Fd[a],c="splice"==a;q.prototype[a]=function(){var a=this.__chain__,d=this.__wrapped__,e=b.apply(d,arguments);return 0===d.length&&delete d[0],a||c?new r(e,a):e}}),q}var p,q=[],r=[],s=0,t={},u=+new Date+"",v=75,w=40,x=" 	\fÂ ï»¿\n\r\u2028\u2029áá ââââââââââââ¯âã",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^\s*function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],K=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L=0,M="[object Arguments]",N="[object Array]",O="[object Boolean]",P="[object Date]",Q="[object Error]",R="[object Function]",S="[object Number]",T="[object Object]",U="[object RegExp]",V="[object String]",W={};W[R]=!1,W[M]=W[N]=W[O]=W[P]=W[S]=W[T]=W[U]=W[V]=!0;var X={leading:!1,maxWait:0,trailing:!1},Y={configurable:!1,enumerable:!1,value:null,writable:!1},Z={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},$={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},_={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},ab=$[typeof window]&&window||this,bb=$[typeof exports]&&exports&&!exports.nodeType&&exports,cb=$[typeof module]&&module&&!module.nodeType&&module,db=cb&&cb.exports===bb&&bb,eb=$[typeof global]&&global;!eb||eb.global!==eb&&eb.window!==eb||(ab=eb);var fb=o();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ab._=fb,define("lodash",[],function(){return fb})):bb&&cb?db?(cb.exports=fb)._=fb:bb._=fb:ab._=fb}.call(this),define("navbar/navbar-view",["underscore","lodash","backbone","egad","metadata","bootstrap"],function(a,b,c,d,e){var f=c.Layout.extend({template:"navbar/navbar",tagName:"div",id:"nav-bar",className:"navbar navbar-fixed-top",initialize:function(){a.bindAll(this)},events:{"click .menuLink":"selectTopElement","keydown #direct_search":"doSearch"},afterRender:function(){this.$active&&this.setActive();var a=function(a){a["search.enabled"]?($("#direct_search").removeAttr("disabled"),$("a#searchItem").removeAttr("disabled").off("click.disableSearch")):($("#direct_search").attr("disabled","true"),$("a#searchItem").attr("disabled","true").on("click.disableSearch",function(a){a.preventDefault(),a.stopPropagation(),$("li#optionsMenu").removeClass("open")}))},b=new e.Settings;a(b.getAll()),d.api.Mediator.publish("module:navbar:afterRender")},serialize:function(){console.log("rendering navbar");var c=b.cloneDeep(d.config.get("modules")),e=c.navbar,f=function(a){a.link="link"==a.type?a.using:"#!/"+a.type+"/"+encodeURIComponent(a.using)};return a.each(e.dropdowns,function(b){a.each(b.items,f)}),a.each(e.items,f),{isLogo:d.config.get("label").match(/(?:.+\.)(?:jpg|png|gif|ico|bmp|svg)/i),label:d.config.get("label"),name:d.config.get("name"),modules:c}},selectTopElement:function(a){this.cleanActive(),this.$active=$(a.target).parent("li"),this.setActive()},setActive:function(){this.$active.addClass("active"),d.api.Mediator.publish("module:navbar:setactive")},cleanActive:function(){this.$active&&this.$active.removeClass("active"),this.$active=null},getActive:function(){return this.$active},doSearch:function(a){if(13==a.keyCode){a.preventDefault();var b=this.$el.find("#direct_search").val();if(!b||""===b)return;d.api.Mediator.publish("router:navigate","#!/search/"+encodeURI(b),{trigger:!0})}}});return f}),define("navbar/main",["jquery","underscore","egad","navbar/navbar-view"],function(a,b,c,d){var e=c.api.Module.extend({name:"navbar",initialize:function(){var b=new d;a("#topBar").html(b.$el),b.render()}});return new e}),define("navbar",["navbar/main"],function(a){return a}),define("browse/resource.list",["underscore","egad","backbone","burry","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c){var d={};return d.ListItem=c.Layout.extend({template:"browse/resourceListElem",tagName:"tr",className:"listing module",actions:[],_collectionConfig:{},initialize:function(){a.bindAll(this),this.actions=[]},_getCollectionLabel:function(c){var d=[];return d=a.map(c,function(a){return b.config.getLabelFor(a)}),a.uniq(d,!1)},_getCollectionFields:function(c){var d=this,e=[],f=a.map(c,function(a){return b.config.getFieldsFor(a)});return f=a.compact(f),a.each(f,function(b){a.each(b,function(b){if(d.model.has(b)){var c=d.model.getProperty(b),f=[];f.push(c),f=a.flatten(f),c=a.map(f,function(b){return a.isObject(b)?a.has(b,"@id")?b["@id"]:a.has(b,"@value")?b["@value"]:"":b}),e.push(1==c.length?c[0]:c.join(", "))}})}),a.uniq(e)},serialize:function(){var a=this.model.get("@type"),b=a;a instanceof Array||(a=new Array(b));var c=this._getCollectionLabel(a),d={"@egadLabel":this.model.getLabel(c),"@id":this.model.get("@id"),additionalFields:this._getCollectionFields(a)};return d["@type"]=this.model.has("@type")?this.model.get("@type"):"resource",this.actions&&this.actions.length>0&&(d.actions=1==this.actions.length?this.actions[0]:this.actions),d},afterRender:function(){},setActions:function(b){this.actions=a.asArray(b)}}),d.List=c.Layout.extend({template:"browse/resourceList",tagName:"div",id:"resourceListView",className:"listing results module",elemActions:[],events:{"click #btnAdd":"addNewIndividual"},initialize:function(b){a.bindAll(this),this.elemActions=[],b.template&&(this.template=b.template)},beforeRender:function(){var a=this,c=this.collection.rdfType;this.collection.usingProperty&&(c=this.collection.usingProperty);var e=new b.model.ResourceLabel({"@id":encodeURIComponent(c)});a.collection.usingProperty?a.collection.propertyLabel=e.getLabel():a.collection.rdfTypeLabel=e.getLabel(),this.collection.length>0&&this.collection.each(function(b){var c=new d.ListItem({model:b});c.setActions(a.elemActions),a.insertView("#tableBody",c)})},serialize:function(){var c={type:"",typeLabel:""};this.collection.usingProperty?(c.property=a.compactURI(this.collection.usingProperty,b.config.namespaces()),c.propertyLabel=this.collection.propertyLabel):(c.type=a.compactURI(this.collection.rdfType,b.config.namespaces()),c.typeLabel=this.collection.rdfTypeLabel);
var d="",e=this.collection.rdfType;return this.collection.usingProperty&&(d="using/",e=this.collection.usingProperty),this.collection.page>=0&&this.collection.isFull()&&(c.nextPage="#!/browse/"+d+encodeURIComponent(e)+"/p/"+(parseInt(this.collection.page)+1)),this.collection.page>1?c.prevPage="#!/browse/"+d+encodeURIComponent(e)+"/p/"+(parseInt(this.collection.page)-1):1==this.collection.page&&(c.prevPage="#!/browse/"+d+encodeURIComponent(e)),c.hasResults=this.collection.length>0,c},addNewIndividual:function(a){a.preventDefault(),b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(this.collection.rdfType)+"/new",{trigger:!0})},addElementAction:function(a,b){this.elemActions.push({module:a,"function":b})}}),d}),define("browse/property/property.datatype",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/datatypeProperty",tagName:"div",className:"property",initialize:function(){c.bindAll(this)},beforeRender:function(){console.log("rendering DatatypePropView")},serialize:function(){var a,b,d=this.model.get("@value");return c.isObject(d)&&c.keys(d).length>0?(a=d["@value"],b=d["@language"]):a=d,this.model.set("@value",a),this.model.set("@language",b),this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip()},highlight:function(){this.$el.addClass("highlight")}});return f}),define("browse/property/property.datatype.array",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/datatypePropertyArray",tagName:"div",className:"property",originalValues:[],valWindow:10,loadMoreTimes:1,events:{"click .btn-more":"loadMore"},initialize:function(){this.model&&(this.originalValues=this.model.get("@value").slice(0))},beforeRender:function(){console.log("rendering DatatypePropArrayView"),this.originalValues.length>this.valWindow&&this.model.set("@value",this.originalValues.slice(0,this.valWindow*this.loadMoreTimes));var a=this.model.get("@value");this.model.set("@showMore",a.length>=this.valWindow&&a.length<this.originalValues.length)},serialize:function(){var a=this.model.get("@value");return a=c.map(a,function(a){var b,d;return c.isObject(a)&&c.keys(a).length>0?(b=a["@value"],d=a["@language"]):b=a,{"@value":b,"@language":d}}),this.model.set("@values",a),this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip()},highlight:function(){this.$el.addClass("highlight")},loadMore:function(a){a.preventDefault(),this.loadMoreTimes+=1,this.render()}});return f}),define("browse/property/property.datatype.edit",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/datatypePropertyEdit",tagName:"div",className:"property",events:{"click .addDataType":"addDataType","click .removeDataType":"removeDataType","click button.close":"removeHandler"},initialize:function(){c.bindAll(this),c.extend(this,e.Events)},beforeRender:function(){console.log("rendering EditDatatypePropView");var a=this.model.get("@value"),b=[];a instanceof Array?b=a:b.push(a),this.model.set("@value",b)},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip(),this.trigger("component-loaded")},getPropertyType:function(){return"DatatypeProperty"},getPropertyName:function(){return this.model.id},getPropertyLabel:function(){return this.model.getLabel()},getPropertyValue:function(){var a=[];return this.$el.find(".dataTypeIn").each(function(){var c=b(this).val()||"",d=b(this).siblings("input.dataLanguage").val();c=c.trim(),isNaN(c)?d?(d=d.trim(),a.push({"@value":c,"@language":d})):a.push(c):a.push(c.indexOf(".")>=0?parseFloat(c):parseInt(c))}),1===a.length?a[0]:a},highlightError:function(){this.$el.addClass("highlight-error")},addDataType:function(a){a.preventDefault();var b='<li>  <div class="row">    <input class="form-control dataTypeIn propertyInput" type="text" style="width: 65%; display: inline;">    <span class="label label-default">@</span>    <input class="form-control dataLanguage" type="text" maxlength="2" style="width: 12%; display: inline;">    <button class="btn btn-default removeDataType" type="button" style="width: 10%;"><i class="icon-remove" /></button>  </div></li>';this.$el.find("ul").prepend(b)},removeDataType:function(a){a.preventDefault(),b(a.target).parents("li").remove()},removeHandler:function(){this.trigger("closing",decodeURIComponent(this.model.id)),this.remove()}});return f}),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a){rb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function e(a,b){var c=!0;return l(function(){return c&&(d(a),c=!1),b.apply(this,arguments)},b)}function f(a,b){nc[a]||(d(b),nc[a]=!0)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function i(){}function j(a,b){b!==!1&&E(a),m(this,a),this._d=new Date(+a._d)}function k(a){var b=x(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=rb.localeData(),this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fb.length>0)for(c in Fb)d=Fb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function p(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function q(a,b){var c;return b=J(b,a),a.isBefore(b)?c=p(a,b):(c=p(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function r(a,b){return function(c,d){var e,g;return null===d||isNaN(+d)||(f(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),g=c,c=d,d=g),c="string"==typeof c?+c:c,e=rb.duration(c,d),s(this,e,a),this}}function s(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&lb(a,"Date",kb(a,"Date")+f*c),g&&jb(a,kb(a,"Month")+g*c),d&&rb.updateOffset(a,f||g)}function t(a){return"[object Array]"===Object.prototype.toString.call(a)}function u(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&g++;return g+f}function w(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=gc[a]||hc[b]||b}return a}function x(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=w(c),b&&(d[b]=a[c]));return d}function y(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}rb[b]=function(e,f){var g,h,i=rb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=rb().utc().set(d,a);return i.call(rb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function z(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function A(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function B(a,b,c){return fb(rb([a,11,31+b-c]),b,c).week}function C(a){return D(a)?366:365}function D(a){return a%4===0&&a%100!==0||a%400===0}function E(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[yb]<0||a._a[yb]>11?yb:a._a[zb]<1||a._a[zb]>A(a._a[xb],a._a[yb])?zb:a._a[Ab]<0||a._a[Ab]>23?Ab:a._a[Bb]<0||a._a[Bb]>59?Bb:a._a[Cb]<0||a._a[Cb]>59?Cb:a._a[Db]<0||a._a[Db]>999?Db:-1,a._pf._overflowDayOfYear&&(xb>b||b>zb)&&(b=zb),a._pf.overflow=b)}function F(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function G(a){return a?a.toLowerCase().replace("_","-"):a}function H(a){for(var b,c,d,e,f=0;f<a.length;){for(e=G(a[f]).split("-"),b=e.length,c=G(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=I(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function I(a){var b=null;if(!Eb[a]&&Gb)try{b=rb.locale(),require("./locale/"+a),rb.locale(b)}catch(c){}return Eb[a]}function J(a,b){return b._isUTC?rb(a).zone(b._offset||0):rb(a).local()}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Kb);for(b=0,c=d.length;c>b;b++)d[b]=mc[d[b]]?mc[d[b]]:K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ic[b]||(ic[b]=L(b)),ic[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Lb.lastIndex=0;d>=0&&Lb.test(a);)a=a.replace(Lb,c),Lb.lastIndex=0,d-=1;return a}function O(a,b){var c,d=b._strict;switch(a){case"Q":return Wb;case"DDDD":return Yb;case"YYYY":case"GGGG":case"gggg":return d?Zb:Ob;case"Y":case"G":case"g":return _b;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?$b:Pb;case"S":if(d)return Wb;case"SS":if(d)return Xb;case"SSS":if(d)return Yb;case"DDD":return Nb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Rb;case"a":case"A":return b._locale._meridiemParse;case"X":return Ub;case"Z":case"ZZ":return Sb;case"T":return Tb;case"SSSS":return Qb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Xb:Mb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Mb;case"Do":return Vb;default:return c=new RegExp(X(W(a.replace("\\","")),"i"))}}function P(a){a=a||"";var b=a.match(Sb)||[],c=b[b.length-1]||[],d=(c+"").match(ec)||["-",0,0],e=+(60*d[1])+z(d[2]);return"+"===d[0]?-e:e}function Q(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[yb]=3*(z(b)-1));break;case"M":case"MM":null!=b&&(e[yb]=z(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[yb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[zb]=z(b));break;case"Do":null!=b&&(e[zb]=z(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=z(b));break;case"YY":e[xb]=rb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[xb]=z(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Ab]=z(b);break;case"m":case"mm":e[Bb]=z(b);break;case"s":case"ss":e[Cb]=z(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Db]=z(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=P(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=z(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=rb.parseTwoDigitYear(b)}}function R(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[xb],fb(rb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[xb],fb(rb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=gb(d,e,f,h,g),a._a[xb]=i.year,a._dayOfYear=i.dayOfYear}function S(a){var c,d,e,f,g=[];if(!a._d){for(e=U(a),a._w&&null==a._a[zb]&&null==a._a[yb]&&R(a),a._dayOfYear&&(f=b(a._a[xb],e[xb]),a._dayOfYear>C(f)&&(a._pf._overflowDayOfYear=!0),d=bb(f,0,a._dayOfYear),a._a[yb]=d.getUTCMonth(),a._a[zb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?bb:ab).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function T(a){var b;a._d||(b=x(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],S(a))}function U(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function V(a){if(a._f===rb.ISO_8601)return void Z(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=N(a._f,a._locale).match(Kb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(O(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),mc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),Q(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Ab]<12&&(a._a[Ab]+=12),a._isPm===!1&&12===a._a[Ab]&&(a._a[Ab]=0),S(a),E(a)}function W(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(a){var b,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=m({},a),b._pf=c(),b._f=a._f[f],V(b),F(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,d=b));l(a,d||b)}function Z(a){var b,c,d=a._i,e=ac.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cc.length;c>b;b++)if(cc[b][1].exec(d)){a._f=cc[b][0]+(e[6]||" ");break}for(b=0,c=dc.length;c>b;b++)if(dc[b][1].exec(d)){a._f+=dc[b][0];break}d.match(Sb)&&(a._f+="Z"),V(a)}else a._isValid=!1}function $(a){Z(a),a._isValid===!1&&(delete a._isValid,rb.createFromInputFallback(a))}function _(b){var c,d=b._i;d===a?b._d=new Date:u(d)?b._d=new Date(+d):null!==(c=Hb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?$(b):t(d)?(b._a=d.slice(0),S(b)):"object"==typeof d?T(b):"number"==typeof d?b._d=new Date(d):rb.createFromInputFallback(b)}function ab(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function bb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function cb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function db(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function eb(a,b,c){var d=rb.duration(a).abs(),e=wb(d.as("s")),f=wb(d.as("m")),g=wb(d.as("h")),h=wb(d.as("d")),i=wb(d.as("M")),j=wb(d.as("y")),k=e<jc.s&&["s",e]||1===f&&["m"]||f<jc.m&&["mm",f]||1===g&&["h"]||g<jc.h&&["hh",g]||1===h&&["d"]||h<jc.d&&["dd",h]||1===i&&["M"]||i<jc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,db.apply({},k)}function fb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=rb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function gb(a,b,c,d,e){var f,g,h=bb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:C(a-1)+g}}function hb(b){var c=b._i,d=b._f;return b._locale=b._locale||rb.localeData(b._l),null===c||d===a&&""===c?rb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),rb.isMoment(c)?new j(c,!0):(d?t(d)?Y(b):V(b):_(b),new j(b)))}function ib(a,b){var c,d;if(1===b.length&&t(b[0])&&(b=b[0]),!b.length)return rb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function jb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),A(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function kb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function lb(a,b,c){return"Month"===b?jb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function mb(a,b){return function(c){return null!=c?(lb(this,a,c),rb.updateOffset(this,b),this):kb(this,a)}}function nb(a){return 400*a/146097}function ob(a){return 146097*a/400}function pb(a){rb.duration.fn[a]=function(){return this._data[a]}}function qb(a){"undefined"==typeof ender&&(sb=vb.moment,vb.moment=a?e("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",rb):rb)}for(var rb,sb,tb,ub="2.8.1",vb="undefined"!=typeof global?global:this,wb=Math.round,xb=0,yb=1,zb=2,Ab=3,Bb=4,Cb=5,Db=6,Eb={},Fb=[],Gb="undefined"!=typeof module&&module.exports,Hb=/^\/?Date\((\-?\d+)/i,Ib=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Jb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Kb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Mb=/\d\d?/,Nb=/\d{1,3}/,Ob=/\d{1,4}/,Pb=/[+\-]?\d{1,6}/,Qb=/\d+/,Rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Sb=/Z|[\+\-]\d\d:?\d\d/gi,Tb=/T/i,Ub=/[\+\-]?\d+(\.\d{1,3})?/,Vb=/\d{1,2}/,Wb=/\d/,Xb=/\d\d/,Yb=/\d{3}/,Zb=/\d{4}/,$b=/[+-]?\d{6}/,_b=/[+-]?\d+/,ac=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bc="YYYY-MM-DDTHH:mm:ssZ",cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ec=/([\+\-]|\d\d)/gi,fc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ic={},jc={s:45,m:45,h:22,d:26,M:11},kc="DDD w W M D d".split(" "),lc="M D H h m s w W".split(" "),mc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return o(z(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+":"+o(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+o(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nc={},oc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];kc.length;)tb=kc.pop(),mc[tb+"o"]=h(mc[tb],tb);for(;lc.length;)tb=lc.pop(),mc[tb+tb]=g(mc[tb],2);mc.DDDD=g(mc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=rb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=rb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return fb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),rb=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=c(),hb(g)},rb.suppressDeprecationWarnings=!1,rb.createFromInputFallback=e("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),rb.min=function(){var a=[].slice.call(arguments,0);return ib("isBefore",a)},rb.max=function(){var a=[].slice.call(arguments,0);return ib("isAfter",a)},rb.utc=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=d,g._strict=f,g._pf=c(),hb(g).utc()},rb.unix=function(a){return rb(1e3*a)},rb.duration=function(a,b){var c,d,e,f,g=a,h=null;return rb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Ib.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:z(h[zb])*c,h:z(h[Ab])*c,m:z(h[Bb])*c,s:z(h[Cb])*c,ms:z(h[Db])*c}):(h=Jb.exec(a))?(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}):"object"==typeof g&&("from"in g||"to"in g)&&(f=q(rb(g.from),rb(g.to)),g={},g.ms=f.milliseconds,g.M=f.months),d=new k(g),rb.isDuration(a)&&a.hasOwnProperty("_locale")&&(d._locale=a._locale),d},rb.version=ub,rb.defaultFormat=bc,rb.ISO_8601=function(){},rb.momentProperties=Fb,rb.updateOffset=function(){},rb.relativeTimeThreshold=function(b,c){return jc[b]===a?!1:c===a?jc[b]:(jc[b]=c,!0)},rb.lang=e("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return rb.locale(a,b)}),rb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?rb.defineLocale(a,b):rb.localeData(a),c&&(rb.duration._locale=rb._locale=c)),rb._locale._abbr},rb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Eb[a]||(Eb[a]=new i),Eb[a].set(b),rb.locale(a),Eb[a]):(delete Eb[a],null)},rb.langData=e("moment.langData is deprecated. Use moment.localeData instead.",function(a){return rb.localeData(a)}),rb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return rb._locale;if(!t(a)){if(b=I(a))return b;a=[a]}return H(a)},rb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty("_isAMomentObject")},rb.isDuration=function(a){return a instanceof k};for(tb=oc.length-1;tb>=0;--tb)y(oc[tb]);rb.normalizeUnits=function(a){return w(a)},rb.invalid=function(a){var b=rb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},rb.parseZone=function(){return rb.apply(null,arguments).parseZone()},rb.parseTwoDigitYear=function(a){return z(a)+(z(a)>68?1900:2e3)},l(rb.fn=j.prototype,{clone:function(){return rb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=rb(this).utc();return 0<a.year()&&a.year()<=9999?M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&v(this._a,(this._isUTC?rb.utc(this._a):rb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(a){var b=M(this,a||rb.defaultFormat);return this.localeData().postformat(b)},add:r(1,"add"),subtract:r(-1,"subtract"),diff:function(a,b,c){var d,e,f=J(a,this),g=6e4*(this.zone()-f.zone());return b=w(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-rb(this).startOf("month")-(f-rb(f).startOf("month")))/d,e-=6e4*(this.zone()-rb(this).startOf("month").zone()-(f.zone()-rb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return rb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(rb(),a)},calendar:function(a){var b=a||rb(),c=J(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cb(a,this.localeData()),this.add(a-b,"d")):b},month:mb("Month",!0),startOf:function(a){switch(a=w(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=w(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+rb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+rb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+J(a,this).startOf(b)},min:e("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),this>a?this:a}),max:e("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=P(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?s(this,rb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?rb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(a){var b=wb((rb(this).startOf("day")-rb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=fb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=fb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);
return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=fb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return B(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return B(this.year(),a.dow,a.doy)},get:function(a){return a=w(a),this[a]()},set:function(a,b){return a=w(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){return b===a?this._locale._abbr:(this._locale=rb.localeData(b),this)},lang:e("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():(this._locale=rb.localeData(b),this)}),localeData:function(){return this._locale}}),rb.fn.millisecond=rb.fn.milliseconds=mb("Milliseconds",!1),rb.fn.second=rb.fn.seconds=mb("Seconds",!1),rb.fn.minute=rb.fn.minutes=mb("Minutes",!1),rb.fn.hour=rb.fn.hours=mb("Hours",!0),rb.fn.date=mb("Date",!0),rb.fn.dates=e("dates accessor is deprecated. Use date instead.",mb("Date",!0)),rb.fn.year=mb("FullYear",!0),rb.fn.years=e("years accessor is deprecated. Use year instead.",mb("FullYear",!0)),rb.fn.days=rb.fn.day,rb.fn.months=rb.fn.month,rb.fn.weeks=rb.fn.week,rb.fn.isoWeeks=rb.fn.isoWeek,rb.fn.quarters=rb.fn.quarter,rb.fn.toJSON=rb.fn.toISOString,l(rb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=n(d/1e3),g.seconds=a%60,b=n(a/60),g.minutes=b%60,c=n(b/60),g.hours=c%24,e+=n(c/24),h=n(nb(e)),e-=n(ob(h)),f+=n(e/30),e%=30,h+=n(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(a){var b=eb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=rb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=rb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=w(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=w(a),b=this._days+this._milliseconds/864e5,"month"===a||"year"===a)return c=this._months+12*nb(b),"month"===a?c:c/12;switch(b+=ob(this._months/12),a){case"week":return b/7;case"day":return b;case"hour":return 24*b;case"minute":return 24*b*60;case"second":return 24*b*60*60;case"millisecond":return 24*b*60*60*1e3;default:throw new Error("Unknown unit "+a)}},lang:rb.fn.lang,locale:rb.fn.locale,toIsoString:e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}});for(tb in fc)fc.hasOwnProperty(tb)&&pb(tb.toLowerCase());rb.duration.fn.asMilliseconds=function(){return this.as("ms")},rb.duration.fn.asSeconds=function(){return this.as("s")},rb.duration.fn.asMinutes=function(){return this.as("m")},rb.duration.fn.asHours=function(){return this.as("h")},rb.duration.fn.asDays=function(){return this.as("d")},rb.duration.fn.asWeeks=function(){return this.as("weeks")},rb.duration.fn.asMonths=function(){return this.as("M")},rb.duration.fn.asYears=function(){return this.as("y")},rb.locale("en",{ordinal:function(a){var b=a%10,c=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Gb?module.exports=rb:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(vb.moment=sb),rb}),qb(!0)):qb()}.call(this),!function(a,b){"use strict";if("function"==typeof define&&define.amd)define("datetimepicker",["jquery","moment"],b);else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");b(a.jQuery,moment)}}(this,function(a,b){"use strict";if("undefined"==typeof b)throw new Error("momentjs is required");var c=0,d=function(d,e){var f,g=a.fn.datetimepicker.defaults,h={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},i=this,j=function(){var f,j,m=!1;if(i.options=a.extend({},g,e),i.options.icons=a.extend({},h,i.options.icons),i.element=a(d),l(),!i.options.pickTime&&!i.options.pickDate)throw new Error("Must choose at least one picker");if(i.id=c++,b.locale(i.options.language),i.date=b(),i.unset=!1,i.isInput=i.element.is("input"),i.component=!1,i.element.hasClass("input-group")&&(i.component=i.element.find(0===i.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),i.format=i.options.format,f=b().localeData(),i.format||(i.format=i.options.pickDate?f.longDateFormat("L"):"",i.options.pickDate&&i.options.pickTime&&(i.format+=" "),i.format+=i.options.pickTime?f.longDateFormat("LT"):"",i.options.useSeconds&&(-1!==f.longDateFormat("LT").indexOf(" A")?i.format=i.format.split(" A")[0]+":ss A":i.format+=":ss")),i.use24hours=i.format.toLowerCase().indexOf("a")<1,i.component&&(m=i.component.find("span")),i.options.pickTime&&m&&m.addClass(i.options.icons.time),i.options.pickDate&&m&&(m.removeClass(i.options.icons.time),m.addClass(i.options.icons.date)),i.options.widgetParent="string"==typeof i.options.widgetParent&&i.options.widgetParent||i.element.parents().filter(function(){return"scroll"===a(this).css("overflow-y")}).get(0)||"body",i.widget=a(P()).appendTo(i.options.widgetParent),i.minViewMode=i.options.minViewMode||0,"string"==typeof i.minViewMode)switch(i.minViewMode){case"months":i.minViewMode=1;break;case"years":i.minViewMode=2;break;default:i.minViewMode=0}if(i.viewMode=i.options.viewMode||0,"string"==typeof i.viewMode)switch(i.viewMode){case"months":i.viewMode=1;break;case"years":i.viewMode=2;break;default:i.viewMode=0}i.viewMode=Math.max(i.viewMode,i.minViewMode),i.options.disabledDates=N(i.options.disabledDates),i.options.enabledDates=N(i.options.enabledDates),i.startViewMode=i.viewMode,i.setMinDate(i.options.minDate),i.setMaxDate(i.options.maxDate),q(),r(),t(),u(),v(),p(),D(),E(),""!==i.options.defaultDate&&""===k().val()&&i.setValue(i.options.defaultDate),1!==i.options.minuteStepping&&(j=i.options.minuteStepping,i.date.minutes(Math.round(i.date.minutes()/j)*j%60).seconds(0))},k=function(){var a;if(i.isInput)return i.element;if(a=i.element.find(".datepickerinput"),0===a.size())a=i.element.find("input");else if(!a.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return a},l=function(){var a;a=i.element.is("input")?i.element.data():i.element.find("input").data(),void 0!==a.dateFormat&&(i.options.format=a.dateFormat),void 0!==a.datePickdate&&(i.options.pickDate=a.datePickdate),void 0!==a.datePicktime&&(i.options.pickTime=a.datePicktime),void 0!==a.dateUseminutes&&(i.options.useMinutes=a.dateUseminutes),void 0!==a.dateUseseconds&&(i.options.useSeconds=a.dateUseseconds),void 0!==a.dateUsecurrent&&(i.options.useCurrent=a.dateUsecurrent),void 0!==a.dateMinutestepping&&(i.options.minuteStepping=a.dateMinutestepping),void 0!==a.dateMindate&&(i.options.minDate=a.dateMindate),void 0!==a.dateMaxdate&&(i.options.maxDate=a.dateMaxdate),void 0!==a.dateShowtoday&&(i.options.showToday=a.dateShowtoday),void 0!==a.dateCollapse&&(i.options.collapse=a.dateCollapse),void 0!==a.dateLanguage&&(i.options.language=a.dateLanguage),void 0!==a.dateDefaultdate&&(i.options.defaultDate=a.dateDefaultdate),void 0!==a.dateDisableddates&&(i.options.disabledDates=a.dateDisableddates),void 0!==a.dateEnableddates&&(i.options.enabledDates=a.dateEnableddates),void 0!==a.dateIcons&&(i.options.icons=a.dateIcons),void 0!==a.dateUsestrict&&(i.options.useStrict=a.dateUsestrict),void 0!==a.dateDirection&&(i.options.direction=a.dateDirection),void 0!==a.dateSidebyside&&(i.options.sideBySide=a.dateSidebyside),void 0!==a.dateDaysofweekdisabled&&(i.options.daysOfWeekDisabled=a.dateDaysofweekdisabled)},m=function(){var b,c="absolute",d=i.component?i.component.offset():i.element.offset(),e=a(window);i.width=i.component?i.component.outerWidth():i.element.outerWidth(),d.top=d.top+i.element.outerHeight(),"up"===i.options.direction?b="top":"bottom"===i.options.direction?b="bottom":"auto"===i.options.direction&&(b=d.top+i.widget.height()>e.height()+e.scrollTop()&&i.widget.height()+i.element.outerHeight()<d.top?"top":"bottom"),"top"===b?(d.top-=i.widget.height()+i.element.outerHeight()+15,i.widget.addClass("top").removeClass("bottom")):(d.top+=1,i.widget.addClass("bottom").removeClass("top")),void 0!==i.options.width&&i.widget.width(i.options.width),"left"===i.options.orientation&&(i.widget.addClass("left-oriented"),d.left=d.left-i.widget.width()+20),I()&&(c="fixed",d.top-=e.scrollTop(),d.left-=e.scrollLeft()),e.width()<d.left+i.widget.outerWidth()?(d.right=e.width()-d.left-i.width,d.left="auto",i.widget.addClass("pull-right")):(d.right="auto",i.widget.removeClass("pull-right")),i.widget.css({position:c,top:d.top,left:d.left,right:d.right})},n=function(a,c){b(i.date).isSame(b(a))||(i.element.trigger({type:"dp.change",date:b(i.date),oldDate:b(a)}),"change"!==c&&i.element.change())},o=function(a){i.element.trigger({type:"dp.error",date:b(a,i.format,i.options.useStrict)})},p=function(a){b.locale(i.options.language);var c=a;c||(c=k().val(),c&&(i.date=b(c,i.format,i.options.useStrict)),i.date||(i.date=b())),i.viewDate=b(i.date).startOf("month"),s(),w()},q=function(){b.locale(i.options.language);var c,d=a("<tr>"),e=b.weekdaysMin();if(0===b().localeData()._week.dow)for(c=0;7>c;c++)d.append('<th class="dow">'+e[c]+"</th>");else for(c=1;8>c;c++)d.append(7===c?'<th class="dow">'+e[0]+"</th>":'<th class="dow">'+e[c]+"</th>");i.widget.find(".datepicker-days thead").append(d)},r=function(){b.locale(i.options.language);var a,c="",d=b.monthsShort();for(a=0;12>a;a++)c+='<span class="month">'+d[a]+"</span>";i.widget.find(".datepicker-months td").append(c)},s=function(){if(i.options.pickDate){b.locale(i.options.language);var c,d,e,f,g,h,j,k,l,m=i.viewDate.year(),n=i.viewDate.month(),o=i.options.minDate.year(),p=i.options.minDate.month(),q=i.options.maxDate.year(),r=i.options.maxDate.month(),s=[],t=b.months();for(i.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),i.widget.find(".datepicker-days th:eq(1)").text(t[n]+" "+m),d=b(i.viewDate,i.format,i.options.useStrict).subtract(1,"months"),j=d.daysInMonth(),d.date(j).startOf("week"),(m===o&&p>=n||o>m)&&i.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(m===q&&n>=r||m>q)&&i.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),e=b(d).add(42,"d");d.isBefore(e);){if(d.weekday()===b().startOf("week").weekday()&&(f=a("<tr>"),s.push(f)),g="",d.year()<m||d.year()===m&&d.month()<n?g+=" old":(d.year()>m||d.year()===m&&d.month()>n)&&(g+=" new"),d.isSame(b({y:i.date.year(),M:i.date.month(),d:i.date.date()}))&&(g+=" active"),(L(d,"day")||!M(d))&&(g+=" disabled"),i.options.showToday===!0&&d.isSame(b(),"day")&&(g+=" today"),i.options.daysOfWeekDisabled)for(h=0;h<i.options.daysOfWeekDisabled.length;h++)if(d.day()===i.options.daysOfWeekDisabled[h]){g+=" disabled";break}f.append('<td class="day'+g+'">'+d.date()+"</td>"),c=d.date(),d.add(1,"d"),c===d.date()&&d.add(1,"d")}for(i.widget.find(".datepicker-days tbody").empty().append(s),l=i.date.year(),t=i.widget.find(".datepicker-months").find("th:eq(1)").text(m).end().find("span").removeClass("active"),l===m&&t.eq(i.date.month()).addClass("active"),o>m-1&&i.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),m+1>q&&i.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),h=0;12>h;h++)m===o&&p>h||o>m?a(t[h]).addClass("disabled"):(m===q&&h>r||m>q)&&a(t[h]).addClass("disabled");for(s="",m=10*parseInt(m/10,10),k=i.widget.find(".datepicker-years").find("th:eq(1)").text(m+"-"+(m+9)).parents("table").find("td"),i.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>m&&i.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),m+9>q&&i.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),m-=1,h=-1;11>h;h++)s+='<span class="year'+(-1===h||10===h?" old":"")+(l===m?" active":"")+(o>m||m>q?" disabled":"")+'">'+m+"</span>",m+=1;k.html(s)}},t=function(){b.locale(i.options.language);var a,c,d,e=i.widget.find(".timepicker .timepicker-hours table"),f="";if(e.parent().hide(),i.use24hours)for(a=0,c=0;6>c;c+=1){for(f+="<tr>",d=0;4>d;d+=1)f+='<td class="hour">'+O(a.toString())+"</td>",a++;f+="</tr>"}else for(a=1,c=0;3>c;c+=1){for(f+="<tr>",d=0;4>d;d+=1)f+='<td class="hour">'+O(a.toString())+"</td>",a++;f+="</tr>"}e.html(f)},u=function(){var a,b,c=i.widget.find(".timepicker .timepicker-minutes table"),d="",e=0,f=i.options.minuteStepping;for(c.parent().hide(),1===f&&(f=5),a=0;a<Math.ceil(60/f/4);a++){for(d+="<tr>",b=0;4>b;b+=1)60>e?(d+='<td class="minute">'+O(e.toString())+"</td>",e+=f):d+="<td></td>";d+="</tr>"}c.html(d)},v=function(){var a,b,c=i.widget.find(".timepicker .timepicker-seconds table"),d="",e=0;for(c.parent().hide(),a=0;3>a;a++){for(d+="<tr>",b=0;4>b;b+=1)d+='<td class="second">'+O(e.toString())+"</td>",e+=5;d+="</tr>"}c.html(d)},w=function(){if(i.date){var a=i.widget.find(".timepicker span[data-time-component]"),b=i.date.hours(),c=i.date.format("A");i.use24hours||(0===b?b=12:12!==b&&(b%=12),i.widget.find(".timepicker [data-action=togglePeriod]").text(c)),a.filter("[data-time-component=hours]").text(O(b)),a.filter("[data-time-component=minutes]").text(O(i.date.minutes())),a.filter("[data-time-component=seconds]").text(O(i.date.second()))}},x=function(c){c.stopPropagation(),c.preventDefault(),i.unset=!1;var d,e,f,g,h=a(c.target).closest("span, td, th"),j=b(i.date);if(1===h.length&&!h.is(".disabled"))switch(h[0].nodeName.toLowerCase()){case"th":switch(h[0].className){case"picker-switch":D(1);break;case"prev":case"next":f=Q.modes[i.viewMode].navStep,"prev"===h[0].className&&(f=-1*f),i.viewDate.add(f,Q.modes[i.viewMode].navFnc),s()}break;case"span":h.is(".month")?(d=h.parent().find("span").index(h),i.viewDate.month(d)):(e=parseInt(h.text(),10)||0,i.viewDate.year(e)),i.viewMode===i.minViewMode&&(i.date=b({y:i.viewDate.year(),M:i.viewDate.month(),d:i.viewDate.date(),h:i.date.hours(),m:i.date.minutes(),s:i.date.seconds()}),J(),n(j,c.type)),D(-1),s();break;case"td":h.is(".day")&&(g=parseInt(h.text(),10)||1,d=i.viewDate.month(),e=i.viewDate.year(),h.is(".old")?0===d?(d=11,e-=1):d-=1:h.is(".new")&&(11===d?(d=0,e+=1):d+=1),i.date=b({y:e,M:d,d:g,h:i.date.hours(),m:i.date.minutes(),s:i.date.seconds()}),i.viewDate=b({y:e,M:d,d:Math.min(28,g)}),s(),J(),n(j,c.type))}},y={incrementHours:function(){K("add","hours",1)},incrementMinutes:function(){K("add","minutes",i.options.minuteStepping)},incrementSeconds:function(){K("add","seconds",1)},decrementHours:function(){K("subtract","hours",1)},decrementMinutes:function(){K("subtract","minutes",i.options.minuteStepping)},decrementSeconds:function(){K("subtract","seconds",1)},togglePeriod:function(){var a=i.date.hours();a>=12?a-=12:a+=12,i.date.hours(a)},showPicker:function(){i.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),i.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){i.widget.find(".timepicker .timepicker-picker").hide(),i.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);i.use24hours||(i.date.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),i.date.hours(c),y.showPicker.call(i)},selectMinute:function(b){i.date.minutes(parseInt(a(b.target).text(),10)),y.showPicker.call(i)},selectSecond:function(b){i.date.seconds(parseInt(a(b.target).text(),10)),y.showPicker.call(i)}},z=function(c){var d=b(i.date),e=a(c.currentTarget).data("action"),f=y[e].apply(i,arguments);return A(c),i.date||(i.date=b({y:1970})),J(),w(),n(d,c.type),f},A=function(a){a.stopPropagation(),a.preventDefault()},B=function(a){27===a.keyCode&&i.hide()},C=function(c){b.locale(i.options.language);var d=a(c.target),e=b(i.date),f=b(d.val(),i.format,i.options.useStrict);f.isValid()&&!L(f)&&M(f)?(p(),i.setValue(f),n(e,c.type),J()):(i.viewDate=e,i.unset=!0,n(e,c.type),o(f))},D=function(a){a&&(i.viewMode=Math.max(i.minViewMode,Math.min(2,i.viewMode+a))),i.widget.find(".datepicker > div").hide().filter(".datepicker-"+Q.modes[i.viewMode].clsName).show()},E=function(){var b,c,d,e,f;i.widget.on("click",".datepicker *",a.proxy(x,this)),i.widget.on("click","[data-action]",a.proxy(z,this)),i.widget.on("mousedown",a.proxy(A,this)),i.element.on("keydown",a.proxy(B,this)),i.options.pickDate&&i.options.pickTime&&i.widget.on("click.togglePicker",".accordion-toggle",function(g){if(g.stopPropagation(),b=a(this),c=b.closest("ul"),d=c.find(".in"),e=c.find(".collapse:not(.in)"),d&&d.length){if(f=d.data("collapse"),f&&f.transitioning)return;d.collapse("hide"),e.collapse("show"),b.find("span").toggleClass(i.options.icons.time+" "+i.options.icons.date),i.component&&i.component.find("span").toggleClass(i.options.icons.time+" "+i.options.icons.date)}}),i.isInput?i.element.on({click:a.proxy(i.show,this),focus:a.proxy(i.show,this),change:a.proxy(C,this),blur:a.proxy(i.hide,this)}):(i.element.on({change:a.proxy(C,this)},"input"),i.component?(i.component.on("click",a.proxy(i.show,this)),i.component.on("mousedown",a.proxy(A,this))):i.element.on("click",a.proxy(i.show,this)))},F=function(){a(window).on("resize.datetimepicker"+i.id,a.proxy(m,this)),i.isInput||a(document).on("mousedown.datetimepicker"+i.id,a.proxy(i.hide,this))},G=function(){i.widget.off("click",".datepicker *",i.click),i.widget.off("click","[data-action]"),i.widget.off("mousedown",i.stopEvent),i.options.pickDate&&i.options.pickTime&&i.widget.off("click.togglePicker"),i.isInput?i.element.off({focus:i.show,change:i.change,click:i.show,blur:i.hide}):(i.element.off({change:i.change},"input"),i.component?(i.component.off("click",i.show),i.component.off("mousedown",i.stopEvent)):i.element.off("click",i.show))},H=function(){a(window).off("resize.datetimepicker"+i.id),i.isInput||a(document).off("mousedown.datetimepicker"+i.id)},I=function(){if(i.element){var b,c=i.element.parents(),d=!1;for(b=0;b<c.length;b++)if("fixed"===a(c[b]).css("position")){d=!0;break}return d}return!1},J=function(){b.locale(i.options.language);var a="";i.unset||(a=b(i.date).format(i.format)),k().val(a),i.element.data("date",a),i.options.pickTime||i.hide()},K=function(a,c,d){b.locale(i.options.language);var e;return"add"===a?(e=b(i.date),23===e.hours()&&e.add(d,c),e.add(d,c)):e=b(i.date).subtract(d,c),L(b(e.subtract(d,c)))||L(e)?void o(e.format(i.format)):("add"===a?i.date.add(d,c):i.date.subtract(d,c),void(i.unset=!1))},L=function(a,c){b.locale(i.options.language);var d=b(i.options.maxDate,i.format,i.options.useStrict),e=b(i.options.minDate,i.format,i.options.useStrict);return c&&(d=d.endOf(c),e=e.startOf(c)),a.isAfter(d)||a.isBefore(e)?!0:i.options.disabledDates===!1?!1:i.options.disabledDates[a.format("YYYY-MM-DD")]===!0},M=function(a){return b.locale(i.options.language),i.options.enabledDates===!1?!0:i.options.enabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){var c,d={},e=0;for(c=0;c<a.length;c++)f=b.isMoment(a[c])||a[c]instanceof Date?b(a[c]):b(a[c],i.format,i.options.useStrict),f.isValid()&&(d[f.format("YYYY-MM-DD")]=!0,e++);return e>0?d:!1},O=function(a){return a=a.toString(),a.length>=2?a:"0"+a},P=function(){if(i.options.pickDate&&i.options.pickTime){var a="";return a='<div class="bootstrap-datetimepicker-widget'+(i.options.sideBySide?" timepicker-sbs":"")+(i.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',a+=i.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+Q.template+'</div><div class="col-sm-6 timepicker">'+R.getTemplate()+"</div></div>":'<ul class="list-unstyled"><li'+(i.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+Q.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+i.options.icons.time+'"></span></a></li><li'+(i.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+R.getTemplate()+"</div></li></ul>",a+="</div>"}return i.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+R.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+Q.template+"</div></div>"},Q={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="picker-switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},R={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};Q.template='<div class="datepicker-days"><table class="table-condensed">'+Q.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+Q.headTemplate+Q.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+Q.headTemplate+Q.contTemplate+"</table></div>",R.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+i.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(i.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+i.options.icons.up+'"></span></a>':"")+"</td>"+(i.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+i.options.icons.up+'"></span></a></td>':"")+(i.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+R.hourTemplate+'</td> <td class="separator">:</td><td>'+(i.options.useMinutes?R.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(i.options.useSeconds?'<td class="separator">:</td><td>'+R.secondTemplate+"</td>":"")+(i.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+i.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(i.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+i.options.icons.down+'"></span></a>':"")+"</td>"+(i.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+i.options.icons.down+'"></span></a></td>':"")+(i.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(i.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},i.destroy=function(){G(),H(),i.widget.remove(),i.element.removeData("DateTimePicker"),i.component&&i.component.removeData("DateTimePicker")},i.show=function(a){if(i.options.useCurrent&&""===k().val()){if(1!==i.options.minuteStepping){var c=b(),d=i.options.minuteStepping;c.minutes(Math.round(c.minutes()/d)*d%60).seconds(0),i.setValue(c.format(i.format))}else i.setValue(b().format(i.format));n("",a.type)}a&&"click"===a.type&&i.isInput&&i.widget.hasClass("picker-open")||(i.widget.hasClass("picker-open")?(i.widget.hide(),i.widget.removeClass("picker-open")):(i.widget.show(),i.widget.addClass("picker-open")),i.height=i.component?i.component.outerHeight():i.element.outerHeight(),m(),i.element.trigger({type:"dp.show",date:b(i.date)}),F(),a&&A(a))},i.disable=function(){var a=i.element.find("input");a.prop("disabled")||(a.prop("disabled",!0),G())},i.enable=function(){var a=i.element.find("input");a.prop("disabled")&&(a.prop("disabled",!1),E())},i.hide=function(){var a,c,d=i.widget.find(".collapse");for(a=0;a<d.length;a++)if(c=d.eq(a).data("collapse"),c&&c.transitioning)return;i.widget.hide(),i.widget.removeClass("picker-open"),i.viewMode=i.startViewMode,D(),i.element.trigger({type:"dp.hide",date:b(i.date)}),H()},i.setValue=function(a){b.locale(i.options.language),a?i.unset=!1:(i.unset=!0,J()),a=b.isMoment(a)?a.locale(i.options.language):a instanceof Date?b(a):b(a,i.format,i.options.useStrict),a.isValid()?(i.date=a,J(),i.viewDate=b({y:i.date.year(),M:i.date.month()}),s(),w()):o(a)},i.getDate=function(){return i.unset?null:b(i.date)},i.setDate=function(a){var c=b(i.date);i.setValue(a?a:null),n(c,"function")},i.setDisabledDates=function(a){i.options.disabledDates=N(a),i.viewDate&&p()},i.setEnabledDates=function(a){i.options.enabledDates=N(a),i.viewDate&&p()},i.setMaxDate=function(a){void 0!==a&&(i.options.maxDate=b.isMoment(a)||a instanceof Date?b(a):b(a,i.format,i.options.useStrict),i.viewDate&&p())},i.setMinDate=function(a){void 0!==a&&(i.options.minDate=b.isMoment(a)||a instanceof Date?b(a):b(a,i.format,i.options.useStrict),i.viewDate&&p())},j()};a.fn.datetimepicker=function(b){return this.each(function(){var c=a(this),e=c.data("DateTimePicker");e||c.data("DateTimePicker",new d(this,b))})},a.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,minuteStepping:1,minDate:b({y:1900}),maxDate:b().add(100,"y"),showToday:!0,collapse:!0,language:b.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),define("browse/property/property.datetime.edit",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync","datetimepicker"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/datetimePropertyEdit",tagName:"div",className:"property",events:{"click .addDataType":"addDataType","click .removeDataType":"removeDataType","click button.close":"removeHandler"},initialize:function(){c.bindAll(this),c.extend(this,e.Events)},beforeRender:function(){console.log("rendering EditDateTimePropView");var a=this.model.get("@value"),b=[];a instanceof Array?b=a:b.push(a),this.model.set("@value",b)},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip(),this.$el.find("div.input-group.date").datetimepicker({language:"en",maskInput:!0}),this.trigger("component-loaded")},getPropertyType:function(){return"DatatypeProperty"},getPropertyName:function(){return this.model.id},getPropertyLabel:function(){return this.model.getLabel()},getPropertyValue:function(){var c=[];return this.$el.find(".dataTypeIn").each(function(){var d=b(this).val()||"";d=d.trim(),d&&c.push({"@value":d,"@type":a.vocabulary.xsd.DATETIME})}),1===c.length?c[0]:c},highlightError:function(){this.$el.addClass("highlight-error")},addDataType:function(a){a.preventDefault();var b='<li><div class="row">  <form class="form-inline">    <div class="form-group" style="width: 83%;">      <div class="input-group date" data-date-format="YYYY-MM-DD HH:mm:ss">        <input type="text" class="form-control dataTypeIn propertyInput" />        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>        </span>      </div>    </div>    <button class="btn btn-default removeDataType" style="width: 10%;"><i class="icon-remove" /></button>  </form></div></li>';this.$el.find("ul").prepend(b),this.$el.find("div.input-append.date").first().datetimepicker({language:"en",maskInput:!0})},removeDataType:function(a){a.preventDefault(),b(a.target).parents("li").remove()},removeHandler:function(){this.trigger("closing",decodeURIComponent(this.model.id)),this.remove()}});return f}),define("browse/property/property.object.display",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/objectPropertyDisplay",className:"object-display",beforeRender:function(){console.log("rendering ObjectPropDisplayView")},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.toJSON()}});return f}),define("browse/property/property.object.notfound",["egad","jquery","underscore","string","backbone","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f=e.Layout.extend({template:"browse/objectPropertyDisplayNotFound",beforeRender:function(){console.log("rendering ObjectPropDisplayNotFoundView");var a=decodeURIComponent(this.model.id),b=d(a).startsWith("http");this.model.set("@isExternal",b),b&&this.model.set("@isImage",c.isImage(a))},serialize:function(){return this.model.toJSON()}});return f}),define("browse/property/property.object",["egad","jquery","underscore","string","backbone","browse/property/property.object.display","browse/property/property.object.notfound","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f,g){var h=e.Layout.extend({template:"browse/objectProperty",tagName:"div",className:"property",beforeRender:function(){var b=this;console.log("rendering ObjectPropView");var d=this.model.get("@value")["@id"],e=new a.model.Resource({"@id":encodeURIComponent(d)});e.fetch({async:!1}).done(function(a){c.keys(a).length>0?b.insertView(".obj-prop-container",new f({model:e})):b.insertView(".obj-prop-container",new g({model:e}))}).fail(function(){b.insertView(".obj-prop-container",new g({model:e}))})},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip()},highlight:function(){this.$el.addClass("highlight")}});return h}),define("browse/property/property.object.display.edit",["egad","jquery","underscore","string","backbone","metadata/metadata","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f){var g=e.Layout.extend({template:"browse/objectPropertyDisplayEdit",className:"object-display",range:"",events:{"click #btnNewIndividual":"newIndividualHandler"},initialize:function(a){c.bindAll(this),a=c.defaults(a,{showNew:!1,range:""}),this.showNew=a.showNew,this.range=a.range
},beforeRender:function(){console.log("rendering ObjectPropDisplayView")},afterRender:function(){var e=this,g={placeholder:"Select a value",minimumInputLength:3,multiple:!0,initSelection:function(c,e){var f=[];b(c.val().split(",")).each(function(){var b=this,c=new a.model.Resource({"@id":encodeURIComponent(b)});c.fetch({async:!0}).done(function(){f.push(c.getLabel()?{id:b,text:c.getLabel()}:{id:b,text:d(b).truncate(70)}),e(f)}).fail(function(){f.push({id:b,text:d(b).truncate(70)}),e(f)})})},query:function(g){if(g.term&&null!==g.term&&g.term.length>0){var h=g.term?d(g.term).trim().s:"",i=h+"*?limit=10&offset="+10*(g.page-1);if(e.range){var j="&type="+encodeURIComponent(e.range);i+=j}var k=a.ajax.searchUrl(i),l=[],m=!1;b.ajax({url:k+"&searchable="+f.IS_SEARCHABLE,dataType:"json",headers:{Accept:"application/json"}}).done(function(a){a.results&&(c.each(a.results,function(a){l.push(e.getSelectOption(a.uri))}),10==a.results&&(m=!0));var b={more:m,results:l};g.callback(b)})}else{var n={more:!1,results:[]};g.callback(n)}},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]};this.$el.find(".select2").select2(g),this.trigger("select2-loaded")},getSelectOption:function(b){var c=new a.model.Resource({"@id":encodeURIComponent(b)});return c.fetch({async:!1}),c&&c.getLabel()?{id:b,text:c.getLabel()}:{id:b,text:d(b).truncate(70)}},serialize:function(){return this.model?(this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@showNew",this.showNew),this.model.toJSON()):{"@showNew":this.showNew}},getPropertyValue:function(){return this.$el.find(".select2").select2("val")},newIndividualHandler:function(a){a.preventDefault();var b=this.range;b||(b="owl:Thing"),this.trigger("request-new",b)}});return g}),define("browse/property/property.object.edit",["egad","jquery","underscore","string","backbone","browse/property/property.object.display.edit","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f){var g=e.Layout.extend({template:"browse/objectPropertyEdit",tagName:"div",className:"property",events:{"click button.close":"removeHandler"},initialize:function(a){c.bindAll(this),c.extend(this,e.Events),a=c.defaults(a,{showNew:!1}),this.showNew=a.showNew},beforeRender:function(){console.log("rendering ObjectPropView");var b,c=this.model.get("@value");if(c instanceof Array){for(var d=[],e=0;e<c.length;e++)d.push(c[e]["@id"]);b=d}else b=c["@id"];var g,h;if(this.model.has("rdfs:range")&&a.config.get("modules").browse.enforceRange&&(h=this.model.get("rdfs:range")["@id"]),b){b=encodeURIComponent(b);var h,i=new a.model.Resource({"@id":b});this.model.has("rdfs:range")&&a.config.get("modules").browse.enforceRange&&(h=this.model.get("rdfs:range")["@id"]),g=new f({model:i,showNew:this.showNew,range:h})}else g=new f({showNew:this.showNew,range:h});g.bind("select2-loaded",function(){this.trigger("component-loaded")},this),this.insertView(".obj-prop-container",g)},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip()},getPropertyType:function(){return"ObjectProperty"},getPropertyName:function(){return this.model.id},getPropertyLabel:function(){return this.model.getLabel()},getPropertyValue:function(){for(var b=this.getView().getPropertyValue()||[],d=[],e=0;e<b.length;e++){var f={"@id":c.expandURI(b[e],a.config.namespaces())};d.push(f)}return d},highlightError:function(){this.$el.addClass("highlight-error")},removeHandler:function(){this.trigger("closing",decodeURIComponent(this.model.id)),this.remove()}});return g}),define("browse/property/property.object.array",["egad","jquery","underscore","string","backbone","browse/property/property.object.display","browse/property/property.object.notfound","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f,g){var h=e.Layout.extend({template:"browse/objectPropertyArray",tagName:"div",className:"property",originalValues:[],valWindow:10,loadMoreTimes:1,events:{"click .btn-more":"loadMore"},initialize:function(){this.model&&(this.originalValues=this.model.get("@value").slice(0))},beforeRender:function(){function b(a){return function(b){c.keys(b).length>0?e.insertView(".obj-prop-container",new f({model:a})):e.insertView(".obj-prop-container",new g({model:a}))}}function d(a){return function(){e.insertView(".obj-prop-container",new g({model:a,tagName:"li"}))}}var e=this;console.log("rendering ObjectPropArrayView"),this.originalValues.length>this.valWindow&&this.model.set("@value",this.originalValues.slice(0,this.valWindow*this.loadMoreTimes));var h=this.model.get("@value");this.model.set("@showMore",h.length>=this.valWindow&&h.length<this.originalValues.length);for(var i=0;i<h.length;i++){var j=new a.model.Resource({"@id":encodeURIComponent(h[i]["@id"])});j.fetch({async:!1}).done(b(j)).fail(d(j))}},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.set("@egadComment",this.model.getComment()),this.model.toJSON()},afterRender:function(){this.$el.find(".property_label").tooltip()},highlight:function(){this.$el.addClass("highlight")},loadMore:function(a){a.preventDefault(),this.loadMoreTimes+=1,this.render()}});return h}),define("browse/properties",["browse/property/property.datatype","browse/property/property.datatype.array","browse/property/property.datatype.edit","browse/property/property.datetime.edit","browse/property/property.object","browse/property/property.object.edit","browse/property/property.object.display","browse/property/property.object.display.edit","browse/property/property.object.array","browse/property/property.object.notfound"],function(a,b,c,d,e,f,g,h,i,j){return{Views:{DatatypePropView:a,DatatypePropArrayView:b,EditDatatypePropView:c,EditDateTimePropView:d,ObjectPropView:e,EditObjectPropView:f,ObjectPropDisplayView:g,EditObjectPropDisplayView:h,ObjectPropArrayView:i,ObjectPropDisplayNotFoundView:j}}}),function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function c(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function d(a){function b(a){return O[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function e(a,b){for(var c=0,d=b.length;d>c;c+=1)if(g(a,b[c]))return c;return-1}function f(){var b=a(N);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function g(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function h(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function i(a){return a.outerWidth(!1)-a.width()}function j(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function k(c){c.on("mousemove",function(c){var d=M;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function l(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function m(a,b){var c=l(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){e(a.target,b.get())>=0&&c(a)})}function n(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus();var e=c.offsetWidth>0||c.offsetHeight>0;e&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function o(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function p(a){a.preventDefault(),a.stopPropagation()}function q(a){a.preventDefault(),a.stopImmediatePropagation()}function r(b){if(!J){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);J=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),J.attr("class","select2-sizer"),a("body").append(J)}return J.text(b.val()),J.width()}function s(b,c,d){var e,f,g=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&g.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(f=d(this),f&&g.push(f))})),b.attr("class",g.join(" "))}function t(a,b,c,e){var f=d(a.toUpperCase()).indexOf(d(b.toUpperCase())),g=b.length;return 0>f?void c.push(e(a)):(c.push(e(a.substring(0,f))),c.push("<span class='select2-match'>"),c.push(e(a.substring(f,f+g))),c.push("</span>"),void c.push(e(a.substring(f+g,a.length))))}function u(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function v(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function w(b){var c,d,e=b,f=function(a){return""+a.text};a.isArray(e)&&(d=e,e={results:d}),a.isFunction(e)===!1&&(d=e,e=function(){return d});var g=e();return g.text&&(f=g.text,a.isFunction(f)||(c=g.text,f=function(a){return a[c]})),function(b){var c,d=b.term,g={results:[]};return""===d?void b.callback(e()):(c=function(e,g){var h,i;if(e=e[0],e.children){h={};for(i in e)e.hasOwnProperty(i)&&(h[i]=e[i]);h.children=[],a(e.children).each2(function(a,b){c(b,h.children)}),(h.children.length||b.matcher(d,f(h),e))&&g.push(h)}else b.matcher(d,f(e),e)&&g.push(e)},a(e().results).each2(function(a,b){c(b,g.results)}),void b.callback(g))}}function x(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function y(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function z(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function A(b){var c=0;return a.each(b,function(a,b){b.children?c+=A(b.children):c++}),c}function B(a,c,d,e){var f,h,i,j,k,l=a,m=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=e.tokenSeparators.length;j>i&&(k=e.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(f=a.substring(0,h),a=a.substring(h+k.length),f.length>0&&(f=e.createSearchChoice.call(this,f,c),f!==b&&null!==f&&e.id(f)!==b&&null!==e.id(f))){for(m=!1,i=0,j=c.length;j>i;i++)if(g(e.id(f),e.id(c[i]))){m=!0;break}m||d(f)}}return l!==a?a:void 0}function C(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function D(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var E,F,G,H,I,J,K,L,M={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},N="<div class='select2-measure-scrollbar'></div>",O={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"};K=a(document),I=function(){var a=1;return function(){return a++}}(),F=D(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,g=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+I()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(z(c.containerCss,this.opts.element)),this.container.addClass(z(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=d=this.container.find(g),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),k(this.results),this.dropdown.on("mousemove-filtered",g,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",g,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",g,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",g,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),m(80,this.results),this.dropdown.on("scroll-debounced",g,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),p(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),p(a))}),j(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",g,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),L=L||f(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:g(a.attr("locked"),"locked")||g(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,i,j=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this.liveRegion;(g=function(d,e,k){var l,m,n,o,p,q,r,s,t,u;d=c.sortResults(d,e,f);var v=[];for(l=0,m=d.length;m>l;l+=1)n=d[l],p=n.disabled===!0,o=!p&&h(n)!==b,q=n.children&&n.children.length>0,r=a("<li></li>"),r.addClass("select2-results-dept-"+k),r.addClass("select2-result"),r.addClass(o?"select2-result-selectable":"select2-result-unselectable"),p&&r.addClass("select2-disabled"),q&&r.addClass("select2-result-with-children"),r.addClass(j.opts.formatResultCssClass(n)),r.attr("role","presentation"),s=a(document.createElement("div")),s.addClass("select2-result-label"),s.attr("id","select2-result-label-"+I()),s.attr("role","option"),u=c.formatResult(n,s,f,j.opts.escapeMarkup),u!==b&&(s.html(u),r.append(s)),q&&(t=a("<ul></ul>"),t.addClass("select2-result-sub"),g(n.children,t,k+1),r.append(t)),r.data("select2-data",n),v.push(r[0]);e.append(v),i.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var c,e,f,g={results:[],more:!1},h=a.term;f=function(b,c){var d;b.is("option")?a.matcher(h,b.text(),b)&&c.push(j.optionToData(b)):b.is("optgroup")&&(d=j.optionToData(b),b.children().each2(function(a,b){f(b,d.children)}),d.children.length>0&&c.push(d))},c=d.children(),this.getPlaceholder()!==b&&c.length>0&&(e=this.getPlaceholderOption(),e&&(c=c.not(e))),c.each2(function(a,b){f(b,g.results)}),a.callback(g)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(i=c.element.data("ajax-url"),i&&i.length>0&&(c.ajax.url=i),c.query=v.call(c.element,c.ajax)):"data"in c?c.query=w(c.data):"tags"in c&&(c.query=x(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(h(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return g(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var c,d=this.opts.element,e=this;d.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=d.prop("disabled");a===b&&(a=!1),this.enable(!a);var c=d.prop("readonly");c===b&&(c=!1),this.readonly(c),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass,this.opts.element)),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass,this.opts.element))}),d.length&&d[0].attachEvent&&d.each(function(){this.attachEvent("onpropertychange",e._sync)}),c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,c!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(d.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var b,c,d,e,f,g=this.dropdown,h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),l=a(window),m=l.width(),n=l.height(),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,s=p>=q+k,t=h.top-k>=l.scrollTop(),u=g.outerWidth(!1),v=o>=r+u,w=g.hasClass("select2-drop-above");w?(c=!0,!t&&s&&(d=!0,c=!1)):(c=!1,!s&&t&&(d=!0,c=!0)),d&&(g.hide(),h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,u=g.outerWidth(!1),v=o>=r+u,g.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(f=a(".select2-results",g)[0],g.addClass("select2-drop-auto-width"),g.css("width",""),u=g.outerWidth(!1)+(f.scrollHeight===f.clientHeight?0:L.width),u>j?j=u:u=j,k=g.outerHeight(!1),v=o>=r+u):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b=this.body.offset(),q-=b.top,r-=b.left),v||(r=h.left+this.container.outerWidth(!1)-u),e={left:r,width:j},c?(e.top=h.top-k,e.bottom="auto",this.container.addClass("select2-drop-above"),g.addClass("select2-drop-above")):(e.top=q,e.bottom="auto",this.container.removeClass("select2-drop-above"),g.removeClass("select2-drop-above")),e=a.extend(e,z(this.opts.dropdownCss,this.opts.element)),g.css(e)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),K.on("mousemove.select2Event",function(a){M.x=a.pageX,M.y=a.pageY}),!0):!1},opening:function(){var b,d=this.containerEventName,e="scroll."+d,f="resize."+d,g="orientationchange."+d;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),b=a("#select2-drop-mask"),0==b.length&&(b=a(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body),b.on("mousedown touchstart click",function(d){c(b);var e,f=a("#select2-drop");f.length>0&&(e=f.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),d.preventDefault(),d.stopPropagation())})),this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),b.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");
var h=this;this.container.parents().add(window).each(function(){a(this).on(f+" "+e+" "+g,function(){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),K.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i,j=this.results;if(c=this.highlight(),!(0>c)){if(0==c)return void j.scrollTop(0);b=this.findHighlightableChoices().find(".select2-result-label"),d=a(b[c]),i=(d.offset()||{}).top||0,e=i+d.outerHeight(!0),c===b.length-1&&(h=j.find("li.select2-more-results"),h.length>0&&(e=h.offset().top+h.outerHeight(!0))),f=j.offset().top+j.outerHeight(!0),e>f&&j.scrollTop(j.scrollTop()+(e-f)),g=i-j.offset().top,0>g&&"none"!=d.css("display")&&j.scrollTop(j.scrollTop()+g)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var c,d,f=this.findHighlightableChoices();return 0===arguments.length?e(f.filter(".select2-highlighted")[0],f.get()):(b>=f.length&&(b=f.length-1),0>b&&(b=0),this.removeHighlight(),c=a(f[b]),c.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",c.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(c.text()),d=c.data("select2-data"),void(d&&this.opts.element.trigger({type:"select2-highlight",val:this.id(d),choice:d})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).text(z(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},tokenize:function(){},updateResults:function(c){function d(){j.removeClass("select2-active"),m.positionDropdown(),m.liveRegion.text(k.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?k.text():m.opts.formatMatches(k.find(".select2-result-selectable").length))}function e(a){k.html(a),d()}var f,h,i,j=this.search,k=this.results,l=this.opts,m=this,n=j.val(),o=a.data(this.container,"select2-last-term");if((c===!0||!o||!g(n,o))&&(a.data(this.container,"select2-last-term",n),c===!0||this.showSearchInput!==!1&&this.opened())){i=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1&&(f=this.data(),a.isArray(f)&&f.length>=p&&y(l.formatSelectionTooBig,"formatSelectionTooBig")))return void e("<li class='select2-selection-limit'>"+z(l.formatSelectionTooBig,l.element,p)+"</li>");if(j.val().length<l.minimumInputLength)return e(y(l.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+z(l.formatInputTooShort,l.element,j.val(),l.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(l.maximumInputLength&&j.val().length>l.maximumInputLength)return void e(y(l.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+z(l.formatInputTooLong,l.element,j.val(),l.maximumInputLength)+"</li>":"");l.formatSearching&&0===this.findHighlightableChoices().length&&e("<li class='select2-searching'>"+z(l.formatSearching,l.element)+"</li>"),j.addClass("select2-active"),this.removeHighlight(),h=this.tokenize(),h!=b&&null!=h&&j.val(h),this.resultsPage=1,l.query({element:l.element,term:j.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(f){var h;if(i==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(f.hasError!==b&&y(l.formatAjaxError,"formatAjaxError"))return void e("<li class='select2-ajax-error'>"+z(l.formatAjaxError,l.element,f.jqXHR,f.textStatus,f.errorThrown)+"</li>");if(this.context=f.context===b?null:f.context,this.opts.createSearchChoice&&""!==j.val()&&(h=this.opts.createSearchChoice.call(m,j.val(),f.results),h!==b&&null!==h&&m.id(h)!==b&&null!==m.id(h)&&0===a(f.results).filter(function(){return g(m.id(this),m.id(h))}).length&&this.opts.createSearchChoicePosition(f.results,h)),0===f.results.length&&y(l.formatNoMatches,"formatNoMatches"))return void e("<li class='select2-no-results'>"+z(l.formatNoMatches,l.element,j.val())+"</li>");k.empty(),m.opts.populateResults.call(this,k,f.results,{term:j.val(),page:this.resultsPage,context:null}),f.more===!0&&y(l.formatLoadMore,"formatLoadMore")&&(k.append("<li class='select2-more-results'>"+l.escapeMarkup(z(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,c),d(),this.opts.element.trigger({type:"select2-loaded",items:f})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){n(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),G=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var b,d,e=this.container,f=this.dropdown,g=I();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+g),this.focusser.attr("aria-labelledby","select2-chosen-"+g),this.results.attr("id","select2-results-"+g),this.search.attr("aria-owns","select2-results-"+g),this.focusser.attr("id","s2id_autogen"+g),d=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(d.text()).attr("for",this.focusser.attr("id"));var h=this.opts.element.attr("title");this.opts.element.attr("title",h||d.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)return void p(a);switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return void this.selectHighlighted({noFocus:!0});case E.ESC:return this.cancel(a),void p(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.ESC){if(this.opts.openOnEnter===!1&&a.which===E.ENTER)return void p(a);if(a.which==E.DOWN||a.which==E.UP||a.which==E.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void p(a)}return a.which==E.DELETE||a.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(a)):void 0}})),j(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),q(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(d){c(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(d)})),f.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){p(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(c,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var h=g(e,b.id(d));return h&&(f=d),h},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return g(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var f=this.opts.minimumResultsForSearch;f>=0&&this.showSearch(A(a.results)>=f)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var c,d,e=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),e.empty(),null!==a&&(c=this.opts.formatSelection(a,e,this.opts.escapeMarkup)),c!==b&&e.append(c),d=this.opts.formatSelectionCssClass(a,e),d!==b&&e.addClass(d),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),H=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=h(c.val(),b.separator),f=[];b.query({matcher:function(c,d,h){var i=a.grep(e,function(a){return g(a,b.id(h))}).length;return i&&f.push(h),i},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var h=e[c],i=0;i<f.length;i++){var j=f[i];if(g(h,b.id(j))){a.push(j),f.splice(i,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var b,c=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(c);var d=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+I()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var c=b.find(".select2-search-choice-focus"),d=c.prev(".select2-search-choice:not(.select2-locked)"),e=c.next(".select2-search-choice:not(.select2-locked)"),f=o(this.search);if(c.length&&(a.which==E.LEFT||a.which==E.RIGHT||a.which==E.BACKSPACE||a.which==E.DELETE||a.which==E.ENTER)){var g=c;return a.which==E.LEFT&&d.length?g=d:a.which==E.RIGHT?g=e.length?e:null:a.which===E.BACKSPACE?this.unselect(c.first())&&(this.search.width(10),g=d.length?d:e):a.which==E.DELETE?this.unselect(c.first())&&(this.search.width(10),g=e.length?e:null):a.which==E.ENTER&&(g=null),this.selectChoice(g),p(a),void(g&&g.length||this.open())}if((a.which===E.BACKSPACE&&1==this.keydowns||a.which==E.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(b.find(".select2-search-choice:not(.select2-locked)").last()),void p(a);if(this.selectChoice(null),this.opened())switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case E.ESC:return this.cancel(a),void p(a)}if(a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.BACKSPACE&&a.which!==E.ESC){if(a.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)&&p(a),a.which===E.ENTER&&p(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",c,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",c,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],f=this;a(b).each(function(){e(f.id(this),c)<0&&(c.push(f.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d,e,f=!c.locked,g=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),h=a("<li class='select2-search-choice select2-locked'><div></div></li>"),i=f?g:h,j=this.id(c),k=this.getVal();d=this.opts.formatSelection(c,i.find("div"),this.opts.escapeMarkup),d!=b&&i.find("div").replaceWith("<div>"+d+"</div>"),e=this.opts.formatSelectionCssClass(c,i.find("div")),e!=b&&i.addClass(e),f&&i.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",c),i.insertBefore(this.searchContainer),k.push(j),this.setVal(k)},unselect:function(b){var c,d,f=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(c=b.data("select2-data")){var g=a.Event("select2-removing");if(g.val=this.id(c),g.choice=c,this.opts.element.trigger(g),g.isDefaultPrevented())return!1;for(;(d=e(this.id(c),f))>=0;)f.splice(d,1),this.setVal(f),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),f=this.results.find(".select2-result"),g=this.results.find(".select2-result-with-children"),h=this;f.each2(function(a,b){var c=h.id(b.data("select2-data"));e(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),g.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&h.highlight(0),!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&y(h.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+z(h.opts.formatNoMatches,h.opts.element,h.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-i(this.search)},resizeSearch:function(){var a,b,c,d,e,f=i(this.search);a=r(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),h(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){e(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)g(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d,e,f=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(e=this.data(),b||(b=[]),d=a.map(b,function(a){return f.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(e,this.data())),void 0)}}),a.fn.select2=function(){var c,d,f,g,h,i=Array.prototype.slice.call(arguments,0),j=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],k=["opened","isFocused","container","dropdown"],l=["val","data"],m={search:"externalSearch"};return this.each(function(){if(0===i.length||"object"==typeof i[0])c=0===i.length?{}:a.extend({},i[0]),c.element=a(this),"select"===c.element.get(0).tagName.toLowerCase()?h=c.element.prop("multiple"):(h=c.multiple||!1,"tags"in c&&(c.multiple=h=!0)),d=h?new window.Select2["class"].multi:new window.Select2["class"].single,d.init(c);
else{if("string"!=typeof i[0])throw"Invalid arguments to select2 plugin: "+i;if(e(i[0],j)<0)throw"Unknown method: "+i[0];if(g=b,d=a(this).data("select2"),d===b)return;if(f=i[0],"container"===f?g=d.container:"dropdown"===f?g=d.dropdown:(m[f]&&(f=m[f]),g=d[f].apply(d,i.slice(1))),e(i[0],k)>=0||e(i[0],l)>=0&&1==i.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return t(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return d(""+b).toUpperCase().indexOf(d(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:B,escapeMarkup:u,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more resultsâ¦"},formatSearching:function(){return"Searchingâ¦"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:w,tags:x},util:{debounce:l,markMatch:t,escapeMarkup:u,stripDiacritics:d},"class":{"abstract":F,single:G,multi:H}}}}(jQuery),define("select2",["jquery","bootstrap"],function(){}),define("browse/owlclass",["underscore","string","backbone","egad","metadata/metadata","bootstrap","underscore.mixins","select2","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e){var f={};return f.DisplayView=c.Layout.extend({template:"browse/classesList",className:"resourceType",serialize:function(){var b=[];return this.collection?(b=this.collection.filter(function(b){var c=a.expandURI(b.id,d.config.namespaces());return c!=a.expandURI("owl:Thing",d.config.namespaces())&&c!=a.expandURI("owl:NamedIndividual",d.config.namespaces())}),this.collection.reset(b),this.collection.toJSON()):b}}),f.EditView=c.Layout.extend({template:"browse/classesListEdit",className:"resourceType",initialize:function(){a.bindAll(this),a.extend(this,c.Events)},beforeRender:function(){var c=this;this.selectOptions={placeholder:"Select a class",minimumInputLength:3,multiple:!0,initSelection:function(a,c){var e=[];$(a.val().split(",")).each(function(){var a=this,f=new d.model.Resource({"@id":encodeURIComponent(a)});f.fetch({async:!0}).done(function(){e.push(f.getLabel()?{id:a,text:f.getLabel()}:{id:a,text:b(a).truncate(70)}),c(e)}).fail(function(){e.push({id:a,text:b(a).truncate(70)}),c(e)})})},query:function(f){if(f.term&&null!==f.term&&f.term.length>0){var g=f.term?b(f.term).trim().s:"",h=g+"*?limit=10&offset="+10*(f.page-1);if(c.range){var i="&type="+encodeURIComponent(c.range);h+=i}var j=d.ajax.searchUrl("class",h),k=[],l=!1;$.ajax({url:j+"&searchable="+e.IS_SEARCHABLE,dataType:"json",headers:{Accept:"application/json"}}).done(function(b){b.results&&(a.each(b.results,function(a){k.push(c.getSelectOption(a.uri))}),10==b.results&&(l=!0));var d={more:l,results:k};f.callback(d)})}else{var m={more:!1,results:[]};f.callback(m)}},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]}},serialize:function(){if(this.collection){var a=this.collection.map(function(a){return a.id});return{types:a.join(",")}}return{}},afterRender:function(){this.$selectIn=this.$el.find("input.select2"),this.$selectIn.select2(this.selectOptions),this.$selectIn.on("change",this.inputChangedHandler)},setClasses:function(a){this.$selectIn&&(this.$selectIn.select2("val",a),this.trigger("change",{val:a}))},getSelectOption:function(a){var c=new d.model.Resource({"@id":encodeURIComponent(a)});return c.fetch({async:!1}),c&&c.getLabel()?{id:a,text:c.getLabel()}:{id:a,text:b(a).truncate(70)}},inputChangedHandler:function(a){this.trigger("change",a)},getSelectedClasses:function(){for(var b=this.$el.find("input.select2").select2("val"),c=b||[],e=[],f=0;f<c.length;f++)e.push(a.expandURI(c[f],d.config.namespaces()));return e}}),f}),define("browse/resource.modal",["underscore","egad","backbone","metadata/metadata","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d){var e={};return e.DeleteModal=c.Layout.extend({template:"browse/deleteModal",tagName:"div",events:{"click #btnUndo":"undoDelete","click #btnOk":"deleteInstance"},initialize:function(){a.bindAll(this),this.undoCallback="function"==typeof this.options.undoCallback?this.options.undoCallback:$.noop,this.deleteCallback="function"==typeof this.options.deleteCallback?this.options.deleteCallback:$.noop},serialize:function(){return this.model?this.model.toJSON():void 0},afterRender:function(){this.$el.find("#deleteModal").modal({keyboard:!0,show:!0})},show:function(){this.$el.find("#deleteModal").modal("show")},hide:function(){this.$el.find("#deleteModal").modal("hide")},toggle:function(){this.$el.find("#deleteModal").modal("toggle")},undoDelete:function(a){a&&a.preventDefault(),this.undoCallback()},deleteInstance:function(a){a&&a.preventDefault(),this.deleteCallback()}}),e.AddAttributeModal=c.Layout.extend({template:"browse/addAttributeModal",tagName:"div",events:{"click #btnCancelAdd":"clickCancelAdd","click #btnSelect":"clickSelect"},initialize:function(b){a.bindAll(this),this.domain=b.domain||"",this.cancelCallback="function"==typeof this.options.cancelCallback?this.options.cancelCallback:$.noop,this.selectCallback="function"==typeof this.options.selectCallback?this.options.selectCallback:$.noop},serialize:function(){return this.model?this.model.toJSON():void 0},afterRender:function(){var c=this;this.selectPropsOpts={minimumInputLength:3,placeholder:"Select a property",query:function(e){var f=c.domain?"&domain="+encodeURIComponent(c.domain):"";if(e.term&&null!==e.term&&e.term.length>0){var g=b.ajax.searchUrl("property",e.term+"?limit=10&offset="+10*(e.page-1)+f),h=[],i=!1;$.ajax({url:g+"&searchable="+d.IS_SEARCHABLE,dataType:"json",headers:{Accept:"application/json"}}).done(function(c){c.results&&(a.each(c.results,function(c){var d={id:c.uri,text:c.label?c.label:a.compactURI(c.uri,b.config.namespaces())};"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==d.id&&h.push(d)}),10==c.results.length&&(i=!0));var d={more:i,results:h};e.callback(d)})}else{var j={more:!1,results:[]};e.callback(j)}},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]};var e=this.$el.find(".propField");e.select2(this.selectPropsOpts);var f=this.$el.find("#addAttributeModal");f.modal({keyboard:!0,show:!0}),f.on("shown.bs.modal",function(){e.select2("open")})},show:function(){this.$el.find("#addAttributeModal").modal("show")},hide:function(){this.$el.find("#addAttributeModal").modal("hide")},toggle:function(){this.$el.find("#addAttributeModal").modal("toggle")},clickCancelAdd:function(a){a&&a.preventDefault(),this.cancelCallback()},clickSelect:function(a){a&&a.preventDefault();var b=this.$el.find("input.propField").val();this.selectCallback(b)}}),e.SelectClassModal=c.Layout.extend({template:"browse/selectClassModal",tagName:"div",events:{"click #btnCancelAdd":"clickCancelAdd","click #btnSelect":"clickSelect"},initialize:function(){a.bindAll(this),this.cancelCallback="function"==typeof this.options.cancelCallback?this.options.cancelCallback:$.noop,this.selectCallback="function"==typeof this.options.selectCallback?this.options.selectCallback:$.noop},serialize:function(){return this.model?this.model.toJSON():void 0},afterRender:function(){this.selectPropsOpts={minimumInputLength:3,placeholder:"Select a class",query:function(c){if(c.term&&null!==c.term&&c.term.length>0){var e=b.ajax.searchUrl("class",c.term+"?limit=10&offset="+10*(c.page-1)),f=[],g=!1;$.ajax({url:e+"&searchable="+d.IS_SEARCHABLE,dataType:"json",headers:{Accept:"application/json"}}).done(function(d){d.results&&(a.each(d.results,function(c){var d={id:c.uri,text:c.label?c.label:a.compactURI(c.uri,b.config.namespaces())};f.push(d)}),10==d.results.length&&(g=!0));var e={more:g,results:f};c.callback(e)})}else{var h={more:!1,results:[]};c.callback(h)}},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]};var c=this.$el.find(".selectedClass");c.select2(this.selectPropsOpts);var e=this.$el.find("#selectClassModal");e.modal({keyboard:!1,show:!0}),e.on("shown.bs.modal",function(){c.select2("open")})},show:function(){this.$el.find("#selectClassModal").modal("show")},hide:function(){this.$el.find("#selectClassModal").modal("hide")},toggle:function(){this.$el.find("#selectClassModal").modal("toggle")},clickCancelAdd:function(a){a&&a.preventDefault(),this.cancelCallback()},clickSelect:function(a){a&&a.preventDefault();var b=this.$el.find("input.selectedClass").val();this.selectCallback(b)}}),e}),function(){!function(a,b){return"function"==typeof define&&define.amd?define("salvattore",b):"object"==typeof exports?module.exports=b():a.salvattore=b()}(this,function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return b=function(a,b,c){var d;return d=a.dataset,d?d[b]=c:a.setAttribute("data-"+b,c)},f=function(a,b){var c;return c=a.dataset,c?c[b]:a.getAttribute("data-"+b)},l=function(a){var b,c,d,e,f,g;return c=a.getAttribute("salvattore"),d=c.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),d?(e=d[1],b=(null!=(f=d[2])?f.split("."):void 0)||["column"]):(d=c.match(/^\s*\.(.+)\s+(\d+)\s*$/),b=d[1],e=null!=(g=d[2])?g.split("."):void 0),{numberOfColumns:e,columnClasses:b}},a=function(a,c){var d,e,f,g,h,i,j,k,m;for(m=l(a),i=m.numberOfColumns,d=m.columnClasses,g=new Array(+i),c||(c=a,j=document.createRange(),j.selectNodeContents(c),c=document.createElement("div"),c.appendChild(j.extractContents()),b(c,"columns",0),e=Array.prototype.filter.call(c.childNodes,function(a){return a instanceof HTMLElement})),h=i;0!==h--;)k="[data-columns] > *:nth-child("+i+"n-"+h+")",g.push(c.querySelectorAll(k));return f=document.createDocumentFragment(),g.forEach(function(a){var b,c;return b=document.createElement("div"),b.className=d.join(" "),c=document.createDocumentFragment(),Array.prototype.forEach.call(a,function(a){return c.appendChild(a)}),b.appendChild(c),f.appendChild(b)}),a.appendChild(f),b(a,"columns",i)},o=function(a){var c,d,e,f,g,h;return g=document.createRange(),g.selectNodeContents(a),a=g.extractContents(),c=Array.prototype.filter.call(a.childNodes,function(a){return a instanceof HTMLElement}),e=c.length,f=c[0].childNodes.length,h=new Array(f*e),Array.prototype.forEach.call(c,function(a,b){return Array.prototype.forEach.call(a.children,function(a,c){return h[c*e+b]=a})}),d=document.createElement("div"),b(d,"columns",0),h.filter(function(a){return null!=a}).forEach(function(a){return d.appendChild(a)}),d},n=function(b){return a(b,o(b))},i=function(a){return a.matches?Array.prototype.forEach.call(h,n):void 0},e=function(a){var b,c;try{b=a.sheet.cssRules}catch(d){return c=d,[]}return b?b:[]},g=function(){return Array.prototype.concat.call(Array.prototype.slice.call(document.querySelectorAll('style[type="text/css"]')),Array.prototype.slice.call(document.querySelectorAll('link[rel="stylesheet"]')))},j=function(a){var b,c;for(b=a.length;b--;)if(c=a[b],c.selectorText&&c.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},p=function(){var a;if("undefined"!=typeof matchMedia&&null!==matchMedia)return a=[],g().forEach(function(b){return Array.prototype.forEach.call(e(b),function(b){return null!=b.media&&b.styleSheet&&j(b.styleSheet.cssRules)?a.push(matchMedia(b.media.mediaText)):void 0})}),a.forEach(function(a){return a.addListener(i)})},k=function(a){var b,c,d,e,f,g,h,i;for(c=a.children,g=c.length,f=h=0,i=c.length;i>h&&(b=c[f],d=b.children.length,!(0!==f&&e>d));f=++h){if(f+1===g){f=0;break}e=d}return f},d=function(a){var b,c;for(b=new Array(a),c=0;c!==a;)b[c]=document.createDocumentFragment(),c++;return b},c=function(a,b){var c,e,f,g;return e=a.children,g=e.length,f=d(g),c=k(a,b[0]),b.forEach(function(a){return f[c].appendChild(a),c===g-1?c=0:c++}),Array.prototype.forEach.call(e,function(a,b){return a.appendChild(f[b])})},m=function(a,b){var c,e,f,g,h,i;for(e=a.children,h=e.length,g=d(h),c=h-1,b.forEach(function(a){var b;return b=g[c],b.insertBefore(a,b.firstChild),0===c?c=h-1:c--}),Array.prototype.forEach.call(e,function(a,b){return a.insertBefore(g[b],a.firstChild)}),f=document.createDocumentFragment(),i=b.length%h;0!==i--;)f.appendChild(a.lastChild);return a.insertBefore(f,a.firstChild)},h=null,q=function(){return window.getComputedStyle?(h=document.querySelectorAll("[data-columns]"),Array.prototype.forEach.call(h,function(b){return a(b)}),p()):void 0},{setup:q,append_elements:c,prepend_elements:m}})}.call(this),define("browse/resource.view",["underscore","egad","backbone","burry","browse/properties","browse/owlclass","browse/resource.modal","salvattore","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f,g,h){var i={},j=new d.Store("egad:fields:changed",5);return i.Individual=c.Layout.extend({template:"browse/resource",tagName:"div",className:"results instance module",initialize:function(b){a.bindAll(this),b.template&&(this.template=b.template),this.layout=b.layout||"columns",this.properties=this.model.getProperties()},events:{"click #btnEdit":"editIndividual","click #btnTree":"viewTreeBrowser","click #btnDelete":"deleteIndividual"},beforeRender:function(){var d=this,f=j.get(this.model.id);if(this.insertClassList(),this.properties&&this.properties.length>0)this.properties.each(function(b){var g,h=b.get("@value");h instanceof Array&&h.length>0?g=!a.isObject(h[0])||a.isObject(h[0])&&a.has(h[0],"@value")?new e.Views.DatatypePropArrayView({model:b}):new e.Views.ObjectPropArrayView({model:b}):h instanceof Array||(!a.isObject(h)||a.isObject(h)&&a.has(h,"@value")?g=new e.Views.DatatypePropView({model:b}):h&&(g=new e.Views.ObjectPropView({model:b}))),g&&(a.extend(g,c.Events),g.on("modified",d.changeModelProp),a.contains(f,g.model.id)&&g.highlight(),d.insertView("#propsForm",g))}),j.remove(this.model.id);else{var g="<strong>No properties!</strong> To add properties to this instance, click 'Edit' (if enabled) and start adding them.<br/>If this is a external resource, you can access it using the following link: <a href='"+decodeURIComponent(d.model.id)+"' target='_blank'>"+decodeURIComponent(d.model.id)+"</a>";b.event.CommManager.sendMessage("alerts","showInfoAlert",{message:g,isBlock:!0})}},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.toJSON()},afterRender:function(){"columns"===this.layout&&h.setup()},insertClassList:function(){var c=this,d=this.model.get("@type"),e=new b.model.ResourceCollection;if(d){var g=a.asArray(d);a.each(g,function(a){if(a){var c=new b.model.ResourceLabel({"@id":encodeURIComponent(a)});e.add({"@id":c.getId(),"rdfs:label":c.getLabel()})}})}c.insertView("#classType",new f.DisplayView({collection:e}))},editIndividual:function(a){a.preventDefault();var c=this.model.get("@type")||"owl:Thing";c instanceof Array&&(c=c[0]),b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(c)+"/"+encodeURIComponent(this.model.id)+"/edit",{trigger:!0})},viewTreeBrowser:function(a){a.preventDefault(),b.api.Mediator.publish("router:navigate","#!/treebrowser/"+encodeURIComponent(this.model.id),{trigger:!0})},deleteIndividual:function(a){a.preventDefault(),console.log("deleting individual");var c=this,d=function(){var a=c.model.get("@type");a instanceof Array&&(a=a[0]),c.model.id=encodeURIComponent(c.model.id),c.model.destroy().done(function(){b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(a),{trigger:!0})}).fail(function(a){403==a.status&&b.event.CommManager.sendMessage("alerts","showErrorAlert",{message:"<strong>You don't have permission to modify data.</strong>",isBlock:!0})})},e=new g.DeleteModal({model:this.model,deleteCallback:d});return this.insertView(e).render(),!1}}),i}),define("browse/breadcrumbs",["underscore","egad","backbone","burry","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c){var d=c.Layout.extend({template:"browse/breadcrumbs",initialize:function(b){var c=a.defaults(b,{items:[]});this.items=c.items},serialize:function(){return{items:this.items.slice(0,-1),active:this.items.slice(-1)[0]}}});return d}),define("browse/resource.edit",["underscore","egad","backbone","burry","browse/properties","browse/owlclass","browse/resource.modal","salvattore","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f,g,h){function i(a,b){this.message=a,this.fields=b,this.name="ValidationException"}var j=new d.Store("egad:fields:changed",5),k=c.Layout.extend({template:"browse/resourceEdit",tagName:"div",className:"results instance module",initialize:function(c){a.bindAll(this),c=a.defaults(c,{allowNestedCreation:!1}),this.allowNestedCreation=c.allowNestedCreation,c.fieldsTemplate&&(this.fieldsTemplate=c.fieldsTemplate),this.model&&this.model.has("@type")&&(this.originalType=a.map(this.model.getType(),function(c){return a.expandURI(c,b.config.namespaces())})),this.properties=this.model.getProperties(),this.fieldsTemplate=this._getTemplate(this._getClassClosure(this.model.getType()))},events:{"click #btnSave":"saveIndividual","click #btnCancel":"cancelIndividual","click #addProperty":"addProperty"},beforeRender:function(){var c=this;if(this.properties&&this.properties.length>0)this.properties.each(function(d){var f,g=d.get("@value"),h=g;if(g instanceof Array&&g.length>0&&(h=g[0]),!a.isObject(h)||a.isObject(h)&&a.has(h,"@value"))if(a.has(h,"@type")){var i=h["@type"];i==b.vocabulary.xsd.DATETIME&&(f=new e.Views.EditDateTimePropView({model:d}))}else d.id&&(f=new e.Views.EditDatatypePropView({model:d}));else f=new e.Views.EditObjectPropView({model:d,showNew:c.allowNestedCreation}),f.on("request-new",c.triggerNewIndividual);f&&(f.on("closing",function(a){c.model.unsetProperty(a)}),c._addPropertyView(f))});else if(!this.fieldsTemplate||0===this.fieldsTemplate.length){var d='<strong>No properties!</strong> To add properties to this new instance, click [<i class="icon-plus"></i> Add attribute] in the contextual menu to the right <i class="icon-arrow-right"></i>';b.event.CommManager.sendMessage("alerts","showInfoAlert",{message:d,isBlock:!0})}},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.toJSON()},afterRender:function(){var a=this;h.setup();var b=this.insertClassListEditor();a.insertView("#classType",b).render().done(function(){a.model.on("change:@type",function(b,c){var d=a._getClassClosure(c),e=a._getTemplate(d);a._applyTemplate(e)}),a.fieldsTemplate&&a.fieldsTemplate.length>0&&a._applyTemplate(a.fieldsTemplate)})},insertClassListEditor:function(){var c=this,d=this.model.getType(),e=new b.model.ResourceCollection;a.each(d,function(a){if(a){var c=new b.model.ResourceLabel({"@id":encodeURIComponent(a)});e.add({"@id":c.getId(),"rdfs:label":c.getLabel()})}});var g=new f.EditView({collection:e});return g.on("change",function(b){var d=b.val;(!d||a.isArray(d)&&0===d.length)&&(d=["owl:Thing"]),c.model.setType(d)}),g},_getClassClosure:function(c){var d=[],e=a.asArray(c);return a.each(e,function(c){d=a.union(d,b.ajax.getSuperClasses(c),a.asArray(a.expandURI(c,b.config.namespaces())))}),d},_getTemplate:function(a){var c=this._getClassClosure(a);return b.config.getTemplateFor(c)},_applyTemplate:function(a,b){if(a){var c=this;this.fieldsTemplate=a,this.fieldsTemplate.forEach(function(a){c.addPropertyToForm(a,b)})}},_registerChange:function(a){var b=j.get(this.model.id)||[];b.push(a),j.set(this.model.id,b)},_validateDatatypeProperty:function(b){var c=function(b){return isNaN(b)?"string"==typeof b&&b.length>0||a.isObject(b)&&a.has(b,"@value"):!0};if(b instanceof Array){var d=!0;return a.each(b,function(a){d=d&&c(a)}),d}return c(b)},_validateObjectProperty:function(b){var c=!0;return b instanceof Array?a.each(b,function(b){c=c&&a.isUri(b["@id"])}):c=a.isUri(b["@id"]),c},_getPropertyViews:function(){return this.getViews("#propsForm").value()},_getPropertyView:function(c){return a.find(this._getPropertyViews(),function(d){if(d.model&&d.model.id){var e=decodeURIComponent(d.model.id);return a.expandURI(c,b.config.namespaces())===a.expandURI(e,b.config.namespaces())}})},_hasPropertyView:function(a){return this._getPropertyView(a)?!0:!1},_addPropertyView:function(a){this.insertView("#propsForm",a)},_removePropertyView:function(a){var b=this._getPropertyView(a);b&&b.remove()},getStateModel:function(){var c=this.model.clone(),d=this,e=[];if(a.each(this._getPropertyViews(),function(f){if(f.getPropertyName){var g=c.getProperty(f.getPropertyName()),h=f.getPropertyValue();g&&"ObjectProperty"===f.getPropertyType()&&(g=a.isArray(g)?a.map(g,function(c){return{"@id":a.expandURI(c["@id"],b.config.namespaces())}}):a.asArray({"@id":a.expandURI(g["@id"],b.config.namespaces())}));var i=null;if("DatatypeProperty"===f.getPropertyType()?d._validateDatatypeProperty(h)||(i={field:a.localName(decodeURIComponent(f.getPropertyLabel())),reason:"Value should not be empty or null"},f.highlightError()):d._validateObjectProperty(h)||(i={field:a.localName(decodeURIComponent(f.getPropertyLabel())),reason:"Value should be a URI element"},f.highlightError()),i)e.push(i);else if(a.isDiff(g,h)){var j=decodeURIComponent(f.getPropertyName());c.setProperty(j,h),d._registerChange(j)}console.log("found: "+f.getPropertyName()+" --> "+JSON.stringify(f.getPropertyValue()))}}),0!==e.length)throw new i("Validation errors where found in the data.",e);c.unset("@egadLabel"),c.unset("@value");var f=a.expandURI(c.getType(),b.config.namespaces());if(c.has("rdf:type")){var g=a.expandURI(c.get("rdf:type"),b.config.namespaces());f=a.union(g,f),c.unset("rdf:type")}var h="resource";return f&&f.length>=1&&(h=encodeURIComponent(a.compactURI(f[0],b.config.namespaces()))),c.url=function(){return this.id?(this.id=decodeURIComponent(this.id),b.ajax.graphUrl(h,encodeURIComponent(this.id))):b.ajax.graphUrl(h)},c.set("@context",a.invert(b.config.namespaces())),c},saveIndividual:function(c){c.preventDefault(),c.stopPropagation();var d=this;try{var e=this.getStateModel(),f=a.expandURI(e.getType(),b.config.namespaces()),g="resource";f&&f.length>=1&&(g=encodeURIComponent(a.compactURI(f[0],b.config.namespaces()))),e.on("invalid",function(a,c){b.event.CommManager.sendMessage("alerts","showErrorAlert",{title:"Invalid data",message:c,isBlock:!0})}),e.save(null,{fieldsTemplate:this.fieldsTemplate,success:function(){d.trigger("saved",decodeURIComponent(g),e.id)},error:function(a){403==a.status&&b.event.CommManager.sendMessage("alerts","showErrorAlert",{message:"<strong>You don't have permission to modify data.</strong>",isBlock:!0})}})}catch(h){var i="<strong>The following validation errors were found: </strong><br/><ul>";a.each(h.fields,function(a){i=i+"<li><strong>"+a.field+"</strong> - "+a.reason+"</li>"}),i+="</ul>",b.event.CommManager.sendMessage("alerts","showErrorAlert",{message:i,isBlock:!0})}},cancelIndividual:function(a){a.preventDefault();var b=this.model.getType();b=b.length>0?b[0]:"resource",this.trigger("cancelled",b,this.model.id)},addProperty:function(a){a.preventDefault();var c;b.config.get("modules").browse.enforceDomain&&(c=this.model.getType(),c=c.length>0?c[0]:"resource");var d=new g.AddAttributeModal({domain:c,selectCallback:this.addPropertyToForm});this.insertView(d).render()},_addClass:function(c){var d=this.getView("#classType"),e=a.expandURI(this.model.getType(),b.config.namespaces()),f=a.map(a.asArray(c),function(c){var d;if(a.isString(c))d=c;else{if(!a.isObject(c)||!a.has(c,"@id"))throw new Error("Resource object must contain @id property");d=c["@id"]}return a.expandURI(d,b.config.namespaces())});f=a.flatten(f),d.setClasses(a.union(f,e))},addPropertyToForm:function(d,f){var g=this,i=d;if(i&&0!==i.length){var j,k;if(a.isString(i)?(j=i.indexOf(":")<0?":"+i:i,j=a.expandURI(decodeURIComponent(i),b.config.namespaces())):a.isObject(i)&&i instanceof c.Model&&(j=a.expandURI(decodeURIComponent(i.id),b.config.namespaces()),k=i.get("value")),!this._hasPropertyView(j)){if(j===b.vocabulary.rdf.TYPE)return void(k&&this._addClass(k));var l=new b.model.Property({"@id":encodeURIComponent(j)});l.fetch({async:!1}),k&&l.set("@value",k);var m,n=l.get("@type"),o=!1;if(n){var p=[];p.push(n),p=a.flatten(p);for(var q=0;q<p.length&&!(o=/objectproperty/i.test(p[q]));q+=1);o?(m=new e.Views.EditObjectPropView({model:l,showNew:g.allowNestedCreation}),m.on("request-new",g.triggerNewIndividual)):m=new e.Views.EditDatatypePropView({model:l})}else{var r=new b.model.ResourceCollection;r.url=b.ajax.graphUrl("using",l.id+"?limit=1"),r.fetch({async:!1}).done(function(){if(r.length>0){var b=r.at(0),c=b.get(decodeURIComponent(l.id));a.isObject(c)&&a.has(c,"id")?(o=!0,m=new e.Views.EditObjectPropView({model:l,showNew:g.allowNestedCreation}),m.on("request-new",g.triggerNewIndividual)):m=new e.Views.EditDatatypePropView({model:l})}}).fail(function(){console.log("failed trying to get a collection of value samples")})}if(m||(m=new e.Views.EditDatatypePropView({model:l})),window.getComputedStyle&&!f){var s=document.querySelector("#propsForm");h.append_elements(s,[m.el]),o?m.bind("component-loaded",function(){var a=this.$el.find(".propertyInput"),b=a.select2("container").find(".select2-input");b.focus()}):m.bind("component-loaded",function(){this.$el.find(".propertyInput").focus()})}m.on("closing",function(a){g.model.unsetProperty(a)}),this._addPropertyView(m),m.render()}}},removePropertyFromForm:function(d){var e=d;if(e&&0!==e.length){var f;a.isString(e)?f=a.compactURI(decodeURIComponent(e),b.config.namespaces()):a.isObject(e)&&e instanceof c.Model&&(f=a.compactURI(decodeURIComponent(e.id),b.config.namespaces())),f.indexOf(":")<0&&(f=":"+f),this._removePropertyView(f),this.model.unsetProperty(f)}},triggerNewIndividual:function(a){this.trigger("new-individual",a)}});return k}),define("browse/resource.edit.manager",["underscore","egad","backbone","burry","browse/breadcrumbs","browse/resource.edit","browse/resource.modal","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c,d,e,f,g){var h=c.Layout.extend({template:"browse/resourceEditManager",initialize:function(c){a.bindAll(this),c=a.defaults({},c),this.models=new b.model.ResourceCollection,this.currentModel=null,this.currentView=null,this.nestingLimit=c.nestingLimit||10},beforeRender:function(){if(this.currentModel=this.models.pop(),this.currentModel&&(this.currentView=new f({model:this.currentModel,allowNestedCreation:!0}),this.currentView.on("new-individual",this.createNewIndividualHandler),this.currentView.once("saved",this.savedHandler),this.currentView.once("cancelled",this.cancelledHandler),this.insertView("#edit-area",this.currentView)),this.models.length>=1){var a=this.getBreadcrumbsLabels();this.insertView("#breadcrumbs-area",new e({items:a}))}b.event.CommManager.sendMessage("alerts","removeAlerts")},serialize:function(){return{}},cleanup:function(){this.models.lenght>0&&(a.each(this.models,function(){this.models.remove()}),this.models=void 0)},getBreadcrumbsLabels:function(){function c(a){var c=a.id?a.id:a.getType(),d=function(a,d,e){d=d||"",e=e||"";var f=new b.model.ResourceLabel({"@id":encodeURIComponent(c)});return d+f.getLabel()+e};return a.id?d(c):d(c,"New ")}var d=this.models.models.concat(this.currentModel);return a.map(d,c)},newIndividual:function(a){var c=encodeURIComponent(a),d=new b.model.Resource;d.setType(a),d.url=function(){return this.id?b.ajax.graphUrl(c,this.id):b.ajax.graphUrl(c)},this.models.push(d)},editIndividual:function(a,c){var d=encodeURIComponent(a),e=encodeURIComponent(c),f=new b.model.Resource({"@id":e});f.url=function(){return this.id?b.ajax.graphUrl(d,this.id):b.ajax.graphUrl(d)},f.fetch({async:!1,error:function(){console.log("failed loading individual for edit view"),f=new b.model.Resource({"@id":c}),f.setType(a)}}),this.models.push(f)},_createTypedIndividual:function(a){this.newIndividual(a),this.render()},createNewIndividualHandler:function(c){function d(c){setTimeout(function(){e._createTypedIndividual(c?c:a.compactURI(b.vocabulary.owl.THING,b.config.namespaces()))},500),this.hide()}var e=this;if(this.models.length<this.nestingLimit)try{if(this.models.push(this.currentView.getStateModel()),this.currentView.remove(),"owl:Thing"===c||c===b.vocabulary.owl.THING){var f=new g.SelectClassModal({selectCallback:d,cancelCallback:d});this.insertView(f).render()}else d(c)}catch(h){console.log(h)}else{var i={isBlock:!0};i.message="<p>You've reached the limit of nested object creation.</p><p>Please start saving your objects or open another browser window to create objects individually.</p>",b.event.CommManager.sendMessage("alerts","showWarningAlert",i)}},savedHandler:function(a,c){0==this.models.length?b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(a)+"/"+encodeURIComponent(c),{trigger:!0}):this.render()},cancelledHandler:function(a,c){0==this.models.length?c?b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(a)+"/"+encodeURIComponent(c),{trigger:!0}):b.api.Mediator.publish("router:navigate","#!/browse/"+encodeURIComponent(a),{trigger:!0}):this.render()}});return h}),define("browse/main",["jquery","underscore","backbone","egad","browse/resource.list","browse/resource.view","browse/resource.edit.manager"],function(a,b,c,d,e,f,g){var h=d.api.Module.extend({name:"browse",routes:{"!/browse/using/:property":"browseUsingProperty","!/browse/using/:property/p/:page":"browseUsingProperty","!/browse/:collection":"browseCollection","!/browse/:collection/p/:page":"browseCollection","!/browse/:collection/new":"newIndividual","!/browse/:collection/:individual":"browseIndividual","!/browse/:collection/:ind/edit":"editIndividual"},browseUsingProperty:function(b,c){console.log("browseUsingProperty: "+b+", "+c);var f=new d.model.ResourceCollection(null,{page:c,usingProperty:b});f.fetch().done(function(){var b=new e.List({collection:f});a(".pageContainer").html(b.$el),b.render()}).fail(function(){console.log("failed trying to get a collection")})},browseCollection:function(b,c){console.log("browseCollection: "+b+", "+c);var f=d.config.getOrderFor(b),g=new d.model.ResourceCollection(null,{page:c,rdfType:b,order:f});g.fetch().done(function(){var b=new e.List({collection:g});a(".pageContainer").html(b.$el),b.render()}).fail(function(){console.log("failed trying to get a collection")})},browseIndividual:function(b,c){console.log("browseIndividual: "+b+", "+c);var e=encodeURIComponent(b),g=encodeURIComponent(c),h=new d.model.Resource({"@id":g});
h.url=function(){return d.config.get("modules").browse&&d.config.get("modules").browse.reasoning?this.id?d.ajax.graphReasoningUrl(e,this.id):d.ajax.graphReasoningUrl(e):this.id?d.ajax.graphUrl(e,this.id):d.ajax.graphUrl(e)},h.fetch({async:!1}).fail(function(){console.log("failed loading individual"),h.id=decodeURIComponent(h.id)});var i=new f.Individual({model:h});a(".pageContainer").html(i.$el),i.render()},newIndividual:function(b){var c=new g({nestingLimit:d.config.get("modules").browse.nestingLimit});c.newIndividual(b),a(".pageContainer").html(c.$el),c.render()},editIndividual:function(b,c){var e=new g({nestingLimit:d.config.get("modules").browse.nestingLimit});e.editIndividual(b,c),a(".pageContainer").html(e.$el),e.render()}});return new h}),define("browse",["browse/main"],function(a){return a}),define("metadata/datasetinfo",["underscore","egad","metadata","bootstrap","handlebars.helpers"],function(a,b,c){var d=Backbone.Model.extend({}),e=Backbone.Layout.extend({template:"metadata/datasetInfo",tagName:"div",id:"dataset-widget",datasetInfoModel:null,initialize:function(c){a.bindAll(this),c&&c.template&&(this.template=c.template),this.datasetInfoModel=new d({embeddedInStardog:b.config.isStardogEmbedded(),name:b.config.get("name"),sparqlEndpoint:b.config.get("sparqlEndpoint"),apiEndpoint:b.config.get("apiEndpoint")})},beforeRender:function(){this.metadata=new c.Settings,this.initMetadata(this.metadata.getAll())},afterRender:function(){b.api.Mediator.publish("metadata:datasetinfo:afterRender",{})},initMetadata:function(b){var c=String.fromCharCode(parseInt("02",16));if(b&&b["database.namespaces"]&&"string"==typeof b["database.namespaces"]){var d=b["database.namespaces"].split(c);d=a.collect(d,function(a){return a.replace("=",": <")+">"}),b["database.namespaces"]=d}this.datasetInfoModel.set(b)},serialize:function(){return this.datasetInfoModel.toJSON()}});return e}),define("query/prefix",["jquery","underscore","egad","string","bootstrap","select2"],function(a,b,c,d){"use strict";var e=/prefix\s+\w*:\s+<.*>/gi,f=/\s+(\w*):/,g=/<.*>/,h={clean:function(a,b){if(b&&b.length>0||""===b&&a)return b;var c=a.substring(0,a.length-1),d=c.lastIndexOf("/");return d>0?c.substring(d+1,c.length):void 0},_toFlatPrefixesJson:function(a){return b.map(a,function(a){var b={};return b[a.id]=a.text,b})},asArray:function(a){var d=this,e=[],f=a||c.config.namespaces();return b.each(f,function(a,b){var c={id:b,text:d.clean(b,a)};e.push(c)}),e},asArrayFullText:function(a){var d=this,e=[],f=a||c.config.namespaces();return b.each(f,function(a,b){var c=d.clean(b,a)+": &lt;"+b+"&gt;",f={id:b,text:c};e.push(f)}),e},asString:function(a,c){if(0===a.length)return"";var d=[],e=this.asArray(c),f=this._toFlatPrefixesJson(e);return d=b.map(f,function(c){for(var d=0;d<a.length;d++)if(b.has(c,a[d]))return"prefix "+c[a[d]]+": <"+a[d]+">"}),d=b.compact(d),d.join("\n")},fromQueryString:function(a){var c={},h=a?a.match(e):null;return h&&b.each(h,function(a){var b=a.match(f);b=d(b[0].substring(0,b[0].lastIndexOf(":"))).trim().s;var e=a.match(g);e=d(e[0].substring(1,e[0].lastIndexOf(">"))).trim().s,c[e]=b}),c},nonGlobalPrefixes:function(a,c){var f=a?a.match(e):null,g=b.collect(this._toFlatPrefixesJson(this.asArray(c)),function(a){return b.values(a)});if(g=b.flatten(g),f){var h=b.filter(f,function(a){var c=a.match(/\s+(\w*):/),e=c[0],f=d(e.substring(0,e.lastIndexOf(":"))).trim().s;return b.indexOf(g,f)<0}),i=b.reduce(h,function(a,b){return a&&b?a+"\n"+b:b?b:""});return i?i:""}return""},getGlobalNSFromStr:function(a,f){var g=a?a.match(e):null,h=b.collect(this._toFlatPrefixesJson(this.asArray(f)),function(a){return b.values(a)});h=b.flatten(h);var i=[];g&&b.each(g,function(a){var c=a.match(/\s+(\w*):/),e=c[0],f=d(e.substring(0,e.lastIndexOf(":"))).trim().s;b.indexOf(h,f)>=0&&i.push(f)});var j=f||c.config.namespaces(),k=b.invert(j),l=[];return b.each(i,function(a){l.push(k[a])}),l},stripPrefixes:function(a){var b=a.match(e),c=0;if(b){var f=b[b.length-1];c=a.lastIndexOf(f)+f.length}return d(a.substring(c)).trimLeft().s}};return h}),window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in ff)!d.hasOwnProperty(e)&&ff.hasOwnProperty(e)&&(d[e]=ff[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Ne&&ob(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Vd},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new uf(d.value,d.mode)),gb(this,md)(this,i),Ae&&setTimeout(ce(nb,this,!0),20),qb(this);var k;try{k=document.activeElement==g.input}catch(l){}k||d.autofocus&&!Ne?setTimeout(ce(Ib,this),20):Jb(this),gb(this,function(){for(var a in ef)ef.propertyIsEnumerable(a)&&ef[a](this,d[a],gf);for(var b=0;b<lf.length;++b)lf[b](this)})()}function b(a,b){var c={},d=c.input=fe("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return De?d.style.width="1000px":d.setAttribute("wrap","off"),Me&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=fe("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=fe("div",[fe("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=fe("div",[fe("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=fe("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=fe("div",null,"CodeMirror-gutter-filler"),c.lineDiv=fe("div",null,"CodeMirror-code"),c.selectionDiv=fe("div",null,null,"position: relative; z-index: 1"),c.cursor=fe("div","Â ","CodeMirror-cursor"),c.otherCursor=fe("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=fe("div",null,"CodeMirror-measure"),c.lineSpace=fe("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=fe("div",[fe("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=fe("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=fe("div",null,null,"position: absolute; height: "+zf+"px; width: 1px;"),c.gutters=fe("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=fe("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=fe("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),Be&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Me&&(d.style.width="0px"),De||(c.scroller.draggable=!0),Ie?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Be&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Vd,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,G(b,100),b.state.modeGen++,b.curOp&&jb(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),jb(a),U(a),setTimeout(function(){n(a)},100)}function e(a){var b=cb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/db(a.display)-3);return function(e){return Qc(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&qd(a,b)})}function g(a){var b=of[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:""),a.state.disableInput=b.disableInput}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),U(a)}function i(a){j(a),jb(a),setTimeout(function(){p(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;ge(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(fe("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Nc(e);){var f=c.find();e=nd(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Oc(e);){var f=c.find();d-=e.text.length-f.from.ch,e=nd(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=nd(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){var b=$d(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function n(a){var b=a.display,c=a.doc.height,d=c+L(b);b.sizer.style.minHeight=b.heightForcer.style.top=d+"px",b.gutters.style.height=Math.max(d,b.scroller.clientHeight-zf)+"px";var e=Math.max(d,b.scroller.scrollHeight),f=b.scroller.scrollWidth>b.scroller.clientWidth+1,g=e>b.scroller.clientHeight+1;g?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=f?le(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=e-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):(b.scrollbarV.style.display="",b.scrollbarV.firstChild.style.height="0"),f?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=g?le(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):(b.scrollbarH.style.display="",b.scrollbarH.firstChild.style.width="0"),f&&g?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=le(b.measure)+"px"):b.scrollbarFiller.style.display="",f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=le(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="",Je&&0===le(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=Ke?"18px":"12px",b.scrollbarV.style.pointerEvents=b.scrollbarH.style.pointerEvents="none")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-K(a));var f=Math.ceil(d+e);return{from:sd(b,d),to:sd(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(fe("div",[fe("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return je(a.scroller).left-je(a.sizer).left}function t(a,b,c,d){for(var e,f=a.display.showingFrom,g=a.display.showingTo,h=o(a.display,a.doc,c),i=!0;;i=!1){var j=a.display.scroller.clientWidth;if(!u(a,b,h,d))break;if(e=!0,b=[],C(a),n(a),i&&a.options.lineWrapping&&j!=a.display.scroller.clientWidth)d=!0;else if(d=!1,c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),h=o(a.display,a.doc,c),h.from>=a.display.showingFrom&&h.to<=a.display.showingTo)break}return e&&(Qd(a,"update",a),(a.display.showingFrom!=f||a.display.showingTo!=g)&&Qd(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo)),e}function u(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.clientWidth)return e.showingFrom=e.showingTo=f.first,void(e.viewOffset=0);if(!(!d&&0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){q(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";var h=1/0;if(a.options.lineNumbers)for(var i=0;i<b.length;++i)b[i].diff&&b[i].from<h&&(h=b[i].from);var j=f.first+f.size,k=Math.max(c.from-a.options.viewportMargin,f.first),l=Math.min(j,c.to+a.options.viewportMargin);if(e.showingFrom<k&&k-e.showingFrom<20&&(k=Math.max(f.first,e.showingFrom)),e.showingTo>l&&e.showingTo-l<20&&(l=Math.min(j,e.showingTo)),Xe)for(k=rd(Pc(f,nd(f,k)));j>l&&Qc(f,nd(f,l));)++l;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,j)}];if(m=m[0].from>=m[0].to?[]:x(m,b),Xe)for(var i=0;i<m.length;++i)for(var n,o=m[i];n=Oc(nd(f,o.to-1));){var p=n.find().from.line;if(!(p>o.from)){m.splice(i--,1);break}o.to=p}for(var r=0,i=0;i<m.length;++i){var o=m[i];o.from<k&&(o.from=k),o.to>l&&(o.to=l),o.from>=o.to?m.splice(i--,1):r+=o.to-o.from}if(!d&&r==l-k&&k==e.showingFrom&&l==e.showingTo)return void w(a);m.sort(function(a,b){return a.from-b.from});try{var s=document.activeElement}catch(t){}.7*(l-k)>r&&(e.lineDiv.style.display="none"),z(a,k,l,m,h),e.lineDiv.style.display="",s&&document.activeElement!=s&&s.offsetHeight&&s.focus();var u=k!=e.showingFrom||l!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight;return u&&(e.lastSizeC=e.wrapper.clientHeight,G(a,400)),e.showingFrom=k,e.showingTo=l,v(a),w(a),!0}}function v(a){for(var b,c=a.display,d=c.lineDiv.offsetTop,e=c.lineDiv.firstChild;e;e=e.nextSibling)if(e.lineObj){if(Be){var f=e.offsetTop+e.offsetHeight;b=f-d,d=f}else{var g=je(e);b=g.bottom-g.top}var h=e.lineObj.height-b;if(2>b&&(b=cb(c)),h>.001||-.001>h){qd(e.lineObj,b);var i=e.lineObj.widgets;if(i)for(var j=0;j<i.length;++j)i[j].height=i[j].node.offsetHeight}}}function w(a){var b=a.display.viewOffset=td(a,nd(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function x(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function y(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function z(a,b,c,d,e){function f(b){var c=b.nextSibling;return De&&Oe&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=y(a),h=a.display,i=a.options.lineNumbers;d.length||De&&a.display.currentWheelTarget||ge(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Qc(a.doc,b)){if(0!=b.height&&qd(b,0),b.widgets&&k&&k.previousSibling)for(var c=0;c<b.widgets.length;++c){var h=b.widgets[c];if(h.showIfHidden){var n=k.previousSibling;if(/pre/i.test(n.nodeName)){var o=fe("div",null,null,"position: relative");n.parentNode.replaceChild(o,n),o.appendChild(n),n=o}var p=n.appendChild(fe("div",[h.node],"CodeMirror-linewidget"));h.handleMouseEvents||(p.ignoreEvents=!0),B(h,p,n,g)}}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&m>=e&&k.lineNumber&&ie(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var q,s=0,t=k;t&&20>s;++s,t=t.nextSibling)if(t.lineObj==b&&/div/i.test(t.nodeName)){q=t;break}var u=A(a,b,m,g,q);if(u!=q)j.insertBefore(u,k);else{for(;k!=q;)k=f(k);k=k.nextSibling}u.lineObj=b}++m});k;)k=f(k)}function A(a,b,c,d,e){var f,g=cd(a,b),h=g.pre,i=b.gutterMarkers,j=a.display,k=g.bgClass?g.bgClass+" "+(b.bgClass||""):b.bgClass;if(!(a.options.lineNumbers||i||k||b.wrapClass||b.widgets))return h;if(e){e.alignable=null;for(var l,m=!0,n=0,o=null,p=e.firstChild;p;p=l)if(l=p.nextSibling,/\bCodeMirror-linewidget\b/.test(p.className)){for(var q=0;q<b.widgets.length;++q){var s=b.widgets[q];if(s.node==p.firstChild){s.above||o||(o=p),B(s,p,e,d),++n;break}}if(q==b.widgets.length){m=!1;break}}else e.removeChild(p);e.insertBefore(h,o),m&&n==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=fe("div",null,b.wrapClass,"position: relative"),f.appendChild(h)),k&&f.insertBefore(fe("div",null,k+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||i){var t=f.insertBefore(fe("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(t),!a.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(f.lineNumber=t.appendChild(fe("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+j.lineNumInnerWidth+"px"))),i)for(var u=0;u<a.options.gutters.length;++u){var v=a.options.gutters[u],w=i.hasOwnProperty(v)&&i[v];w&&t.appendChild(fe("div",[w],"CodeMirror-gutter-elt","left: "+d.gutterLeft[v]+"px; width: "+d.gutterWidth[v]+"px"))}}if(Be&&(f.style.zIndex=2),b.widgets&&f!=e)for(var q=0,x=b.widgets;q<x.length;++q){var s=x[q],y=fe("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(y.ignoreEvents=!0),B(s,y,f,d),s.above?f.insertBefore(y,a.options.lineNumbers&&0!=b.height?t:h):f.appendChild(y),Qd(s,"redraw")}return f}function B(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function C(a){var b=a.display,c=Wb(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?D(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":E(a),a.options.moveInputWithCursor){var d=$(a,a.doc.sel.head,"div"),e=je(b.wrapper),f=je(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function D(a){var b=a.display,c=$(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function E(a){function b(a,b,c,d){0>b&&(b=0),g.appendChild(fe("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f){function g(b,d){return Z(a,Vb(c,b),"div",l,d)}var j,k,l=nd(e,c),m=l.text.length;return ne(ud(l),d||0,null==f?m:f,function(a,c,e){var l,n,o,p=g(a,"left");if(a==c)l=p,n=o=p.left;else{if(l=g(c-1,"right"),"rtl"==e){var q=p;p=l,l=q}n=p.left,o=l.right}null==d&&0==a&&(n=i),l.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<l.top&&b(n,p.bottom,null,l.top)),null==f&&c==m&&(o=h),(!j||p.top<j.top||p.top==j.top&&p.left<j.left)&&(j=p),(!k||l.bottom>k.bottom||l.bottom==k.bottom&&l.right>k.right)&&(k=l),i+1>n&&(n=i),b(n,l.top,o-n,l.bottom)}),{start:j,end:k}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=M(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var j=nd(e,f.from.line),k=nd(e,f.to.line),l=Pc(e,j)==Pc(e,k),m=c(f.from.line,f.from.ch,l?j.text.length:null).end,n=c(f.to.line,l?0:null,f.to.ch).start;l&&(m.top<n.top-2?(b(m.right,m.top,null,m.bottom),b(i,n.top,n.left,n.bottom)):b(m.right,m.top,n.left-m.right,m.bottom)),m.bottom<n.top&&b(i,m.bottom,null,n.top)}he(d.selectionDiv,g),d.selectionDiv.style.display=""}function F(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",a.options.cursorBlinkRate>0&&(b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function G(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,ce(H,a))}function H(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=tc(b.mode,J(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=$c(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=tc(b.mode,e)}else ad(a,g,e),g.stateAfter=b.frontier%5==0?tc(b.mode,e):null;return++b.frontier,+new Date>d?(G(a,a.options.workDelay),!0):void 0}),f.length&&gb(a,function(){for(var a=0;a<f.length;++a)jb(this,f[a].start,f[a].end)})()}}function I(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=nd(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=Wd(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function J(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=I(a,b,c),g=f>d.first&&nd(d,f-1).stateAfter;return g=g?tc(d.mode,g):uc(d.mode),d.iter(f,b,function(c){ad(a,c,g);var h=f==b-1||f%5==0||f>=e.showingFrom&&f<e.showingTo;c.stateAfter=h?tc(d.mode,g):null,++f}),c&&(d.frontier=f),g}function K(a){return a.lineSpace.offsetTop}function L(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function M(a){var b=he(a.measure,fe("pre",null,null,"text-align: left")).appendChild(fe("span","x"));return b.offsetLeft}function N(a,b,c,d,e){var f=-1;if(d=d||Q(a,b),d.crude){var g=d.left+c*d.width;return{left:g,right:g+d.width,top:d.top,bottom:d.bottom}}for(var h=c;;h+=f){var i=d[h];if(i)break;0>f&&0==h&&(f=1)}return e=h>c?"left":c>h?"right":e,"left"==e&&i.leftSide?i=i.leftSide:"right"==e&&i.rightSide&&(i=i.rightSide),{left:c>h?i.right:i.left,right:h>c?i.left:i.right,top:i.top,bottom:i.bottom}}function O(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.wrapClass)return e}}function P(a,b){var c=O(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function Q(a,b){var c=O(a,b);if(c)return c.measure;var d=R(a,b),e=a.display.measureLineCache,f={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:d,classes:b.textClass+"|"+b.wrapClass};return 16==e.length?e[++a.display.measureLineCachePos%16]=f:e.push(f),d}function R(a,b){function c(a){var b=a.top-o.top,c=a.bottom-o.top;c>r&&(c=r),0>b&&(b=0);for(var d=p.length-2;d>=0;d-=2){var e=p[d],f=p[d+1];if(!(e>c||b>f)&&(b>=e&&f>=c||e>=b&&c>=f||Math.min(c,f)-Math.max(b,e)>=c-b>>1)){p[d]=Math.min(b,e),p[d+1]=Math.max(c,f);break}}return 0>d&&(d=p.length,p.push(b,c)),{left:a.left-o.left,right:a.right-o.left,top:d,bottom:null}}function d(a){a.bottom=p[a.top+1],a.top=p[a.top]}if(!a.options.lineWrapping&&b.text.length>=a.options.crudeMeasuringFrom)return S(a,b);var e=a.display,f=be(b.text.length),g=cd(a,b,f,!0).pre;if(Ae&&!Be&&!a.options.lineWrapping&&g.childNodes.length>100){for(var h=document.createDocumentFragment(),i=10,j=g.childNodes.length,k=0,l=Math.ceil(j/i);l>k;++k){for(var m=fe("div",null,null,"display: inline-block"),n=0;i>n&&j;++n)m.appendChild(g.firstChild),--j;h.appendChild(m)}g.appendChild(h)}he(e.measure,g);var o=je(e.lineDiv),p=[],q=be(b.text.length),r=g.offsetHeight;Ce&&e.measure.first!=g&&he(e.measure,g);for(var s,k=0;k<f.length;++k)if(s=f[k]){var t=s,u=null;if(/\bCodeMirror-widget\b/.test(s.className)&&s.getClientRects){1==s.firstChild.nodeType&&(t=s.firstChild);var v=t.getClientRects();v.length>1&&(u=q[k]=c(v[0]),u.rightSide=c(v[v.length-1]))}u||(u=q[k]=c(je(t))),s.measureRight&&(u.right=je(s.measureRight).left),s.leftSide&&(u.leftSide=c(je(s.leftSide)))}ge(a.display.measure);for(var s,k=0;k<q.length;++k)(s=q[k])&&(d(s),s.leftSide&&d(s.leftSide),s.rightSide&&d(s.rightSide));return q}function S(a,b){var c=new qf(b.text.slice(0,100),null);b.textClass&&(c.textClass=b.textClass);var d=R(a,c),e=N(a,c,0,d,"left"),f=N(a,c,99,d,"right");return{crude:!0,top:e.top,left:e.left,bottom:e.bottom,width:(f.right-e.left)/100}}function T(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&O(a,b);if(f||b.text.length>=a.options.crudeMeasuringFrom)return N(a,b,b.text.length,f&&f.measure,"right").right;var g=cd(a,b,null,!0).pre,h=g.appendChild(me(a.display.measure));return he(a.display.measure,g),je(h).right-je(a.display.lineDiv).left}function U(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function V(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function W(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function X(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Vc(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=td(a,b);if("local"==d?g+=K(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=je(a.display.lineSpace);g+=h.top+("window"==d?0:W());var i=h.left+("window"==d?0:V());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function Y(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=V(),e-=W();else if("local"==c||!c){var f=je(a.display.sizer);d+=f.left,e+=f.top}var g=je(a.display.lineSpace);return{left:d-g.left,top:e-g.top}}function Z(a,b,c,d,e){return d||(d=nd(a.doc,b.line)),X(a,d,N(a,d,b.ch,null,e),c)}function $(a,b,c,d,e){function f(b,f){var g=N(a,d,b,e,f?"right":"left");return f?g.left=g.right:g.right=g.left,X(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==oe(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=pe(c)-(c.level%2?0:1),d=!0):a==pe(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=oe(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||nd(a.doc,b.line),e||(e=Q(a,d));var h=ud(d),i=b.ch;if(!h)return f(i);var j=ve(h,i),k=g(i,j);return null!=Lf&&(k.other=g(i,Lf)),k}function _(a,b,c,d){var e=new Vb(a,b);return e.xRel=d,c&&(e.outside=!0),e}function ab(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return _(d.first,0,!0,-1);var e=sd(d,c),f=d.first+d.size-1;if(e>f)return _(d.first+d.size-1,nd(d,f).text.length,!0,1);for(0>b&&(b=0);;){var g=nd(d,e),h=bb(a,g,e,b,c),i=Oc(g),j=i&&i.find();if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=j.to.line}}function bb(a,b,c,d,e){function f(d){var e=$(a,Vb(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-td(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=Q(a,b),k=ud(b),l=b.text.length,m=qe(b),n=re(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return _(c,n,r,1);for(;;){if(k?n==m||n==xe(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);Df.test(b.text.charAt(s));)++s;var u=_(c,s,s==m?p:r,0>t?-1:t?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=xe(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function cb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Re){Re=fe("pre");for(var b=0;49>b;++b)Re.appendChild(document.createTextNode("x")),Re.appendChild(fe("br"));Re.appendChild(document.createTextNode("x"))}he(a.measure,Re);var c=Re.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),ge(a.measure),c||1}function db(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=fe("span","x"),c=fe("pre",[b]);he(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function eb(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Ye},yf++||(xf=[])}function fb(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=T(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+zf)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&Ab(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=$(a,c.sel.head);g=jc(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||b.forceUpdate||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&C(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&hc(a,$b(a.doc,b.scrollToPos.from),$b(a.doc,b.scrollToPos.to),b.scrollToPos.margin)):g&&gc(a),b.selectionChanged&&F(a),a.state.focused&&b.updateInput&&nb(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Pd(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Pd(k[m],"unhide");var n;if(--yf||(n=xf,xf=null),b.textChanged&&Pd(a,"change",a,b.textChanged),b.cursorActivity&&Pd(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function gb(a,b){return function(){var c=a||this,d=!c.curOp;d&&eb(c);try{var e=b.apply(c,arguments)}finally{d&&fb(c)}return e}}function hb(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&eb(this.cm);try{b=a.apply(this,arguments)}finally{c&&fb(this.cm)}return b}}function ib(a,b){var c,d=!a.curOp;d&&eb(a);try{c=b()}finally{d&&fb(a)}return c}function jb(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function kb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){mb(a),a.state.focused&&kb(a)})}function lb(a){function b(){var d=mb(a);d||c?(a.display.pollingFast=!1,kb(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function mb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||If(b)||pb(a)||a.state.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var f=b.value;if(f==c&&Wb(e.from,e.to))return!1;if(Ae&&!Ce&&a.display.inputHasSelection===f)return nb(a,!0),!1;var g=!a.curOp;g&&eb(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);i>h&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Vb(j.line,j.ch-(c.length-h)):a.state.overwrite&&Wb(j,k)&&!a.state.pasteIncoming&&(k=Vb(k.line,Math.min(nd(d,k.line).text.length,k.ch+(f.length-h))));
var l=a.curOp.updateInput,m={from:j,to:k,text:Hf(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"};return Ob(a.doc,m,"end"),a.curOp.updateInput=l,Qd(a,"inputRead",a,m),f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&fb(a),a.state.pasteIncoming=!1,!0}function nb(a,b){var c,d,e=a.doc;if(Wb(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",Ae&&!Ce&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=Jf&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Zd(a.display.input),Ae&&!Ce&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function ob(a){"nocursor"==a.options.readOnly||Ne&&document.activeElement==a.display.input||a.display.input.focus()}function pb(a){return a.options.readOnly||a.doc.cantEdit}function qb(a){function b(){a.state.focused&&setTimeout(ce(ob,a),0)}function c(){null==h&&(h=setTimeout(function(){h=null,g.cachedCharWidth=g.cachedTextHeight=Ff=null,U(a),ib(a,ce(jb,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Od(window,"resize",c)}function e(b){Rd(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Gd(b))||Kd(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Zd(g.input))}var g=a.display;Nd(g.scroller,"mousedown",gb(a,tb)),Ae?Nd(g.scroller,"dblclick",gb(a,function(b){if(!Rd(a,b)){var c=sb(a,b);if(c&&!wb(a,b)&&!rb(a.display,b)){Hd(b);var d=qc(nd(a.doc,c.line).text,c);bc(a.doc,d.from,d.to)}}})):Nd(g.scroller,"dblclick",function(b){Rd(a,b)||Hd(b)}),Nd(g.lineSpace,"selectstart",function(a){rb(g,a)||Hd(a)}),Ve||Nd(g.scroller,"contextmenu",function(b){Kb(a,b)}),Nd(g.scroller,"scroll",function(){g.scroller.clientHeight&&(zb(a,g.scroller.scrollTop),Ab(a,g.scroller.scrollLeft,!0),Pd(a,"scroll",a))}),Nd(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&zb(a,g.scrollbarV.scrollTop)}),Nd(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&Ab(a,g.scrollbarH.scrollLeft)}),Nd(g.scroller,"mousewheel",function(b){Bb(a,b)}),Nd(g.scroller,"DOMMouseScroll",function(b){Bb(a,b)}),Nd(g.scrollbarH,"mousedown",b),Nd(g.scrollbarV,"mousedown",b),Nd(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var h;Nd(window,"resize",c),setTimeout(d,5e3),Nd(g.input,"keyup",gb(a,function(b){Rd(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Gd(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Nd(g.input,"input",function(){Ae&&!Ce&&a.display.inputHasSelection&&(a.display.inputHasSelection=null),lb(a)}),Nd(g.input,"keydown",gb(a,Gb)),Nd(g.input,"keypress",gb(a,Hb)),Nd(g.input,"focus",ce(Ib,a)),Nd(g.input,"blur",ce(Jb,a)),a.options.dragDrop&&(Nd(g.scroller,"dragstart",function(b){yb(a,b)}),Nd(g.scroller,"dragenter",e),Nd(g.scroller,"dragover",e),Nd(g.scroller,"drop",gb(a,xb))),Nd(g.scroller,"paste",function(b){rb(g,b)||(ob(a),lb(a))}),Nd(g.input,"paste",function(){if(De&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var b=g.input.selectionStart,c=g.input.selectionEnd;g.input.value+="$",g.input.selectionStart=b,g.input.selectionEnd=c,a.state.fakedLastChar=!0}a.state.pasteIncoming=!0,lb(a)}),Nd(g.input,"cut",f),Nd(g.input,"copy",f),Ie&&Nd(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),ob(a)})}function rb(a,b){for(var c=Ld(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function sb(a,b,c){var d=a.display;if(!c){var e=Ld(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller||e==d.gutterFiller)return null}var f,g,h=je(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return ab(a,f-h.left,g-h.top)}function tb(a){function b(a){if(!Wb(r,a)){if(r=a,"single"==k)return void bc(e.doc,$b(g,i),a);if(p=$b(g,p),q=$b(g,q),"double"==k){var b=qc(nd(g,a.line).text,a);Xb(a,p)?bc(e.doc,b.from,q):bc(e.doc,p,b.to)}else"triple"==k&&(Xb(a,p)?bc(e.doc,q,$b(g,Vb(a.line,0))):bc(e.doc,p,$b(g,Vb(a.line+1,0))))}}function c(a){var d=++t,h=sb(e,a,!0);if(h)if(Wb(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(gb(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Ib(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(gb(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0,Hd(a),ob(e),Od(document,"mousemove",u),Od(document,"mouseup",v)}if(!Rd(this,a)){var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,rb(f,a))return void(De||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)));if(!wb(e,a)){var i=sb(e,a);switch(Md(a)){case 3:return void(Ve&&Kb.call(e,e,a));case 2:return De&&(e.state.lastMiddleDown=+new Date),i&&bc(e.doc,i),setTimeout(ce(ob,e),20),void Hd(a)}if(!i)return void(Ld(a)==f.scroller&&Hd(a));e.state.focused||Ib(e);var j=+new Date,k="single";if(Te&&Te.time>j-400&&Wb(Te.pos,i))k="triple",Hd(a),setTimeout(ce(ob,e),20),rc(e,i.line);else if(Se&&Se.time>j-400&&Wb(Se.pos,i)){k="double",Te={time:j,pos:i},Hd(a);var l=qc(nd(g,i.line).text,i);bc(e.doc,l.from,l.to)}else Se={time:j,pos:i};var m=i;if(e.options.dragDrop&&Ef&&!pb(e)&&!Wb(h.from,h.to)&&!Xb(i,h.from)&&!Xb(h.to,i)&&"single"==k){var n=gb(e,function(b){De&&(f.scroller.draggable=!1),e.state.draggingText=!1,Od(document,"mouseup",n),Od(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Hd(b),bc(e.doc,i),ob(e))});return De&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Nd(document,"mouseup",n),void Nd(f.scroller,"drop",n)}Hd(a),"single"==k&&bc(e.doc,$b(g,i));var p=h.from,q=h.to,r=i,s=je(f.wrapper),t=0,u=gb(e,function(a){Ae||Md(a)?c(a):d(a)}),v=gb(e,d);Nd(document,"mousemove",u),Nd(document,"mouseup",v)}}}function ub(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(b){return!1}if(f>=Math.floor(je(a.display.gutters).right))return!1;d&&Hd(b);var h=a.display,i=je(h.lineDiv);if(g>i.bottom||!Td(a,c))return Jd(b);g-=i.top-h.viewOffset;for(var j=0;j<a.options.gutters.length;++j){var k=h.gutters.childNodes[j];if(k&&je(k).right>=f){var l=sd(a.doc,g),m=a.options.gutters[j];return e(a,c,a,l,m,b),Jd(b)}}}function vb(a,b){return Td(a,"gutterContextMenu")?ub(a,b,"gutterContextMenu",!1,Pd):!1}function wb(a,b){return ub(a,b,"gutterClick",!0,Qd)}function xb(a){var b=this;if(!(Rd(b,a)||rb(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Gd(a)))){Hd(a),Ae&&(Ze=+new Date);var c=sb(b,a,!0),d=a.dataTransfer.files;if(c&&!pb(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=$b(b.doc,c),Ob(b.doc,{from:c,to:c,text:Hf(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&!Xb(c,b.doc.sel.from)&&!Xb(b.doc.sel.to,c))return b.state.draggingText(a),void setTimeout(ce(ob,b),20);try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;dc(b.doc,c,c),b.state.draggingText&&Ub(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),ob(b),Ib(b)}}catch(a){}}}}function yb(a,b){if(Ae&&(!a.state.draggingText||+new Date-Ze<100))return void Kd(b);if(!Rd(a,b)&&!rb(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage&&!He){var d=fe("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ge&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),Ge&&d.parentNode.removeChild(d)}}}function zb(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,ze||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),ze&&t(a,[]),G(a,100))}function Ab(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Bb(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Oe&&De)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!ze&&!Ge&&null!=_e)return d&&zb(a,Math.max(0,Math.min(f.scrollTop+d*_e,f.scrollHeight-f.clientHeight))),Ab(a,Math.max(0,Math.min(f.scrollLeft+c*_e,f.scrollWidth-f.clientWidth))),Hd(b),void(e.wheelStartX=null);if(d&&null!=_e){var h=d*_e,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;0>h?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}20>$e&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(_e=(_e*$e+c)/($e+1),++$e)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function Cb(a,b,c){if("string"==typeof b&&(b=nf[b],!b))return!1;a.display.pollingFast&&mb(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{pb(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=Af}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Db(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Eb(a,b){var c=vc(a.options.keyMap),d=c.auto;clearTimeout(af),d&&!xc(b)&&(af=setTimeout(function(){vc(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=yc(b,!0),f=!1;if(!e)return!1;var h=Db(a);return f=b.shiftKey?wc("Shift-"+e,h,function(b){return Cb(a,b,!0)})||wc(e,h,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?Cb(a,b):void 0}):wc(e,h,function(b){return Cb(a,b)}),f&&(Hd(b),F(a),Ce&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Qd(a,"keyHandled",a,e,b)),f}function Fb(a,b,c){var d=wc("'"+c+"'",Db(a),function(b){return Cb(a,b,!0)});return d&&(Hd(b),F(a),Qd(a,"keyHandled",a,"'"+c+"'",b)),d}function Gb(a){var b=this;if(b.state.focused||Ib(b),!(Rd(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Gd(a)))){Ae&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=Eb(b,a);Ge&&(cf=d?c:null,!d&&88==c&&!Jf&&(Oe?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Hb(a){var b=this;if(!(Rd(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Gd(a)))){var c=a.keyCode,d=a.charCode;if(Ge&&c==cf)return cf=null,void Hd(a);if(!(Ge&&(!a.which||a.which<10)||Ie)||!Eb(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!pb(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(gb(b,function(){mc(b,b.doc.sel.to.line,"smart")}),75),Fb(b,a,e)||(Ae&&!Ce&&(b.display.inputHasSelection=null),lb(b))}}}function Ib(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Pd(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),a.curOp||(nb(a,!0),De&&setTimeout(ce(nb,a,!0),0))),kb(a),F(a))}function Jb(a){a.state.focused&&(Pd(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Kb(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value="â"+(Wb(f.from,f.to)?"":e.input.value);e.prevInput="â",e.input.selectionStart=1,e.input.selectionEnd=a.length}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=j,Ce&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=h),kb(a),null!=e.input.selectionStart){(!Ae||Ce)&&c(),clearTimeout(bf);var b=0,d=function(){" "==e.prevInput&&0==e.input.selectionStart?gb(a,nf.selectAll)(a):b++<10?bf=setTimeout(d,500):nb(a)};bf=setTimeout(d,200)}}if(!Rd(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!rb(e,b)&&!vb(a,b)){var g=sb(a,b),h=e.scroller.scrollTop;if(g&&!Ge){var i=a.options.resetSelectionOnContextMenu;i&&(Wb(f.from,f.to)||Xb(g,f.from)||!Xb(g,f.to))&&gb(a,dc)(a.doc,g,g);var j=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ob(a),nb(a,!0),Wb(f.from,f.to)&&(e.input.value=e.prevInput=" "),Ae&&!Ce&&c(),Ve){Kd(b);var k=function(){Od(window,"mouseup",k),setTimeout(d,20)};Nd(window,"mouseup",k)}else setTimeout(d,50)}}}}function Lb(a,b,c){if(!Xb(b.from,c))return $b(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Vb(f,nd(a,f).text.length):_b(c,nd(a,e).text.length)}if(c.line==b.to.line+d)return _b(c,Yd(b.text).length+(1==b.text.length?b.from.ch:0)+nd(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return _b(c,b.text[g].length+(g?0:b.from.ch))}function Mb(a,b,c){if(c&&"object"==typeof c)return{anchor:Lb(a,b,c.anchor),head:Lb(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=df(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Xb(a,b.from))return a;if(!Xb(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Vb(c,e)};return{anchor:e(a.sel.anchor),head:e(a.sel.head)}}function Nb(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=$b(a,b)),c&&(this.to=$b(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Pd(a,"beforeChange",a,d),a.cm&&Pd(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Ob(a,b,c,d){if(a.cm){if(!a.cm.curOp)return gb(a.cm,Ob)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Td(a,"beforeChange")||a.cm&&Td(a.cm,"beforeChange"))||(b=Nb(a,b,!0))){var e=We&&!d&&Lc(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Pb(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Pb(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Pb(a,b,c)}}function Pb(a,b,c){if(1!=b.text.length||""!=b.text[0]||!Wb(b.from,b.to)){var d=Mb(a,b,c);yd(a,b,d,a.cm?a.cm.curOp.id:0/0),Sb(a,b,d,Jc(a,b));var e=[];ld(a,function(a,c){c||-1!=$d(e,a.history)||(Ed(a.history,b),e.push(a.history)),Sb(a,b,null,Jc(a,b))})}}function Qb(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e),c.generation=d.generation||++c.maxGeneration;for(var f=Td(a,"beforeChange")||a.cm&&Td(a.cm,"beforeChange"),g=d.changes.length-1;g>=0;--g){var h=d.changes[g];if(h.origin=b,f&&!Nb(a,h,!1))return void(("undo"==b?c.done:c.undone).length=0);e.changes.push(xd(a,h));var i=g?Mb(a,h,null):{anchor:d.anchorBefore,head:d.headBefore};Sb(a,h,i,Kc(a,h));var j=[];ld(a,function(a,b){b||-1!=$d(j,a.history)||(Ed(a.history,h),j.push(a.history)),Sb(a,h,null,Kc(a,h))})}}}}function Rb(a,b){function c(a){return Vb(a.line+b,a.ch)}a.first+=b,a.cm&&jb(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Sb(a,b,c,d){if(a.cm&&!a.cm.curOp)return gb(a.cm,Sb)(a,b,c,d);if(b.to.line<a.first)return void Rb(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Rb(a,e),b={from:Vb(a.first,0),to:Vb(b.to.line+e,b.to.ch),text:[Yd(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Vb(f,nd(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=od(a,b.from,b.to),c||(c=Mb(a,b,null)),a.cm?Tb(a.cm,b,d,c):id(a,b,d,c)}}function Tb(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=rd(Pc(f,nd(f,h.line))),f.iter(l,i.line+1,function(a){return a==g.maxLine?(j=!0,!0):void 0})),Xb(f.sel.head,b.from)||Xb(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),id(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),G(a,400);var m=b.text.length-(i.line-h.line)-1;if(jb(a,h.line,i.line+1,m),Td(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Ub(a,b,c,d,e){if(d||(d=c),Xb(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=Hf(b)),Ob(a,{from:c,to:d,text:b,origin:e},null)}function Vb(a,b){return this instanceof Vb?(this.line=a,void(this.ch=b)):new Vb(a,b)}function Wb(a,b){return a.line==b.line&&a.ch==b.ch}function Xb(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Yb(a){return Vb(a.line,a.ch)}function Zb(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function $b(a,b){if(b.line<a.first)return Vb(a.first,0);var c=a.first+a.size-1;return b.line>c?Vb(c,nd(a,c).text.length):_b(b,nd(a,b.line).text.length)}function _b(a,b){var c=a.ch;return null==c||c>b?Vb(a.line,b):0>c?Vb(a.line,0):a}function ac(a,b){return b>=a.first&&b<a.first+a.size}function bc(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Xb(b,e);f!=Xb(c,e)?(e=b,b=c):f!=Xb(b,c)&&(b=c)}dc(a,e,b,d)}else dc(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function cc(a,b,c){var d={anchor:b,head:c};return Pd(a,"beforeSelectionChange",a,d),a.cm&&Pd(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=$b(a,d.anchor),d.head=$b(a,d.head),d}function dc(a,b,c,d,e){if(!e&&Td(a,"beforeSelectionChange")||a.cm&&Td(a.cm,"beforeSelectionChange")){var f=cc(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,null==d&&(d=Xb(c,g.head)?-1:1),(e||!Wb(b,g.anchor))&&(b=fc(a,b,d,"push"!=e)),(e||!Wb(c,g.head))&&(c=fc(a,c,d,"push"!=e)),!Wb(g.anchor,b)||!Wb(g.head,c)){g.anchor=b,g.head=c;var h=Xb(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Qd(a,"cursorActivity",a)}}function ec(a){dc(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function fc(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=nd(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Pd(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[0>g?"from":"to"];if(Wb(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?$b(a,Vb(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Vb(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Vb(a.first,0)):fc(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function gc(a){var b=hc(a,a.doc.sel.head,null,a.options.cursorScrollMargin);if(a.state.focused){var c=a.display,d=je(c.sizer),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Le){var f="none"==c.cursor.style.display;f&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),f&&(c.cursor.style.display="none")}}}function hc(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=$(a,b),g=c&&c!=b?$(a,c):f,h=jc(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),i=a.doc.scrollTop,j=a.doc.scrollLeft;if(null!=h.scrollTop&&(zb(a,h.scrollTop),Math.abs(a.doc.scrollTop-i)>1&&(e=!0)),null!=h.scrollLeft&&(Ab(a,h.scrollLeft),Math.abs(a.doc.scrollLeft-j)>1&&(e=!0)),!e)return f}}function ic(a,b,c,d,e){var f=jc(a,b,c,d,e);null!=f.scrollTop&&zb(a,f.scrollTop),null!=f.scrollLeft&&Ab(a,f.scrollLeft)}function jc(a,b,c,d,e){var f=a.display,g=cb(a.display);0>c&&(c=0);var h=f.scroller.clientHeight-zf,i=f.scroller.scrollTop,j={},k=a.doc.height+L(f),l=g>c,m=e>k-g;if(i>c)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-zf,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return p+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function kc(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function lc(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function mc(a,b,c,d){var e=a.doc;if(null==c&&(c="add"),"smart"==c)if(a.doc.mode.indent)var f=J(a,b);else c="prev";var g,h=a.options.tabSize,i=nd(e,b),j=Wd(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text),g==Af)){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Wd(nd(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c?g=j-a.options.indentUnit:"number"==typeof c&&(g=j+c),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="	";g>m&&(l+=Xd(g-m)),l!=k&&Ub(a.doc,l,Vb(b,0),Vb(b,k.length),"+input"),i.stateAfter=null}function nc(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=nd(f,Zb(f,b)):d=rd(b),null==d?null:c(e,d)?(jb(a,d,d+1),e):null}function oc(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=nd(a,b))}function g(a){var b=(e?xe:ye)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?re:qe)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=nd(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=!0;!(0>c)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=de(p)?"w":n?/\s/.test(p)?null:"p":null;if(m&&m!=q){0>c&&(c=1,g());break}if(q&&(m=q),c>0&&!g(!o))break}var r=fc(a,Vb(h,i),j,!0);return l||(r.hitSide=!0),r}function pc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*cb(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=ab(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function qc(a,b){var c=b.ch,d=b.ch;if(a){(b.xRel<0||d==a.length)&&c?--c:++d;for(var e=a.charAt(c),f=de(e)?de:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!de(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Vb(b.line,c),to:Vb(b.line,d)}}function rc(a,b){bc(a.doc,Vb(b,0),$b(a.doc,Vb(b+1,0)))}function sc(b,c,d,e){a.defaults[b]=c,d&&(ef[b]=e?function(a,b,c){c!=gf&&d(a,b,c)}:d)}function tc(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function uc(a,b,c){return a.startState?a.startState(b,c):!0}function vc(a){return"string"==typeof a?of[a]:a}function wc(a,b,c){function d(b){b=vc(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;h>g;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function xc(a){var b=Kf[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function yc(a,b){if(Ge&&34==a.keyCode&&a["char"])return!1;var c=Kf[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Ue?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Ue?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function zc(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0}function Ac(a,b){this.lines=[],this.type=b,this.doc=a}function Bc(a,b,c,d,e){if(d&&d.shared)return Dc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return gb(a.cm,Bc)(a,b,c,d,e);var f=new Ac(a,e);if("range"==e&&!Xb(b,c))return f;d&&ae(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=fe("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0)),f.collapsed&&(Xe=!0),f.addToHistory&&yd(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},0/0);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Pc(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Mc(d,c.ch)),j==b.line?g=Mc(d,b.ch):qd(d,0)),Gc(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Qc(a,b)&&qd(b,0)}),f.clearOnEnter&&Nd(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(We=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&jb(l,b.line,c.line+1),f.atomic&&ec(l)),f}function Cc(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Nd(a[c],"clear",function(){d.clear()})}function Dc(a,b,c,d,e){d=ae(d),d.shared=!1;var f=[Bc(a,b,c,d,e)],g=f[0],h=d.replacedWith;return ld(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(Bc(a,$b(a,b),$b(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Yd(f)}),new Cc(f,g)}function Ec(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Fc(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Gc(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Hc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Ic(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Jc(a,b){var c=ac(a,b.from.line)&&nd(a,b.from.line).markedSpans,d=ac(a,b.to.line)&&nd(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Wb(b.from,b.to),h=Hc(c,e,g),i=Ic(d,f,g),j=1==b.text.length,k=Yd(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Ec(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=Ec(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}if(j&&h){for(var l=0;l<h.length;++l)null!=h[l].from&&h[l].from==h[l].to&&"bookmark"!=h[l].marker.type&&h.splice(l--,1);h.length||(h=null)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Kc(a,b){var c=Ad(a,b),d=Jc(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Lc(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=$d(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Xb(j.to,h.from)&&!Xb(h.to,j.from)){var k=[i,1];(Xb(j.from,h.from)||!g.inclusiveLeft&&Wb(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Xb(h.to,j.to)||!g.inclusiveRight&&Wb(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Mc(a,b){var c,d=Xe&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Nc(a){return Mc(a,-1)}function Oc(a){return Mc(a,a.text.length+1)}function Pc(a,b){for(var c;c=Nc(b);)b=nd(a,c.find().from.line);return b}function Qc(a,b){var c=Xe&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&Rc(a,b,d))return!0}}function Rc(a,b,c){if(null==c.to){var d=c.marker.find().to,e=nd(a,d.line);return Rc(a,e,Ec(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&!f.marker.replacedWith&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Rc(a,b,f))return!0}function Sc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Tc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Uc(a){return function(){var b=!this.cm.curOp;b&&eb(this.cm);try{var c=a.apply(this,arguments)}finally{b&&fb(this.cm)}return c}}function Vc(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||he(a.cm.display.measure,fe("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Wc(a,b,c,d){var e=new pf(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),nc(a,b,function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Qc(a.doc,b)||e.showIfHidden){var d=td(a,b)<a.doc.scrollTop;qd(b,b.height+Vc(e)),d&&lc(a,0,e.height)}return!0}),e}function Xc(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Sc(a),Tc(a,c);var e=d?d(a):1;e!=a.height&&qd(a,e)}function Yc(a){a.parent=null,Sc(a)}function Zc(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g,h=0,i=null,j=new zc(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();)j.pos>a.options.maxHighlightLength?(f=!1,j.pos=b.length,g=null):g=c.token(j,d),f&&i==g||(h<j.start&&e(j.start,i),h=j.start,i=g),j.start=j.pos;for(;h<j.pos;){var k=Math.min(j.pos,h+5e4);e(k,i),h=k}}function $c(a,b,c){var d=[a.state.modeGen];Zc(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1,h=0;Zc(a,b.text,f.mode,!0,function(a,b){for(var c=g;a>h;){var e=d[g];e>a&&d.splice(g,1,a,d[g+1],e),g+=2,h=Math.min(a,e)}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;g>c;c+=2){var i=d[c+1];d[c+1]=i?i+" "+b:b}})}return d}function _c(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=$c(a,b,b.stateAfter=J(a,rd(b)))),b.styles
}function ad(a,b,c){var d=a.doc.mode,e=new zc(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function bd(a,b){if(!a)return null;for(;;){var c=a.match(/(?:^|\s)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return rf[a]||(rf[a]="cm-"+a.replace(/ +/g," cm-"))}function cd(a,b,c,d){for(var e,f=b,g=!0;e=Nc(f);)f=nd(a.doc,e.find().from.line);var h={pre:fe("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};do{f.text&&(g=!1),h.measure=f==b&&c,h.pos=0,h.addToken=h.measure?ed:dd,(Ae||De)&&a.getOption("lineWrapping")&&(h.addToken=fd(h.addToken));var i=hd(f,h,_c(a,f));c&&f==b&&!h.measuredSomething&&(c[0]=h.pre.appendChild(me(a.display.measure)),h.measuredSomething=!0),i&&(f=nd(a.doc,i.to.line))}while(i);!c||h.measuredSomething||c[0]||(c[0]=h.pre.appendChild(g?fe("span","Â "):me(a.display.measure))),h.pre.firstChild||Qc(a.doc,b)||h.pre.appendChild(document.createTextNode("Â "));var j;if(c&&Ae&&(j=ud(f))){var k=j.length-1;j[k].from==j[k].to&&--k;var l=j[k],m=j[k-1];if(l.from+1==l.to&&m&&l.level<m.level){var n=c[h.pos-1];n&&n.parentNode.insertBefore(n.measureRight=me(a.display.measure),n.nextSibling)}}var o=h.textClass?h.textClass+" "+(b.textClass||""):b.textClass;return o&&(h.pre.className=o),Pd(a,"renderLine",a,b,h.pre),h}function dd(a,b,c,d,e,f){if(b){if(sf.test(b))for(var g=document.createDocumentFragment(),h=0;;){sf.lastIndex=h;var i=sf.exec(b),j=i?i.index-h:b.length-h;if(j&&(g.appendChild(document.createTextNode(b.slice(h,h+j))),a.col+=j),!i)break;if(h+=j+1,"	"==i[0]){var k=a.cm.options.tabSize,l=k-a.col%k;g.appendChild(fe("span",Xd(l),"cm-tab")),a.col+=l}else{var m=fe("span","â¢","cm-invalidchar");m.title="\\u"+i[0].charCodeAt(0).toString(16),g.appendChild(m),a.col+=1}}else{a.col+=b.length;var g=document.createTextNode(b)}if(c||d||e||a.measure){var n=c||"";d&&(n+=d),e&&(n+=e);var m=fe("span",[g],n);return f&&(m.title=f),a.pre.appendChild(m)}a.pre.appendChild(g)}}function ed(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>="í "&&"í¯¿">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&ke(b,g)&&a.pre.appendChild(fe("wbr"));var j=a.measure[a.pos],k=a.measure[a.pos]=dd(a,h,c,i&&d,g==b.length-1&&e);j&&(k.leftSide=j.leftSide||j),Ae&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(k.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.measuredSomething=!0)}function fd(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"Â ";return b+=" "}return function(c,d,e,f,g,h){return a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function gd(a,b,c,d){var e=!d&&c.replacedWith;if(e&&(a.copyWidgets&&(e=e.cloneNode(!0)),a.pre.appendChild(e),a.measure)){if(b)a.measure[a.pos]=e;else{var f=me(a.cm.display.measure);if("bookmark"!=c.type||c.insertLeft){if(a.measure[a.pos])return;a.measure[a.pos]=a.pre.insertBefore(f,e)}else a.measure[a.pos]=a.pre.appendChild(f)}a.measuredSomething=!0}a.pos+=b}function hd(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m=e.length,n=0,o=1,p="",q=0;;){if(q==n){h=i=j=k="",l=null,q=1/0;for(var r=[],s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=n&&(null==t.to||t.to>n)?(null!=t.to&&q>t.to&&(q=t.to,i=""),u.className&&(h+=" "+u.className),u.startStyle&&t.from==n&&(j+=" "+u.startStyle),u.endStyle&&t.to==q&&(i+=" "+u.endStyle),u.title&&!k&&(k=u.title),u.collapsed&&(!l||l.marker.size<u.size)&&(l=t)):t.from>n&&q>t.from&&(q=t.from),"bookmark"==u.type&&t.from==n&&u.replacedWith&&r.push(u)}if(l&&(l.from||0)==n&&(gd(b,(null==l.to?m:l.to)-n,l.marker,null==l.from),null==l.to))return l.marker.find();if(!l&&r.length)for(var s=0;s<r.length;++s)gd(b,0,r[s])}if(n>=m)break;for(var v=Math.min(m,q);;){if(p){var w=n+p.length;if(!l){var x=w>v?p.slice(0,v-n):p;b.addToken(b,x,g?g+h:h,j,n+x.length==q?i:"",k)}if(w>=v){p=p.slice(v-n),n=v;break}n=w,j=""}p=e.slice(f,f=c[o++]),g=bd(c[o++],b)}}else for(var o=1;o<c.length;o+=2)b.addToken(b,e.slice(f,f=c[o]),bd(c[o+1],b))}function id(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Xc(a,c,d,e),Qd(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=nd(a,h.line),l=nd(a,i.line),m=Yd(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];q>p;++p)r.push(new qf(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;q>p;++p)r.push(new qf(j[p],f(p),e));r.push(new qf(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];q>p;++p)r.push(new qf(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Qd(a,"change",a,b),dc(a,d.anchor,d.head,null,!0)}function jd(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function kd(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function ld(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function md(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,jb(a)}function nd(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function od(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function pd(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function qd(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function rd(a){if(null==a.parent)return null;for(var b=a.parent,c=$d(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function sd(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function td(a,b){b=Pc(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function ud(a){var b=a.order;return null==b&&(b=a.order=Mf(a.text)),b}function vd(a){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function wd(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function xd(a,b){var c={line:b.from.line,ch:b.from.ch},d={from:c,to:df(b),text:od(a,b.from,b.to)};return wd(a,d,b.from.line,b.to.line+1),ld(a,function(a){wd(a,d,b.from.line,b.to.line+1)},!0),d}function yd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Yd(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Yd(g.changes);Wb(b.from,b.to)&&Wb(b.from,h.to)?h.to=df(b):g.changes.push(xd(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else for(g={changes:[xd(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function zd(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function Ad(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(zd(c[d]));return e}function Bd(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&$d(b,Number(i[1]))>-1&&(Yd(g)[k]=j[k],delete j[k])}}return d}function Cd(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Dd(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Yb(i.from),i.to=Yb(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Yb(f.anchorBefore),f.headBefore=Yb(f.headBefore),f.anchorAfter=Yb(f.anchorAfter),f.readAfter=Yb(f.headAfter),f.copied=!0),g?(Cd(f.anchorBefore),Cd(f.headBefore),Cd(f.anchorAfter),Cd(f.headAfter)):(a.splice(0,e+1),e=0)}}function Ed(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Dd(a.done,c,d,e),Dd(a.undone,c,d,e)}function Fd(){Kd(this)}function Gd(a){return a.stop||(a.stop=Fd),a}function Hd(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Id(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Jd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Kd(a){Hd(a),Id(a)}function Ld(a){return a.target||a.srcElement}function Md(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Oe&&a.ctrlKey&&1==b&&(b=3),b}function Nd(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Od(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Pd(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Qd(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);xf||(++yf,xf=[],setTimeout(Sd,0));for(var f=0;f<d.length;++f)xf.push(c(d[f]))}}function Rd(a,b,c){return Pd(a,c||b.type,a,b),Jd(b)||b.codemirrorIgnore}function Sd(){--yf;var a=xf;xf=null;for(var b=0;b<a.length;++b)a[b]()}function Td(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Ud(a){a.prototype.on=function(a,b){Nd(this,a,b)},a.prototype.off=function(a,b){Od(this,a,b)}}function Vd(){this.id=null}function Wd(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;b>f;++f)"	"==a.charAt(f)?g+=c-g%c:++g;return g}function Xd(a){for(;Bf.length<=a;)Bf.push(Yd(Bf)+" ");return Bf[a]}function Yd(a){return a[a.length-1]}function Zd(a){if(Me)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function $d(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function _d(a,b){function c(){}c.prototype=a;var d=new c;return b&&ae(b,d),d}function ae(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function be(a){for(var b=[],c=0;a>c;++c)b.push(void 0);return b}function ce(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function de(a){return/\w/.test(a)||a>"Â"&&(a.toUpperCase()!=a.toLowerCase()||Cf.test(a))}function ee(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function fe(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)ie(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function ge(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function he(a,b){return ge(a).appendChild(b)}function ie(a,b){Ce?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function je(a){return a.getBoundingClientRect()}function ke(){return!1}function le(a){if(null!=Ff)return Ff;var b=fe("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return he(a,b),b.offsetWidth&&(Ff=b.offsetHeight-b.clientHeight),Ff||0}function me(a){if(null==Gf){var b=fe("span","â");he(a,fe("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Gf=b.offsetWidth<=1&&b.offsetHeight>2&&!Be)}return Gf?fe("span","â"):fe("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ne(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function oe(a){return a.level%2?a.to:a.from}function pe(a){return a.level%2?a.from:a.to}function qe(a){var b=ud(a);return b?oe(b[0]):0}function re(a){var b=ud(a);return b?pe(Yd(b)):a.text.length}function se(a,b){var c=nd(a.doc,b),d=Pc(a.doc,c);d!=c&&(b=rd(d));var e=ud(d),f=e?e[0].level%2?re(d):qe(d):0;return Vb(b,f)}function te(a,b){for(var c,d;c=Oc(d=nd(a.doc,b));)b=c.find().to.line;var e=ud(d),f=e?e[0].level%2?qe(d):re(d):d.text.length;return Vb(b,f)}function ue(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function ve(a,b){for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return Lf=null,d;if(e.from==b||e.to==b){if(null!=c)return ue(a,e.level,a[c].level)?(Lf=c,d):(Lf=d,c);c=d}}return Lf=null,c}function we(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&Df.test(a.text.charAt(b)));return b}function xe(a,b,c,d){var e=ud(a);if(!e)return ye(a,b,c,d);for(var f=ve(e,b),g=e[f],h=we(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return ve(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?we(a,g.to,-1,d):we(a,g.from,1,d)}}function ye(a,b,c,d){var e=b+c;if(d)for(;e>0&&Df.test(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var ze=/gecko\/\d/i.test(navigator.userAgent),Ae=/MSIE \d/.test(navigator.userAgent),Be=Ae&&(null==document.documentMode||document.documentMode<8),Ce=Ae&&(null==document.documentMode||document.documentMode<9),De=/WebKit\//.test(navigator.userAgent),Ee=De&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Fe=/Chrome\//.test(navigator.userAgent),Ge=/Opera\//.test(navigator.userAgent),He=/Apple Computer/.test(navigator.vendor),Ie=/KHTML\//.test(navigator.userAgent),Je=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Ke=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Le=/PhantomJS/.test(navigator.userAgent),Me=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ne=Me||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Oe=Me||/Mac/.test(navigator.platform),Pe=/win/i.test(navigator.platform),Qe=Ge&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Qe&&(Qe=Number(Qe[1])),Qe&&Qe>=15&&(Ge=!1,De=!0);var Re,Se,Te,Ue=Oe&&(Ee||Ge&&(null==Qe||12.11>Qe)),Ve=ze||Ae&&!Ce,We=!1,Xe=!1,Ye=0,Ze=0,$e=0,_e=null;Ae?_e=-.53:ze?_e=15:Fe?_e=-.7:He&&(_e=-1/3);var af,bf,cf=null,df=a.changeEnd=function(a){return a.text?Vb(a.from.line+a.text.length-1,Yd(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.Pos=Vb,a.prototype={constructor:a,focus:function(){window.focus(),ob(this),Ib(this),lb(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,ef.hasOwnProperty(a)&&gb(this,ef[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:gb(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,jb(this)}),removeOverlay:gb(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void jb(this)}}),indentLine:gb(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),ac(this.doc,a)&&mc(this,a,b,c)}),indentSelection:gb(null,function(a){var b=this.doc.sel;if(Wb(b.from,b.to))return mc(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;c>=d;++d)mc(this,d,a)}),getTokenAt:function(a,b){var c=this.doc;a=$b(c,a);for(var d=J(this,a.line,b),e=this.doc.mode,f=nd(c,a.line),g=new zc(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=e.token(g,d)}return{start:g.start,end:g.pos,string:g.current(),className:h||null,type:h||null,state:d}},getTokenTypeAt:function(a){a=$b(this.doc,a);var b=_c(this,nd(this.doc,a.line)),c=0,d=(b.length-1)/2,e=a.ch;if(0==e)return b[2];for(;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=e)d=f;else{if(!(b[2*f+1]<e))return b[2*f+2];c=f+1}}},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){if(mf.hasOwnProperty(b)){var c=mf[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;return a=Zb(c,null==a?c.first+c.size-1:a),J(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?$b(this.doc,a):a?d.from:d.to,$(this,c,b||"page")},charCoords:function(a,b){return Z(this,$b(this.doc,a),b||"page")},coordsChar:function(a,b){return a=Y(this,a,b||"page"),ab(this,a.left,a.top)},lineAtHeight:function(a,b){return a=Y(this,{top:a,left:0},b||"page").top,sd(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=nd(this.doc,a);return X(this,nd(this.doc,a),{top:0,left:0},b||"page").top+(c?e.height:0)},defaultTextHeight:function(){return cb(this.display)},defaultCharWidth:function(){return db(this.display)},setGutterMarker:gb(null,function(a,b,c){return nc(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&ee(d)&&(a.gutterMarkers=null),!0})}),clearGutter:gb(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,jb(b,d,d+1),ee(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:gb(null,function(a,b,c){return nc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:gb(null,function(a,b,c){return nc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:gb(null,function(a,b,c){return Wc(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!ac(this.doc,a))return null;var b=a;if(a=nd(this.doc,a),!a)return null}else{var b=rd(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=$(this,$b(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&ic(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:gb(null,Gb),execCommand:function(a){return nf[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=$b(this.doc,a);b>f&&(g=oc(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:gb(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Wb(d.from,d.to)?oc(this.doc,d.head,a,b,this.options.rtlMoveVisually):0>a?d.from:d.to,bc(this.doc,c,c,a)}),deleteH:gb(null,function(a,b){var c=this.doc.sel;Wb(c.from,c.to)?Ub(this.doc,"",c.from,oc(this.doc,c.head,a,b,!1),"+delete"):Ub(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=$b(this.doc,a);b>g;++g){var i=$(this,h,"div");if(null==f?f=i.left:i.left=f,h=pc(this,i,e,c),h.hitSide)break}return h},moveV:gb(null,function(a,b){var c=this.doc.sel,d=$(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=pc(this,d,a,b);"page"==b&&lc(this,0,Z(this,e,"div").top-d.top),bc(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:gb(null,function(a,b){kc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=zf;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:gb(null,function(a,b){null==a?a={from:this.doc.sel.head,to:null}:"number"==typeof a?a={from:Vb(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),b||(b=0);var c=a;null!=a.from.line&&(this.curOp.scrollToPos={from:a.from,to:a.to,margin:b},c={from:$(this,a.from),to:$(this,a.to)});var d=jc(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-b,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+b);kc(this,d.scrollLeft,d.scrollTop)}),setSize:gb(null,function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(a){return ib(this,a)},refresh:gb(null,function(){var a=null==this.display.cachedTextHeight;U(this),kc(this,this.doc.scrollLeft,this.doc.scrollTop),jb(this),a&&f(this)}),swapDoc:gb(null,function(a){var b=this.doc;return b.cm=null,md(this,a),U(this),nb(this,!0),kc(this,a.scrollLeft,a.scrollTop),Qd(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ud(a);var ef=a.optionHandlers={},ff=a.defaults={},gf=a.Init={toString:function(){return"CodeMirror.Init"}};sc("value","",function(a,b){a.setValue(b)},!0),sc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),sc("indentUnit",2,c,!0),sc("indentWithTabs",!1),sc("smartIndent",!0),sc("tabSize",4,function(a){c(a),U(a),jb(a)},!0),sc("electricChars",!0),sc("rtlMoveVisually",!Pe),sc("theme","default",function(a){h(a),i(a)},!0),sc("keyMap","default",g),sc("extraKeys",null),sc("onKeyEvent",null),sc("onDragEvent",null),sc("lineWrapping",!1,d,!0),sc("gutters",[],function(a){m(a.options),i(a)},!0),sc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),sc("coverGutterNextToScrollbar",!1,n,!0),sc("lineNumbers",!1,function(a){m(a.options),i(a)},!0),sc("firstLineNumber",1,i,!0),sc("lineNumberFormatter",function(a){return a},i,!0),sc("showCursorWhenSelecting",!1,C,!0),sc("resetSelectionOnContextMenu",!0),sc("readOnly",!1,function(a,b){"nocursor"==b?(Jb(a),a.display.input.blur()):b||nb(a,!0)}),sc("dragDrop",!0),sc("cursorBlinkRate",530),sc("cursorScrollMargin",0),sc("cursorHeight",1),sc("workTime",100),sc("workDelay",100),sc("flattenSpans",!0),sc("pollInterval",100),sc("undoDepth",40,function(a,b){a.doc.history.undoDepth=b}),sc("historyEventDelay",500),sc("viewportMargin",10,function(a){a.refresh()},!0),sc("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),sc("crudeMeasuringFrom",1e4),sc("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),sc("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),sc("autofocus",null);var hf=a.modes={},jf=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}hf[b]=c},a.defineMIME=function(a,b){jf[a]=b},a.resolveMode=function(b){if("string"==typeof b&&jf.hasOwnProperty(b))b=jf[b];else if(b&&"string"==typeof b.name&&jf.hasOwnProperty(b.name)){var c=jf[b.name];b=_d(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=hf[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(kf.hasOwnProperty(c.name)){var f=kf[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var kf=a.modeExtensions={};a.extendMode=function(a,b){var c=kf.hasOwnProperty(a)?kf[a]:kf[a]={};ae(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){uf.prototype[a]=b},a.defineOption=sc;var lf=[];a.defineInitHook=function(a){lf.push(a)};var mf=a.helpers={};a.registerHelper=function(b,c,d){mf.hasOwnProperty(b)||(mf[b]=a[b]={}),mf[b][c]=d},a.isWordChar=de,a.copyState=tc,a.startState=uc,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var nf=a.commands={selectAll:function(a){a.setSelection(Vb(a.firstLine(),0),Vb(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Wb(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Vb(b.line),"+delete"):a.replaceRange("",b,Vb(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Vb(b,0),Vb(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",Vb(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Vb(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Vb(a.lastLine()))},goLineStart:function(a){a.extendSelection(se(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=se(a,b.line),d=a.getLineHandle(c.line),e=ud(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Vb(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(te(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Vb(b.line,b.ch-1),Vb(b.line,b.ch+1))},newlineAndIndent:function(a){gb(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},of=a.keyMap={};of.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},of.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},of.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},of["default"]=Oe?of.macDefault:of.pcDefault,of.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=wc,a.isModifierKey=xc,a.keyName=yc,a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement
}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Nd(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var i=g.submit=function(){d(),g.submit=h,g.submit(),g.submit=i}}catch(f){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Od(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))},j},zc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Wd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Wd(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=zc,a.TextMarker=Ac,Ud(Ac),Ac.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&eb(a),Td(this,"clear")){var c=this.find();c&&Qd(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=Ec(g.markedSpans,this);null!=h.to&&(e=rd(g)),g.markedSpans=Fc(g.markedSpans,h),null!=h.from?d=rd(g):this.collapsed&&!Qc(this.doc,g)&&a&&qd(g,cb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Pc(a.doc,this.lines[f]),j=k(a.doc,i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&jb(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&ec(a)),b&&fb(a)}},Ac.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Ec(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=rd(d);null!=e.from&&(a=Vb(f,e.from)),null!=e.to&&(b=Vb(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},Ac.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){"bookmark"!=this.type&&(a=a.from);var c=nd(this.doc,a.line);if(P(b,c),a.line>=b.display.showingFrom&&a.line<b.display.showingTo){for(var d=b.display.lineDiv.firstChild;d;d=d.nextSibling)if(d.lineObj==c){d.offsetHeight!=c.height&&qd(c,d.offsetHeight);break}ib(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=!0})}}},Ac.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=$d(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Ac.prototype.detachLine=function(a){if(this.lines.splice($d(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=Cc,Ud(Cc),Cc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Qd(this,"clear")}},Cc.prototype.find=function(){return this.primary.find()};var pf=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};Ud(pf),pf.prototype.clear=Uc(function(){var a=this.line.widgets,b=rd(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);var d=td(this.cm,this.line)<this.cm.doc.scrollTop;qd(this.line,Math.max(0,this.line.height-Vc(this))),d&&lc(this.cm,0,-this.height),jb(this.cm,b,b+1)}}),pf.prototype.changed=Uc(function(){var a=this.height;this.height=null;var b=Vc(this)-a;if(b){qd(this.line,this.line.height+b);var c=rd(this.line);jb(this.cm,c,c+1)}});var qf=a.Line=function(a,b,c){this.text=a,Tc(this,b),this.height=c?c(this):1};Ud(qf);var rf={},sf=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;jd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Yc(e),Qd(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},kd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new jd(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new jd(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new kd(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=$d(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new kd(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var tf=0,uf=a.Doc=function(a,b,c){if(!(this instanceof uf))return new uf(a,b,c);null==c&&(c=0),kd.call(this,[new jd([new qf("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=vd(),this.cleanGeneration=1,this.frontier=c;var d=Vb(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++tf,this.modeOption=b,"string"==typeof a&&(a=Hf(a)),id(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};uf.prototype=_d(kd.prototype,{constructor:uf,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=pd(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:function(a){var b=Vb(this.first,0),c=this.first+this.size-1;Ob(this,{from:b,to:Vb(c,nd(this,c).text.length),text:Hf(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=$b(this,b),c=c?$b(this,c):b,Ub(this,a,b,c,d)},getRange:function(a,b,c){var d=od(this,$b(this,a),$b(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){ac(this,a)&&Ub(this,b,Vb(a,0),$b(this,Vb(a)))},removeLine:function(a){a?Ub(this,"",$b(this,Vb(a-1)),$b(this,Vb(a))):Ub(this,"",Vb(0,0),$b(this,Vb(1,0)))},getLineHandle:function(a){return ac(this,a)?nd(this,a):void 0},getLineNumber:function(a){return rd(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=nd(this,a)),Pc(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return $b(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||a===!1?c.to:c.from,Yb(b)},somethingSelected:function(){return!Wb(this.sel.head,this.sel.anchor)},setCursor:hb(function(a,b,c){var d=$b(this,"number"==typeof a?Vb(a,b||0):a);c?bc(this,d):dc(this,d,d)}),setSelection:hb(function(a,b,c){dc(this,$b(this,a),$b(this,b||a),c)}),extendSelection:hb(function(a,b,c){bc(this,$b(this,a),b&&$b(this,b),c)}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Ob(this,{from:this.sel.from,to:this.sel.to,text:Hf(a),origin:c},b||"around")},undo:hb(function(){Qb(this,"undo")}),redo:hb(function(){Qb(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=vd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Bd(this.history.done),undone:Bd(this.history.undone)}},setHistory:function(a){var b=this.history=vd(this.history.maxGeneration);b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return Bc(this,$b(this,a),$b(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=$b(this,a),Bc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=$b(this,a);var b=[],c=nd(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),$b(this,Vb(c,b))},indexFromPos:function(a){a=$b(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new uf(pd(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new uf(pd(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];ld(b,function(a){e.push(a.id)},!0),b.history=vd(),b.history.done=Bd(this.history.done,e),b.history.undone=Bd(this.history.undone,e)}},iterLinkedDocs:function(a){ld(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),uf.prototype.eachLine=uf.prototype.iter;var vf="iter insert remove copy getEditor".split(" ");for(var wf in uf.prototype)uf.prototype.hasOwnProperty(wf)&&$d(vf,wf)<0&&(a.prototype[wf]=function(a){return function(){return a.apply(this.doc,arguments)}}(uf.prototype[wf]));Ud(uf),a.e_stop=Kd,a.e_preventDefault=Hd,a.e_stopPropagation=Id;var xf,yf=0;a.on=Nd,a.off=Od,a.signal=Pd;var zf=30,Af=a.Pass={toString:function(){return"CodeMirror.Pass"}};Vd.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Wd;var Bf=[""],Cf=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Df=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){je=a};var Ef=function(){if(Ce)return!1;var a=fe("div");return"draggable"in a||"dragDrop"in a}();ze?ke=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:He&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ke=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:De&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?ke=function(a,b){var c=a.charCodeAt(b-1);return c>=8208&&8212>=c}:De&&(ke=function(a,b){if(b>1&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(b>2&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|â¦[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Ff,Gf,Hf=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=Hf;var If=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Jf=function(){var a=fe("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Kf={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=Kf,function(){for(var a=0;10>a;a++)Kf[a+48]=String(a);for(var a=65;90>=a;a++)Kf[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Kf[a+111]=Kf[a+63235]="F"+a}();var Lf,Mf=function(){function a(a){return 255>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1791>=a?c.charAt(a-1536):a>=1792&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;j>l;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;j>l;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;j>l;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];j-1>l;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;j>l;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;j>o&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||j-1>o&&"1"==k[o]?"1":"N",q=l;o>q;++q)k[q]=p;l=o-1}}for(var l=0,n=i;j>l;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;j>l;++l)if(e.test(k[l])){for(var o=l+1;j>o&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(j-1>o?k[o]:i),p=r||s?"L":"R",q=l;o>q;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;j>l;)if(g.test(k[l])){var v=l;for(++l;j>l&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;j>l&&"L"!=k[l];++l);for(var q=w;l>q;)if(h.test(k[q])){q>w&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;l>q&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;l>w&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Yd(u).level&&(t=b.match(/\s+$/))&&(Yd(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Yd(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.19.0",a}(),define("codemirror",function(a){return function(){var b;return b||a.CodeMirror}}(this)),CodeMirror.defineMode("sparql",function(a){function b(a){return new RegExp("^(?:"+a.join("|")+")$","i")}function c(a,b){var c=a.next();if(g=null,"$"==c||"?"==c)return a.match(/^[\w\d]*/),"variable-2";if("<"!=c||a.match(/^[\s\u00a0=]/,!1)){if('"'==c||"'"==c)return b.tokenize=d(c),b.tokenize(a,b);if(/[{}\(\),\.;\[\]]/.test(c))return g=c,null;if("#"==c)return a.skipToEnd(),"comment";if(k.test(c))return a.eatWhile(k),null;if(":"==c)return a.eatWhile(/[\w\d\._\-]/),"atom";if(a.eatWhile(/[_\w\d]/),a.eat(":"))return a.eatWhile(/[\w\d_\-]/),"atom";var e=a.current();return i.test(e)?null:j.test(e)?"keyword":"variable"}return a.match(/^[^\s\u00a0>]*>?/),"atom"}function d(a){return function(b,d){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){d.tokenize=c;break}f=!f&&"\\"==e}return"string"}}function e(a,b,c){a.context={prev:a.context,indent:a.indent,col:c,type:b}}function f(a){a.indent=a.context.indent,a.context=a.context.prev}var g,h=a.indentUnit,i=b(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","isblank","isliteral","a"]),j=b(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc","as","having","undef","values","group","minus","in","not","service","silent","using","insert","delete","union","data","copy","to","move","add","create","drop","clear","load"]),k=/[*+\-<>=&|]/;return{startState:function(){return{tokenize:c,context:null,indent:0,col:0}},token:function(a,b){if(a.sol()&&(b.context&&null==b.context.align&&(b.context.align=!1),b.indent=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"!=c&&b.context&&null==b.context.align&&"pattern"!=b.context.type&&(b.context.align=!0),"("==g)e(b,")",a.column());else if("["==g)e(b,"]",a.column());else if("{"==g)e(b,"}",a.column());else if(/[\]\}\)]/.test(g)){for(;b.context&&"pattern"==b.context.type;)f(b);b.context&&g==b.context.type&&f(b)}else"."==g&&b.context&&"pattern"==b.context.type?f(b):/atom|string|variable/.test(c)&&b.context&&(/[\}\]]/.test(b.context.type)?e(b,"pattern",a.column()):"pattern"!=b.context.type||b.context.align||(b.context.align=!0,b.context.col=a.column()));return c},indent:function(a,b){var c=b&&b.charAt(0),d=a.context;if(/[\]\}]/.test(c))for(;d&&"pattern"==d.type;)d=d.prev;var e=d&&c==d.type;return d?"pattern"==d.type?d.col:d.align?d.col+(e?0:1):d.indent+(e?0:h):0}}}),CodeMirror.defineMIME("application/x-sparql-query","sparql"),define("sparqlMode",["codemirror"],function(){}),function(){"use strict";function a(a,b,c){this.cm=a,this.getHints=b,this.options=c,this.widget=this.onClose=null}function b(a){return"string"==typeof a?a:a.text}function c(a,b){function c(a,c){var f;f="string"!=typeof c?function(a){return c(a,b)}:d.hasOwnProperty(c)?d[c]:c,e[a]=f}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize()+1,!0)},PageDown:function(){b.moveFocus(b.menuSize()-1,!0)},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length-1)},Enter:b.pick,Tab:b.pick,Esc:b.close},e=a.customKeys?{}:d;if(a.customKeys)for(var f in a.customKeys)a.customKeys.hasOwnProperty(f)&&c(f,a.customKeys[f]);if(a.extraKeys)for(var f in a.extraKeys)a.extraKeys.hasOwnProperty(f)&&c(f,a.extraKeys[f]);return e}function d(a,d){this.completion=a,this.data=d;var e=this,f=a.cm,g=a.options,h=this.hints=document.createElement("ul");h.className="CodeMirror-hints",this.selectedHint=0;for(var i=d.list,j=0;j<i.length;++j){var k=h.appendChild(document.createElement("li")),l=i[j],m="CodeMirror-hint"+(j?"":" CodeMirror-hint-active");null!=l.className&&(m=l.className+" "+m),k.className=m,l.render?l.render(k,d,l):k.appendChild(document.createTextNode(l.displayText||b(l))),k.hintId=j}var n=f.cursorCoords(g.alignWithWord!==!1?d.from:null),o=n.left,p=n.bottom,q=!0;h.style.left=o+"px",h.style.top=p+"px";var r=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),s=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(g.container||document.body).appendChild(h);var t=h.getBoundingClientRect(),u=t.right-r,v=t.bottom-s;if(u>0&&(t.right-t.left>r&&(h.style.width=r-5+"px",u-=t.right-t.left-r),h.style.left=(o=n.left-u)+"px"),v>0){var w=t.bottom-t.top;t.top-(n.bottom-n.top)-w>0?(v=w+(n.bottom-n.top),q=!1):w>s&&(h.style.height=s-5+"px",v-=w-s),h.style.top=(p=n.bottom-v)+"px"}if(f.addKeyMap(this.keyMap=c(g,{moveFocus:function(a,b){e.changeActive(e.selectedHint+a,b)},setFocus:function(a){e.changeActive(a)},menuSize:function(){return e.screenAmount()},length:i.length,close:function(){a.close()},pick:function(){e.pick()}})),g.closeOnUnfocus!==!1){var x;f.on("blur",this.onBlur=function(){x=setTimeout(function(){a.close()},100)}),f.on("focus",this.onFocus=function(){clearTimeout(x)})}var y=f.getScrollInfo();return f.on("scroll",this.onScroll=function(){var b=f.getScrollInfo(),c=f.getWrapperElement().getBoundingClientRect(),d=p+y.top-b.top,e=d-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return q||(e+=h.offsetHeight),e<=c.top||e>=c.bottom?a.close():(h.style.top=d+"px",void(h.style.left=o+y.left-b.left+"px"))}),CodeMirror.on(h,"dblclick",function(a){var b=a.target||a.srcElement;null!=b.hintId&&(e.changeActive(b.hintId),e.pick())}),CodeMirror.on(h,"click",function(a){var b=a.target||a.srcElement;null!=b.hintId&&e.changeActive(b.hintId)}),CodeMirror.on(h,"mousedown",function(){setTimeout(function(){f.focus()},20)}),CodeMirror.signal(d,"select",i[0],h.firstChild),!0}CodeMirror.showHint=function(b,c,d){if(!b.somethingSelected()&&(null==c&&(c=b.getHelper(b.getCursor(),"hint")),null!=c)){b.state.completionActive&&b.state.completionActive.close();var e=b.state.completionActive=new a(b,c,d||{});return CodeMirror.signal(b,"startCompletion",b),e.options.async?void c(b,function(a){e.showHints(a)},e.options):e.showHints(c(b,e.options))}},a.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),CodeMirror.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,c){var d=a.list[c];d.hint?d.hint(this.cm,a,d):this.cm.replaceRange(b(d),a.from,a.to),this.close()},showHints:function(a){return a&&a.list.length&&this.active()?void(0!=this.options.completeSingle&&1==a.list.length?this.pick(a,0):this.showWidget(a)):this.close()},showWidget:function(a){function b(){g||(g=!0,i.close(),i.cm.off("cursorActivity",f),a&&CodeMirror.signal(a,"close"))}function c(){g||(CodeMirror.signal(a,"update"),i.options.async?i.getHints(i.cm,e,i.options):e(i.getHints(i.cm,i.options)))}function e(c){return a=c,g?void 0:a&&a.list.length?void(i.widget=new d(i,a)):b()}function f(){clearTimeout(h);var a=i.cm.getCursor(),b=i.cm.getLine(a.line);a.line!=k.line||b.length-a.ch!=l-k.ch||a.ch<k.ch||i.cm.somethingSelected()||a.ch&&j.test(b.charAt(a.ch-1))?i.close():(h=setTimeout(c,170),i.widget&&i.widget.close())}this.widget=new d(this,a),CodeMirror.signal(a,"shown");var g,h=null,i=this,j=this.options.closeCharacters||/[\s()\[\]{};:>,]/,k=this.cm.getCursor(),l=this.cm.getLine(k.line).length;this.cm.on("cursorActivity",f),this.onClose=b}},d.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var a=this.completion.cm;this.completion.options.closeOnUnfocus!==!1&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus)),a.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a,b){if(a>=this.data.list.length?a=b?this.data.list.length-1:0:0>a&&(a=b?0:this.data.list.length-1),this.selectedHint!=a){var c=this.hints.childNodes[this.selectedHint];c.className=c.className.replace(" CodeMirror-hint-active",""),c=this.hints.childNodes[this.selectedHint=a],c.className+=" CodeMirror-hint-active",c.offsetTop<this.hints.scrollTop?this.hints.scrollTop=c.offsetTop-3:c.offsetTop+c.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=c.offsetTop+c.offsetHeight-this.hints.clientHeight+3),CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],c)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}}}(),define("showHint",["codemirror"],function(){}),function(){function a(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c])}function b(a,b){if(!Array.prototype.indexOf){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}return-1!=a.indexOf(b)}function c(a,b,c){var d=a.getCursor(),f=c(a,d),i=f;if(g=a.doc.getValue(),h=d,!j)var j=[];j.push(i);var k=e(f,j);return k=k.sort(),1==k.length&&k.push(" "),{list:k,from:CodeMirror.Pos(d.line,f.start),to:CodeMirror.Pos(d.line,f.end)}}function d(a){return c(a,k,function(a,b){return a.getTokenAt(b)})}function e(c,d){function e(a){0!=a.indexOf(h)||b(g,a)||g.push(a)}function f(b){a(m,e),a(n,e),a(j,e),a(k,e),b.indexOf("?")>=0&&a(o(b),e),b.indexOf(":")>=0&&a(p(b),e)}var g=[],h=c.string;if(d){var i,l=d.pop();for(("variable"==l.type||"variable-2"==l.type||"atom"==l.type)&&(i=l.string);null!=i&&d.length;)i=i[d.pop().string];null!=i&&f(i)}return g}var f=function(a,b){this.text=a,this.cursor=b};f.prototype.getLine=function(){var a=this.text.split("\n");return a[this.cursor.line].substring(0,this.cursor.ch)},f.prototype.getBGPTokens=function(){var a=this.getLine(this.cursor).trim(),b=a.lastIndexOf("."),c=a.lastIndexOf("{"),d=b>c?b:c;return d=0>d?0:d+1,a.substring(d).trim().split(" ")},f.prototype.isProperty=function(){var a=this.getBGPTokens();return 2==a.length?{s:a[0],p:a[1]}:null},f.prototype.isObject=function(){var a=this.getBGPTokens();return 3==a.length?{s:a[0],p:a[1],o:a[2]}:null},f.prototype.getTypeBGPLine=function(a){var b=_.filter(this.text.split("\n"),function(b){return b.indexOf(a)>=0});return b=_.filter(b,function(a){return a.trim().indexOf(" a ")>=0||a.trim().indexOf(" rdf:type ")>=0||a.trim().indexOf(" <http://www.w3.org/1999/02/22-rdf-syntax-ns#> ")>=0}),b[0]||null},f.prototype.getPrefixNamespace=function(a){var b={},c=sessionStorage.getItem("nsMap"),d=_.invert(JSON.parse(c));return _.has(d,a)&&(b.prefix=a,b.namespace=d[a]),b},f.prototype.expandURI=function(a){if(!a)return a;if("<"==a.charAt(0)&&">"==a.charAt(a.length-1))return a.substring(1,a.length-1);var b=a.indexOf(":");if(b=0>b?a.indexOf("/"):b,0>b)return a;var c=this.getPrefixNamespace(a.substring(0,b));return c.namespace+a.substring(b+1)},f.prototype.getDomain=function(a){var b=this.getTypeBGPLine(a);if(!b)return null;for(var c=b.trim().split(" "),d=null,e=0;e<c.length;e+=1)if(c[e].trim().indexOf("a")>=0||c[e].trim().indexOf("rdf:type")>=0||c[e].trim().indexOf("<http://www.w3.org/1999/02/22-rdf-syntax-ns#>")>=0){d=c[e+1];break}return this.expandURI(d)},f.prototype.forProperty=function(){var a=this.isObject();return a?this.expandURI(a.p):null},f.prototype.getSchemaCandidates=function(a,b){var c=[],d={},e={};sessionStorage&&(d=sessionStorage.getItem("egad:schema:classes")||{},d=d?JSON.parse(d).classTree:{},e=sessionStorage.getItem("egad:schema:properties")||{},e=e?JSON.parse(e).propertyTree:{});var f=function(a){a&&(a.type&&0===a.type.indexOf(b)&&c.push(a.type.replace(b,"")),a.subtypes&&a.subtypes.length>0&&_.each(a.subtypes,function(a){f(a)}))};return this.isProperty()?f(e):(f(d),f(e)),c=_.filter(c,function(a){return a}),_.map(c,function(b){return a+":"+b})};var g,h;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),CodeMirror.sparqlHint=d,CodeMirror.registerHelper("hint","sparql",d);var i="base prefix select distinct reduced construct describe ask from named where order limit offset filter optional graph by asc desc as having undef values group minus in not service silent using insert delete union data copy to move add create drop clear load",j=i.split(" "),k=i.toUpperCase().split(" "),l="count avg bind str lang langmatches datatype bound sameterm isiri isuri isblank isliteral a",m=l.split(" ").join("() ").split(" "),n=l.toUpperCase().split(" ").join("() ").split(" "),o=function(b){var c=g.split(/[\s|\n]+/),d=[];return a(c,function(a){"?"!=a.charAt(0)&&"$"!=a.charAt(0)||a==b||(a=a.replace(/[)|}]/g,""),d.push(a))}),d},p=function(b){var c=g.split(/[\s|\n]+/),d=[],e=function(a,b){return 0==a.indexOf(b)},i=new f(g,h),j=b.substring(0,b.indexOf(":")),k=i.getPrefixNamespace(j),l=_.has(k,"prefix")&&_.has(k,"namespace")?i.getSchemaCandidates(k.prefix,k.namespace):[];return l&&l.length>0?d=d.concat(l):a(c,function(a){e(a,b)&&a!=b&&(a=a.replace(/[)|}|\.]/g,""),d.push(a))}),d}}(),define("sparqlHint",["codemirror","sparqlMode","showHint"],function(){}),function(){function a(a,b,c){function d(b,c,d){if(b.text){var g=m?0:b.text.length-1,i=m?b.text.length:-1;if(b.text.length>h)return null;for(null!=d&&(g=d+n);g!=i;g+=n){var j=b.text.charAt(g);if(r.test(j)&&a.getTokenTypeAt(e(c,g+1))==p){var k=f[j];if(">"==k.charAt(1)==m)q.push(j);else{if(q.pop()!=k.charAt(0))return{pos:g,match:!1};if(!q.length)return{pos:g,match:!0}}}}}}var g=a.state.matchBrackets,h=g&&g.maxScanLineLength||1e4,i=b||a.getCursor(),j=a.getLineHandle(i.line),k=i.ch-1,l=k>=0&&f[j.text.charAt(k)]||f[j.text.charAt(++k)];if(!l)return null;var m=">"==l.charAt(1),n=m?1:-1;if(c&&m!=(k==i.ch))return null;for(var o,p=a.getTokenTypeAt(e(i.line,k+1)),q=[j.text.charAt(k)],r=/[(){}[\]]/,s=i.line,t=m?Math.min(s+100,a.lineCount()):Math.max(-1,s-100);s!=t&&!(o=s==i.line?d(j,s,k):d(a.getLineHandle(s),s));s+=n);return{from:e(i.line,k),to:o&&e(s,o.pos),match:o&&o.match,forward:m}}function b(b,c){var f=b.state.matchBrackets.maxHighlightLineLength||1e3,g=a(b);if(!(!g||b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=b.markText(g.from,e(g.from.line,g.from.ch+1),{className:h}),j=g.to&&b.markText(g.to,e(g.to.line,g.to.ch+1),{className:h});d&&b.state.focused&&b.display.input.focus();var k=function(){b.operation(function(){i.clear(),j&&j.clear()})};return c?void setTimeout(k,800):k}}function c(a){a.operation(function(){g&&(g(),g=null),a.somethingSelected()||(g=b(a,!1))})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;
CodeMirror.defineOption("matchBrackets",!1,function(a,b,d){d&&d!=CodeMirror.Init&&a.off("cursorActivity",c),b&&(a.state.matchBrackets="object"==typeof b?b:{},a.on("cursorActivity",c))}),CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(b,c){return a(this,b,c)})}(),define("matchbrackets",["codemirror"],function(){}),define("fuelux-datagrid",["require","jquery"],function(a){var b=a("jquery"),c=22,d=function(a,c){this.$element=b(a),this.$thead=this.$element.find("thead"),this.$tfoot=this.$element.find("tfoot"),this.$footer=this.$element.find("tfoot th"),this.$footerchildren=this.$footer.children().show().css("visibility","hidden"),this.$topheader=this.$element.find("thead th"),this.$searchcontrol=this.$element.find(".datagrid-search"),this.$filtercontrol=this.$element.find(".filter"),this.$pagesize=this.$element.find(".grid-pagesize"),this.$pageinput=this.$element.find(".grid-pager input"),this.$pagedropdown=this.$element.find(".grid-pager .dropdown-menu"),this.$prevpagebtn=this.$element.find(".grid-prevpage"),this.$nextpagebtn=this.$element.find(".grid-nextpage"),this.$pageslabel=this.$element.find(".grid-pages"),this.$countlabel=this.$element.find(".grid-count"),this.$startlabel=this.$element.find(".grid-start"),this.$endlabel=this.$element.find(".grid-end"),this.$tbody=b("<tbody>").insertAfter(this.$thead),this.$colheader=b("<tr>").appendTo(this.$thead),this.options=b.extend(!0,{},b.fn.datagrid.defaults,c),this.options.dataOptions.pageSize=this.$pagesize.hasClass("select")?parseInt(this.$pagesize.select("selectedItem").value,10):parseInt(this.$pagesize.val(),10),this.$searchcontrol.length<=0&&(this.$searchcontrol=this.$element.find(".search")),this.columns=this.options.dataSource.columns(),this.$nextpagebtn.on("click",b.proxy(this.next,this)),this.$prevpagebtn.on("click",b.proxy(this.previous,this)),this.$searchcontrol.on("searched cleared",b.proxy(this.searchChanged,this)),this.$filtercontrol.on("changed",b.proxy(this.filterChanged,this)),this.$colheader.on("click","th",b.proxy(this.headerClicked,this)),this.$pagesize.hasClass("select")?this.$pagesize.on("changed",b.proxy(this.pagesizeChanged,this)):this.$pagesize.on("change",b.proxy(this.pagesizeChanged,this)),this.$pageinput.on("change",b.proxy(this.pageChanged,this)),this.renderColumns(),this.options.stretchHeight&&this.initStretchHeight(),this.renderData()};d.prototype={constructor:d,renderColumns:function(){var a=this;this.$footer.attr("colspan",this.columns.length),this.$topheader.attr("colspan",this.columns.length);var c="";b.each(this.columns,function(a,b){c+='<th data-property="'+b.property+'"',b.sortable&&(c+=' class="sortable"'),c+=">"+b.label+"</th>"}),a.$colheader.append(c)},updateColumns:function(a,b){this._updateColumns(this.$colheader,a,b),this.$sizingHeader&&this._updateColumns(this.$sizingHeader,this.$sizingHeader.find("th").eq(a.index()),b)},_updateColumns:function(a,c,d){var e="asc"===d?"icon-chevron-up":"icon-chevron-down";a.find("i.datagrid-sort").remove(),a.find("th").removeClass("sorted"),b("<i>").addClass(e+" datagrid-sort").appendTo(c),c.addClass("sorted")},updatePageDropdown:function(a){for(var b="",c=1;c<=a.pages;c++)b+="<li><a>"+c+"</a></li>";this.$pagedropdown.html(b)},updatePageButtons:function(a){1===a.page?this.$prevpagebtn.attr("disabled","disabled"):this.$prevpagebtn.removeAttr("disabled"),a.page===a.pages?this.$nextpagebtn.attr("disabled","disabled"):this.$nextpagebtn.removeAttr("disabled")},renderData:function(){var a=this;this.$tbody.html(this.placeholderRowHTML(this.options.loadingHTML)),this.options.dataSource.data(this.options.dataOptions,function(c){var d=1===c.count?a.options.itemText:a.options.itemsText,e="";a.columns=a.options.dataSource.columns(),a.$footerchildren.css("visibility",function(){return c.count>0?"visible":"hidden"}),a.$pageinput.val(c.page),a.$pageslabel.text(c.pages),a.$countlabel.text(c.count+" "+d),a.$startlabel.text(c.start),a.$endlabel.text(c.end),a.updatePageDropdown(c),a.updatePageButtons(c),b.each(c.data,function(c,d){e+="<tr>",b.each(a.columns,function(a,b){e+="<td>"+d[b.property]+"</td>"}),e+="</tr>"}),e||(e=a.placeholderRowHTML("0 "+a.options.itemsText)),a.renderColumns(),a._updateSizingHeader(),a.$tbody.html(e),a.stretchHeight(),a.$element.trigger("loaded")})},placeholderRowHTML:function(a){return'<tr><td style="text-align:center;padding:20px;border-bottom:none;" colspan="'+this.columns.length+'">'+a+"</td></tr>"},headerClicked:function(a){var c=b(a.target);if(c.hasClass("sortable")){var d=this.options.dataOptions.sortDirection,e=this.options.dataOptions.sortProperty,f=c.data("property");e===f?this.options.dataOptions.sortDirection="asc"===d?"desc":"asc":(this.options.dataOptions.sortDirection="asc",this.options.dataOptions.sortProperty=f),this.options.dataOptions.pageIndex=0,this.updateColumns(c,this.options.dataOptions.sortDirection),this.renderData()}},pagesizeChanged:function(a,c){this.options.dataOptions.pageSize=c?parseInt(c.value,10):parseInt(b(a.target).val(),10),this.options.dataOptions.pageIndex=0,this.renderData()},pageChanged:function(a){var c=parseInt(b(a.target).val(),10);c=isNaN(c)?1:c;var d=this.$pageslabel.text();this.options.dataOptions.pageIndex=c>d?d-1:c-1,this.renderData()},searchChanged:function(a,b){this.options.dataOptions.search=b,this.options.dataOptions.pageIndex=0,this.renderData()},filterChanged:function(a,b){this.options.dataOptions.filter=b,this.options.dataOptions.pageIndex=0,this.renderData()},previous:function(){this.$nextpagebtn.attr("disabled","disabled"),this.$prevpagebtn.attr("disabled","disabled"),this.options.dataOptions.pageIndex--,this.renderData()},next:function(){this.$nextpagebtn.attr("disabled","disabled"),this.$prevpagebtn.attr("disabled","disabled"),this.options.dataOptions.pageIndex++,this.renderData()},reload:function(){this.options.dataOptions.pageIndex=0,this.renderData()},initStretchHeight:function(){this.$gridContainer=this.$element.parent(),this.$element.wrap('<div class="datagrid-stretch-wrapper">'),this.$stretchWrapper=this.$element.parent(),this.$headerTable=b("<table>").attr("class",this.$element.attr("class")),this.$footerTable=this.$headerTable.clone(),this.$headerTable.prependTo(this.$gridContainer).addClass("datagrid-stretch-header"),this.$thead.detach().appendTo(this.$headerTable),this._updateSizingHeader(),this.$footerTable.appendTo(this.$gridContainer).addClass("datagrid-stretch-footer"),this.$tfoot.detach().appendTo(this.$footerTable)},_updateSizingHeader:function(){this.$sizingHeader&&this.$sizingHeader.remove(),this.$sizingHeader=this.$thead.clone(),this.$sizingHeader.find("tr:first").remove()},stretchHeight:function(){if(this.$gridContainer){this.setColumnWidths();var a=this.$gridContainer.height(),b=this.$headerTable.outerHeight(),c=this.$footerTable.outerHeight(),d=b+c;this.$stretchWrapper.height(a-d)}},setColumnWidths:function(){function a(a,f){if(a!==e-1){var g=b(f),h=d.eq(a),i=h.width();h.hasClass("sorted")&&"TD"===g.prop("tagName")&&(i+=c),g.width(i)}}if(this.$sizingHeader){this.$element.prepend(this.$sizingHeader);var d=this.$sizingHeader.find("th"),e=d.length;this.$tbody.find("tr:first > td").each(a),this.$colheader.detach()}}},b.fn.datagrid=function(a){return this.each(function(){var c=b(this),e=c.data("datagrid"),f="object"==typeof a&&a;e||c.data("datagrid",e=new d(this,f)),"string"==typeof a&&e[a]()})},b.fn.datagrid.defaults={dataOptions:{pageIndex:0,pageSize:10},loadingHTML:'<div class="progress progress-striped active" style="width:50%;margin:auto;"><div class="bar" style="width:100%;"></div></div>',itemsText:"items",itemText:"item"},b.fn.datagrid.Constructor=d}),define("query/query.results",["jquery","underscore","backbone","egad","metadata/datasetinfo","query/prefix","codemirror","sparqlMode","showHint","sparqlHint","matchbrackets","bootstrap","select2","fuelux-datagrid","handlebars.helpers"],function(a,b,c,d){"use strict";var e={};return e.Model=c.Model.extend({}),e.View=c.Layout.extend({template:"query/queryResults",tagName:"div",id:"queryResults",className:"fuelux",initialize:function(a){b.bindAll(this),this.dataSource=a},events:{"click button.externalUri":"goWeb","click a.uriDesc":"doDescribe"},afterRender:function(){a("#results-grid").datagrid({dataSource:this.model.get("dataSource"),stretchHeight:!0})},_testUri:function(b){var c={Accept:"text/boolean"},e=function(b,c){var e,f="ask { <"+b+"> ?p ?o }";return a.ajax(d.ajax.sparqlEndpointUrl(encodeURIComponent(f)),{async:!1,headers:c,dataType:"text"}).done(function(a){e=JSON.parse(a)}).fail(function(a){400==a.status&&d.api.Mediator.publish("QueryDataSource:error",{message:a.responseText}),e=!1}),e};return e(b,c)},doDescribe:function(b){b.preventDefault();var c=a(b.target).attr("href"),e="";sessionStorage&&(e=sessionStorage.getItem("queryReasoningLevel"));var f="select (<"+c+"> as ?s) ?p ?o \n{ \n	<"+c+"> ?p ?o \n} ";e?d.api.Mediator.publish("router:navigate","#!/query/"+encodeURIComponent(f)+"/reasoning/"+e,{trigger:!0}):d.api.Mediator.publish("router:navigate","#!/query/"+encodeURIComponent(f),{trigger:!0})},goWeb:function(b){b.preventDefault();var c=a(b.target).parents("td").find("a").attr("href");window.open(c)}}),e}),define("query/query.inspector",["underscore","jquery","egad"],function(){"use strict";function a(a){return function(b){return a.test(b)}}var b=/\s+where\s*{/i,c=/\s+limit\s+/i,d=/\s+offset\s+/i,e=/(\s+|^)ask(\s*{|\s+from|\s+where)/i,f=/(\s+|^)describe\s+/i,g=/(\s+|^)select\s+/i,h=/(\s+|^)construct(\s*{|\s+from|\s+where)/i,i=/(\s+|^)insert\s*{/i,j=/(\s+|^)insert\s+data\s*{/i,k=/(\s+|^)delete\s+(where|data)\s*/i,l=/(\s+|^)delete\s*{/i,m=/(\s+|^)load\s+/i,n=/(\s+|^)clear\s+/i,o=/(\s+|^)create\s+/i,p=/(\s+|^)drop\s+/i,q=/(\s+|^)copy\s+/i,r=/(\s+|^)move\s+/i,s=/(\s+|^)add\s+/i,t={hasWhere:a(b),hasLimit:a(c),hasOffset:a(d),isAsk:a(e),isDescribe:a(f),isSelect:a(g),isConstruct:a(h),isInsert:a(i),isInsertData:a(j),isDeleteDataWhere:a(k),isDelete:a(l),isDeleteInsert:function(a){return t.isDelete(a)&&t.isInsert(a)&&t.hasWhere(a)},isLoad:a(m),isClear:a(n),isCreate:a(o),isDrop:a(p),isCopy:a(q),isMove:a(r),isAdd:a(s),isUpdate:function(a){return t.isInsertData(a)||t.isDeleteDataWhere(a)||t.isDeleteInsert(a)||t.isLoad(a)||t.isClear(a)||t.isCreate(a)||t.isDrop(a)||t.isCopy(a)||t.isMove(a)||t.isAdd(a)||t.isDelete(a)&&t.hasWhere(a)||t.isInsert(a)&&t.hasWhere(a)}};return t}),define("query/query.datasource",["underscore","jquery","egad","query/query.inspector"],function(a,b,c,d){"use strict";var e=function(a){this._query=a.query(),this._level=a.getReasoning(),this._setColumns([])};return e.prototype.columns=function(){return this._columns},e.prototype.afterLoadData=function(c){this.options.search&&(c=a.filter(c,function(a){for(var b in a)if(a.hasOwnProperty(b)&&~a[b].toString().toLowerCase().indexOf(this.options.search.toLowerCase()))return!0;return!1}));var d,e=c,f=e.length,g=this.options.pageIndex*this.options.pageSize,h=g+this.options.pageSize,i=!1;h>f+g||f>this.options.pageSize?(d=f+g,i=!0):d=0!==f?h:0;var j=Math.ceil(f/this.options.pageSize),k=this.options.pageIndex+1,l=0!==f?g+1:0;this.datagridCallback({data:e,start:l,end:d,count:f,pages:j,page:k}),i?b(".fuelux .btn.grid-nextpage").attr("disabled","disabled"):b(".fuelux .btn.grid-nextpage").removeAttr("disabled"),b(".fuelux tfoot th").children().show().css("visibility","visible")},e.prototype.data=function(c,d){var e=this;if(e.options=c,e.datagridCallback=d,c.pageIndex&&c.pageIndex<0){var f=parseInt(b("input#page-number").val())-1;e.options.pageIndex=f>-1?f:null}this.loadData({startIndex:e.options.pageIndex,pageSize:e.options.pageSize,callback:a.bind(e.afterLoadData,e)})},e.prototype._setColumns=function(b){this._columns=a.map(b,function(a){return{property:a,label:a}})},e.prototype.loadData=function(a){{var c=this,d=a.startIndex||null,e=a.pageSize||null,f="function"==typeof a.callback?a.callback:b.noop,g=c.preProcessQuery(c._query,d,e);c.getResults(g,function(a){if(null===a)c._data=[],c._setColumns([]);else{var b=c.convertResultsToTable(a);c._data=c.postProcessData(b)}f(c._data)})}},e.prototype.getResults=function(e,f){function g(b){var d=c.ajax.sparqlEndpointUrl(encodeURIComponent(e));return b&&!a.isEmpty(b)&&a.each(b,function(a,b){d.addQueryParam(b,a)}),d.toString()}function h(){var a={};return i._level&&"none"!==i._level.toLowerCase()&&(a.reasoning=i._level),a}var i=this,j={Accept:d.isAsk(e)||d.isUpdate(e)?"text/boolean":"application/sparql-results+json"},k=function(a,d){b.ajax(g(d),{async:!0,headers:a,dataType:"json"}).done(function(a){f(a)}).fail(function(a){if(406===a.status){var b={Accept:"application/ld+json"};k(b,h())}else 400===a.status?c.api.Mediator.publish("QueryDataSource:error",{message:a.responseText}):500===a.status&&c.api.Mediator.publish("QueryDataSource:error",{message:a.statusText})})};k(j,h())},e.prototype.preProcessQuery=function(a,b,e){function f(a){return a.replace(/(limit\s+(\d+))/i,function(a,b,c){var d=parseInt(c);return i=d>i?i:d,"limit "+i})}function g(a){return a.replace(/(offset\s+(\d+))/i,function(a,c,d){var e=parseInt(d);return j=b>0?e+b*i:e,"offset "+j})}var h=a,i=e?e:50,j=b?b:0;return d.isSelect(h)||d.isConstruct(h)?(d.hasLimit(h)?h=f(h):h+=" limit "+i,d.hasOffset(h)?h=g(h):h+=" offset "+Math.ceil(j*i)):(d.hasLimit(h)&&(h=f(h)),d.hasOffset(h)&&(h=g(h))),(d.hasOffset(a)||d.hasLimit(a))&&c.api.Mediator.publish("QueryDataSource:warn",{}),h},e.prototype.convertResultsToTable=function(b){var c={head:{vars:["s","p","o"]},results:{bindings:[]}},d=this;if(b[0]&&b[0]["@id"]&&(b=b[0]),b["@id"]){var e=b["@id"],f=function(a,b,c){var d=g(c);return{s:{type:"uri",value:a},p:{type:"uri",value:b},o:{type:d.type,value:d.val}}},g=function(a){var b="literal",c=a;return a instanceof Object&&(a["@id"]?(c=a["@id"],b="uri"):a["@value"]?c=a["@value"]:""===a["@value"]&&(c='<span class="label label-important">Empty</span>')),{type:b,val:c}};return a.each(b,function(a,b){if("@"!==b.charAt(0))if(a instanceof Array)for(var d=0;d<a.length;d++)c.results.bindings.push(f(e,b,a[d]));else c.results.bindings.push(f(e,b,a))}),c}if(b instanceof Array){for(var h=0;h<b.length;h++){var i=c.results.bindings.concat(d.convertResultsToTable(b[h],c).results.bindings);c.results.bindings=i}return c}return"boolean"==typeof b||"string"==typeof b?{head:{vars:["result"]},results:{bindings:[{result:{type:"string",value:b.toString()}}]}}:b},e.prototype.postProcessData=function(b){var c=this;return c._setColumns(b.head.vars),a.extend([],a.map(b.results.bindings,function(c){var d={};return a.each(b.head.vars,function(a){if(c[a]){var b=c[a].value;d[a]="uri"===c[a].type?'<button class="btn btn-mini externalUri"><i class="icon-external-link"></i></button> <a href="'+b+'" class="uriDesc">'+b+"</a>":b}else d[a]=""}),d}))},e}),define("query/query.save.modal",["underscore","egad","backbone","bootstrap","underscore.mixins","handlebars.helpers","backbone.cachingsync"],function(a,b,c){"use strict";var d=c.Layout.extend({template:"query/saveQueryModal",tagName:"div",events:{"click #btnCancel":"cancelHandler","click #btnSave":"saveHandler","keyup #inFilename":"enterHandler"},initialize:function(){a.bindAll(this),this.cancelCallback="function"==typeof this.options.cancel?this.options.cancel:$.noop,this.saveCallback="function"==typeof this.options.save?this.options.save:$.noop},serialize:function(){return this.model?this.model.toJSON():{}},afterRender:function(){var a=this;this.$el.find("#saveQueryModal").modal({keyboard:!0,show:!0}),this.$el.find("#saveQueryModal").on("shown.bs.modal",function(){a.$el.find("#inFilename").focus()}),this.$el.find("#inputForm").submit(function(){return!1})},show:function(){this.$el.find("#saveQueryModal").modal("show")},hide:function(){this.$el.find("#saveQueryModal").modal("hide")},toggle:function(){this.$el.find("#saveQueryModal").modal("toggle")},cancelHandler:function(a){a&&a.preventDefault(),this.cancelCallback()},saveHandler:function(a){a&&a.preventDefault();var b=this.$el.find("#inFilename").val();this.saveCallback(b)},enterHandler:function(a){13===a.which&&this.saveHandler(a)}});return d});var b=b||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=10,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var l,o,p,q=this,r=b.type,s=!1,t=function(){n(q,"writestart progress write writeend".split(" "))},u=function(){if((s||!l)&&(l=c().createObjectURL(b)),o)o.location.href=l;else{var d=a.open(l,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=l)}q.readyState=q.DONE,t(),m(l)},v=function(a){return function(){return q.readyState!==q.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};return q.readyState=q.INIT,i||(i="download"),e?(l=c().createObjectURL(b),d.href=l,d.download=i,f(d),q.readyState=q.DONE,t(),void m(l)):(a.chrome&&r&&r!==j&&(p=b.slice||b.webkitSlice,b=p.call(b,0,b.size,j),s=!0),g&&"download"!==i&&(i+=".download"),(r===j||g)&&(o=a),h?(k+=b.size,void h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){o.location.href=a.toURL(),q.readyState=q.DONE,n(q,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=q["on"+a]}),c.write(b),q.abort=function(){c.abort(),q.readyState=q.DONE},q.readyState=q.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=b:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("filesaver",[],function(){return b}),function(a){"use strict";if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),define("blob",function(a){return function(){var b;return b||a.Blob}}(this)),CodeMirror.defineMode("turtle",function(a){function b(a){return new RegExp("^(?:"+a.join("|")+")$","i")}function c(a,b){var c=a.next();if(g=null,"<"==c&&!a.match(/^[\s\u00a0=]/,!1))return a.match(/^[^\s\u00a0>]*>?/),"atom";if('"'==c||"'"==c)return b.tokenize=d(c),b.tokenize(a,b);if(/[{}\(\),\.;\[\]]/.test(c))return g=c,null;if("#"==c)return a.skipToEnd(),"comment";if(j.test(c))return a.eatWhile(j),null;if(":"==c)return"operator";if(a.eatWhile(/[_\w\d]/),":"==a.peek())return"variable-3";var e=a.current();return i.test(e)?"meta":c>="A"&&"Z">=c?"comment":"keyword";var e}function d(a){return function(b,d){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){d.tokenize=c;break}f=!f&&"\\"==e}return"string"}}function e(a,b,c){a.context={prev:a.context,indent:a.indent,col:c,type:b}}function f(a){a.indent=a.context.indent,a.context=a.context.prev}var g,h=a.indentUnit,i=(b([]),b(["@prefix","@base","a"])),j=/[*+\-<>=&|]/;return{startState:function(){return{tokenize:c,context:null,indent:0,col:0}},token:function(a,b){if(a.sol()&&(b.context&&null==b.context.align&&(b.context.align=!1),b.indent=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"!=c&&b.context&&null==b.context.align&&"pattern"!=b.context.type&&(b.context.align=!0),"("==g)e(b,")",a.column());else if("["==g)e(b,"]",a.column());else if("{"==g)e(b,"}",a.column());else if(/[\]\}\)]/.test(g)){for(;b.context&&"pattern"==b.context.type;)f(b);b.context&&g==b.context.type&&f(b)}else"."==g&&b.context&&"pattern"==b.context.type?f(b):/atom|string|variable/.test(c)&&b.context&&(/[\}\]]/.test(b.context.type)?e(b,"pattern",a.column()):"pattern"!=b.context.type||b.context.align||(b.context.align=!0,b.context.col=a.column()));return c},indent:function(a,b){var c=b&&b.charAt(0),d=a.context;if(/[\]\}]/.test(c))for(;d&&"pattern"==d.type;)d=d.prev;var e=d&&c==d.type;return d?"pattern"==d.type?d.col:d.align?d.col+(e?0:1):d.indent+(e?0:h):0}}}),CodeMirror.defineMIME("text/turtle","turtle"),define("turtleMode",["codemirror"],function(){}),define("query/sparql.editor.helpers",["jquery","underscore","egad","query/query.results","query/query.datasource","query/query.save.modal","query/prefix","filesaver","blob","bootstrap","select2","handlebars.helpers","underscore.mixins","codemirror","turtleMode","select2"],function(a,b,c,d,e,f,g,h){"use strict";var i=function(a){this.view=a,b.bindAll(this)};return i.prototype.loadQuery=function(c){var d=c.match(/prefix\s/gi);if(d){var e=g.getGlobalNSFromStr(c,this.generateNSMap()),f=a("#prefixSelect").val().split(","),h=b.union(b.compact(e),b.compact(f));a("#prefixSelect").select2("val",h);var i=g.nonGlobalPrefixes(c,this.generateNSMap());console.log("prefixPart:",i);var j=g.stripPrefixes(c);c=i?i+"\n\n"+j:j}this.view.aSparqlEditor?(this.view.aSparqlEditor.setValue(c),this.view.queryState=this.view.aSparqlEditor.getValue()):this.view.currentQuery=c},i.prototype.saveQuery=function(a){function b(b){h(new Blob([a],{type:"text/plain;charset="+document.characterSet}),b)}var c=this.view.$el.find("#fileName").html(),d=this;if(c)b(c);else{var e=new f({save:function(a){b(a),d.view.$el.find("#fileName").html(a),d.view.$el.find("#lblLoadedFile").show(),this.hide()}});this.view.insertView(e).render()}},i.prototype.loadReasoningLevel=function(a){var b=this.view;c.config.get("modules").query.reasoning&&(a=b.$el.find("#reasoning").val(a))},i.prototype.generateNSMap=function(){return c.config.namespaces()},i.prototype.saveSelectedNamespacesMap=function(){var a=g.fromQueryString(this.getFullQueryStr(!0));sessionStorage.setItem("nsMap",JSON.stringify(a))},i.prototype.setQueryNameLabelModified=function(b){b?a("#lblQueryName").hasClass("label-info")&&(a("#lblQueryName").removeClass("label-info"),a("#lblQueryName").addClass("label-important")):a("#lblQueryName").hasClass("label-important")&&(a("#lblQueryName").removeClass("label-important"),a("#lblQueryName").addClass("label-info"))},i.prototype.getSelectedPrefixesStr=function(){var a=this.view.$el.find("#prefixSelect").select2("val");return g.asString(a,this.generateNSMap())},i.prototype.executeQuery=function(a){var f=this.view;c.event.CommManager.sendMessage("alerts","removeAlerts",{});var g=b.isString(a)?a:this.getFullQueryStr();if(g&&g.length>0){var h=this.getReasoningLevel();this.updateQueryUrl(g,h,!1),f.model.setReasoning(h),f.model.set("query",g);var i=new d.Model({dataSource:new e(f.model)}),j=new d.View({model:i});c.api.Mediator.publish("QueryPanel:updateResults",{resultsView:j})}},i.prototype.updateQueryUrl=function(a,b,d){var e="#!/query/"+encodeURIComponent(a);b&&(e+="/reasoning/"+b),c.api.Mediator.publish("router:navigate",e,{trigger:d})},i.prototype.getFullQueryStr=function(a){var b=this.view,d="";if(b.aSparqlEditor){var e=b.aSparqlEditor.getValue();if(!(e&&0!==e.length||a))return c.event.CommManager.sendMessage("alerts","showErrorAlert",{title:"Error!",message:"Query cannot be empty."}),"";var f=this.getSelectedPrefixesStr();d=f?f+"\n\n"+e:e}return d},i.prototype.getReasoningLevel=function(){var a=this.view,b="";return c.config.get("modules").query.reasoning&&(b=a.$el.find("#reasoning option:selected").val()),b},i.prototype.downloadResults=function(d,e){e||(e=this.getFullQueryStr());var f=function(){var f={attachment:!0,format:d},g="",h=c.config.isStardogEmbedded();return h?b.extend(f,{query:encodeURIComponent(e)}):b.extend(f,{url:c.ajax.sparqlEndpoint+"?query="+encodeURIComponent(e)}),a.each(f,function(a,b){g+='<input type="hidden" name="'+a+'" value="'+b+'" />'}),g}();a.ajax({url:c.ajax.sparqlEndpointUrl(encodeURIComponent(e))+"&attachment=true&format="+d,success:function(){a("<form action='"+c.ajax.queryUrl()+"' method='get' >"+f+"</form>").appendTo("body").submit().remove()}}).fail(function(a){var d;a.status&&406===a.status?d=a.responseText?a.responseText:"The selected export format is invalid for this type of query. Please select another one.":(d=(a.responseText?a.responseText:"").replace(/at line (\d+)/g,function(a,b){var c=0;try{return"at line "+(parseInt(b)-c)}catch(d){return"at line "+b}}),d=b.escape(d).replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>")),c.event.CommManager.sendMessage("alerts","showErrorAlert",{message:d,title:"Error!",isBlock:!0})})},i.prototype.loadFile=function(){var a,d=this,e=this.view.$el.find("#queryFile").prop("files")[0];if(e){this.view.$el.find("#fileName").html(e.name),this.view.$el.find("#lblLoadedFile").show();var f=new FileReader,g=b.determineRdfFormat(e.name);"application/sparql-query"===g?(f.onload=function(){a=this.result,a&&(d.loadQuery(a),d.executeQuery())},f.readAsText(e)):c.event.CommManager.sendMessage("alerts","showErrorAlert",{message:"The file format was not recognized, please load files with extension *.rq or *.sparql",title:"SPARQL Query file format not supported!",isBlock:!0})}},i}),define("query/query.datasetinfo",["jquery","underscore","backbone","metadata/datasetinfo","codemirror","sparqlMode","showHint","sparqlHint","matchbrackets","bootstrap","select2","fuelux-datagrid","handlebars.helpers"],function(a,b,c,d){"use strict";var e=c.Layout.extend({template:"query/datasetInfoModal",tagName:"div",initialize:function(){b.bindAll(this)},serialize:function(){return{}},beforeRender:function(){this.insertView(".modal-body",new d).render()},afterRender:function(){this.$el.find("#dataInfoModal").modal({keyboard:!0,show:!0})},show:function(){this.$el.find("#dataInfoModal").modal("show")},hide:function(){this.$el.find("#dataInfoModal").modal("hide")},toggle:function(){this.$el.find("#dataInfoModal").modal("toggle")}});return e}),define("query/sparql.editor",["jquery","underscore","string","egad","query/sparql.editor.helpers","query/prefix","query/query.datasetinfo","backbone","bootstrap","select2","handlebars.helpers","underscore.mixins","codemirror","turtleMode"],function(a,b,c,d,e,f,g,h){"use strict";var i=h.Layout.extend({template:"query/sparqlEditor",tagName:"div",id:"sparqlEditor",helpers:null,events:{"click #btn_execute":"executeQueryHandler","click #btn_clear":"clearQuery","click #exploreTypes":"loadTypesQuery","click #exploreObjProps":"loadObjectPropsQuery","click #exploreDataProps":"loadDataPropsQuery","click #exploreAssertedProps":"loadAssertedPropsQuery","click #exploreEntities":"loadEntitiesQuery","click #exploreHierarchy":"loadHierarchyQuery","click #exploreNamedGraphs":"loadNamedGraphs","click #btnDatasetInfo":"showDatasetInfo","click #newQuery":"newQueryHandler","click #loadQuery":"loadQueryHandler","click #saveQuery":"saveQueryHandler","change #queryFile":"fileChangeHandler"},shortcuts:{"ctrl+e":{handler:a.noop,description:"Execute the query"},"ctrl+backspace":{handler:"clearQuery",description:"Clear the query editor"}},initialize:function(){b.bindAll(this),this.helpers=new e(this)},beforeRender:function(){sessionStorage.getItem(d.config.stores.EGAD_SCHEMA_CLASSES)||d.ajax.getClassSchemaInfo(),sessionStorage.getItem(d.config.stores.EGAD_SCHEMA_PROPERTIES)||d.ajax.getPropertySchemaInfo()},serialize:function(){var b=function(){return void 0!==a("<input type='file'>").get(0).files}();return{prefixes:"http://www.w3.org/1999/02/22-rdf-syntax-ns#,http://www.w3.org/2002/07/owl#,http://www.w3.org/2001/XMLSchema#,http://www.w3.org/2000/01/rdf-schema#",fileSupport:b,reasoning:d.config.get("modules").query.reasoning,embeddedInStardog:d.config.isStardogEmbedded()}},afterRender:function(){var b=this;if(a("#prefixSelect").select2({multiple:!0,data:f.asArrayFullText(b.helpers.generateNSMap()),initSelection:function(c,d){var e=[],g=b.helpers.generateNSMap();a(c.val().split(",")).each(function(){var a=f.clean(this,g[this])+": &lt;"+this+"&gt;";e.push({id:this,text:a})}),d(e)},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]}),a("#prefixSelect").on("change",function(){b.helpers.saveSelectedNamespacesMap()}),this.aSparqlEditor)this.aSparqlEditor.refresh();else{CodeMirror.commands.autocomplete=function(a){b.helpers.saveSelectedNamespacesMap(),CodeMirror.showHint(a,CodeMirror.hint.sparql)},this.aSparqlEditor=CodeMirror.fromTextArea(document.getElementById("sparql_query"),{mode:"application/x-sparql-query",tabMode:"indent",matchBrackets:!0,lineNumbers:!0,lineWrapping:!0,autoClearEmptyLines:!0,autofocus:!0,extraKeys:{"Ctrl-Space":"autocomplete"}}),this.aSparqlEditor.addKeyMap({"Ctrl-E":b.helpers.executeQuery,"Ctrl-Backspace":b.clearQuery,"Ctrl-/":d.event.ShortcutsManager.showHelp});var e=550,g=24;this.aSparqlEditor.on("focus",function(){b.aSparqlEditor.lineCount()>g&&(a("#collapseTwo > .accordion-inner").css("height",540+e),b.$el.find("#sparqlEditorForm").css("height",525+e),b.aSparqlEditor.setSize(null,360+e))
}),this.aSparqlEditor.on("blur",function(){b.aSparqlEditor.setSize(null,360),b.$el.find("#sparqlEditorForm").css("height",525),a("#collapseTwo > .accordion-inner").css("height",540)})}if(this.aSparqlEditor.on("change",function(a){b.model.get("queryModel")&&b.queryState&&b.helpers.setQueryNameLabelModified(c(b.queryState).trim().s!=c(a.getValue()).trim().s?!0:!1)}),this.model&&this.model.query()){var h=this.model.query();this.helpers.loadQuery(h)}if(this.model&&this.model.getReasoning()){var i=this.model.getReasoning();this.helpers.loadReasoningLevel(i)}this.helpers.saveSelectedNamespacesMap()},doDownload:function(a){this.helpers.downloadResults(a)},executeQueryHandler:function(a){a.preventDefault&&a.preventDefault(),this.helpers.executeQuery()},clearQuery:function(b){b&&b.preventDefault&&b.preventDefault(),this.aSparqlEditor.setValue(""),a("#results_table").empty(),a("#btnExport").empty()},loadTypesQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?type ?label \nwhere { \n	?s a ?type . \n	OPTIONAL { ?type rdfs:label ?label } \n}"),this.helpers.executeQuery()},loadObjectPropsQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?objprop ?label \nwhere { \n	?objprop a owl:ObjectProperty . \n	OPTIONAL { ?objprop rdfs:label ?label } \n}"),this.helpers.executeQuery()},loadDataPropsQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?dataprop ?label \nwhere { \n	?dataprop a owl:DatatypeProperty . \n	OPTIONAL { ?dataprop rdfs:label ?label } \n}"),this.helpers.executeQuery()},loadAssertedPropsQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?p ?label \nwhere { \n	?s ?p ?o . \n	OPTIONAL { ?p rdfs:label ?label } \n}"),this.helpers.executeQuery()},loadEntitiesQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?entity ?elabel ?type ?tlabel \nwhere { \n	?entity a ?type . \n	OPTIONAL { ?entity rdfs:label ?elabel } . \n	OPTIONAL { ?type rdfs:label ?tlabel } \n}"),this.helpers.executeQuery()},loadHierarchyQuery:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?type ?label ?supertype \nwhere { \n	{ ?type a owl:Class . } UNION { ?ind a ?type . } . \n	OPTIONAL { ?type rdfs:subClassOf ?supertype } . \n	OPTIONAL { ?type rdfs:label ?label } \n} ORDER BY ?type"),this.helpers.executeQuery()},loadNamedGraphs:function(a){a.preventDefault(),this.aSparqlEditor.setValue(""),this.aSparqlEditor.setValue("select distinct ?g where { \n	graph ?g { \n		?s ?p ?o \n	} \n}"),this.helpers.executeQuery()},newQueryHandler:function(a){a.preventDefault(),this.clearQuery(),d.api.Mediator.publish("router:navigate","#!/query",{trigger:!0})},loadQueryHandler:function(a){a.preventDefault(),this.$el.find("#queryFile").click()},saveQueryHandler:function(a){a.preventDefault();var b=this.helpers.getFullQueryStr();this.aSparqlEditor.getValue()&&this.helpers.saveQuery(b)},fileChangeHandler:function(a){a.preventDefault(),this.helpers.loadFile()},showDatasetInfo:function(a){a&&a.preventDefault();var b=new g;this.insertView(b).render()}});return i}),define("query/query.panel",["jquery","underscore","backbone","egad","metadata/datasetinfo","query/prefix","query/sparql.editor","query/query.inspector","codemirror","sparqlMode","showHint","sparqlHint","matchbrackets","bootstrap","select2","fuelux-datagrid"],function(a,b,c,d,e,f,g,h){"use strict";var i={};return i.Model=c.Model.extend({initialize:function(){b.bindAll(this)},query:function(a){return a&&this.set("query",a),this.get("query")},setReasoning:function(a){a?this.set("level",a):this.unset("level")},getReasoning:function(){return this.get("level")},showQueryError:function(c){var e;if(this.get("query")){var f=decodeURIComponent(this.get("query")).match(/prefix.+\n/gi);e=f?f.length+1:0}else e=0;var g=c.message.replace(/at line (\d+)/g,function(a,b){try{return"at line "+(parseInt(b)-e)}catch(c){return"at line "+b}});g=b.escape(g).replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>"),d.event.CommManager.sendMessage("alerts","showErrorAlert",{message:g,title:"Error!",isBlock:!0}),a("#results_table").html("")},showQueryWarn:function(){var a="As a feature, in the SPARQL editor the LIMIT and OFFSET modifiers are handled behind the scenes to provide better user experience. Please avoid including them in your queries.";d.event.CommManager.sendMessage("alerts","showWarningAlert",{message:a,title:"Warning!",isBlock:!0})}}),i.ExportFormats=c.Layout.extend({template:"query/exportFormats",tagName:"div",className:"btn-group dropup",events:{"click .export-option":"clickOptionHandler"},initialize:function(){b.bindAll(this)},serialize:function(){var a={};return this.model&&(a=this.model.toJSON()),a},clickOptionHandler:function(b){b.preventDefault();var c=a(b.target).attr("format");this.trigger("export",c)}}),i.View=d.view.ShortcutsView.extend({template:"query/queryPanel",tagName:"div",id:"queryPanelDiv",className:"row-fluid",reasoning:"",initialize:function(){b.bindAll(this)},events:{"click .btn-reasoning":"setReasoningLevel","click #accordionTools":"toolsIconToogle","shown .accordion-body":"accordionShown","hidden .accordion-body":"accordionHidden"},beforeRender:function(){d.api.Mediator.subscribe("QueryDataSource:error",this._showQueryError),d.api.Mediator.subscribe("QueryDataSource:warn",this._showQueryWarn),d.api.Mediator.subscribe("QueryPanel:updateResults",this.updateResults)},afterRender:function(){var a=sessionStorage.getItem("queryUIStatus")?JSON.parse(sessionStorage.getItem("queryUIStatus")):null;a&&a.reasoning&&(this.reasoning=a.reasoning),this.showQuerEditor(this.reasoning)},serialize:function(){var a=sessionStorage.getItem("queryUIStatus");return a=a&&null!==a&&0!==a.length?JSON.parse(a):{collapseOne:!0,collapseTwo:!0,collapseThree:!0,prefixes:"http://www.w3.org/1999/02/22-rdf-syntax-ns#,http://www.w3.org/2002/07/owl#,http://www.w3.org/2001/XMLSchema#,http://www.w3.org/2000/01/rdf-schema#"},d.config.get("modules").query&&d.config.get("modules").query.reasoning&&(a.reasoning=d.config.get("modules").query.reasoning,a.embeddedInStardog=d.config.isStardogEmbedded()),a},getUIStatus:function(){return{collapseOne:a("#collapseOne").hasClass("in"),collapseTwo:a("#collapseTwo").hasClass("in"),collapseThree:a("#collapseThree").hasClass("in"),prefixes:a("#prefixSelect").val(),reasoning:a(".btn-reasoning.active").html()}},showQuerEditor:function(){if(!this.getView("#query")){var a=this,b=new g({model:a.model});this.insertView("#query",b),b.render()}},_showQueryWarn:function(){var a="As a feature, in the query panel the LIMIT and OFFSET modifiers are handled behind the scenes to provide better user experience. Please avoid including them in your queries.";d.event.CommManager.sendMessage("alerts","showWarningAlert",{message:a,title:"Warning!",isBlock:!0})},_showQueryError:function(c){var e,f=this;if(f.model.get("query")){var g=decodeURIComponent(f.model.get("query")).match(/prefix.+\n/gi);e=g?g.length+1:0}else e=0;var h=c.message.replace(/at line (\d+)/g,function(a,b){try{return"at line "+(parseInt(b)-e)}catch(c){return"at line "+b}});h=b.escape(h).replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>"),d.event.CommManager.sendMessage("alerts","showErrorAlert",{message:h,title:"Error!",isBlock:!0}),a("#results_table").html("")},updateResults:function(a){var d=this.model.get("query"),e=h.isSelect(d),f=h.isConstruct(d),g=h.isDescribe(d);if(a&&a.resultsView){if(e||f||g){var j=new i.ExportFormats({model:new c.Model({tupleResults:e,graphResults:f||g})});j.on("export",b.bind(this.exportResults,this)),this.setView("#btnExport",j).render()}else this.getView("#btnExport")&&this.removeView("#btnExport");this.setView("#results_table",a.resultsView).render()}},exportResults:function(a){var b=this.getView("#query");b&&b.doDownload(a)},toolsIconToogle:function(){this.$el.find("#accordionTools").find("i").hasClass("icon-expand")?(this.$el.find("#accordionTools").find("i").removeClass("icon-expand"),this.$el.find("#accordionTools").find("i").addClass("icon-collapse"),this.$el.find("#accordionTools").find("strong").html("Hide SPARQL Editor")):(this.$el.find("#accordionTools").find("i").removeClass("icon-collapse"),this.$el.find("#accordionTools").find("i").addClass("icon-expand"),this.$el.find("#accordionTools").find("strong").html("Show SPARQL Editor"))},accordionShown:function(){var a=this.getUIStatus();sessionStorage.setItem("queryUIStatus",JSON.stringify(a))},accordionHidden:function(){var a=this.getUIStatus();sessionStorage.setItem("queryUIStatus",JSON.stringify(a))}}),i}),define("query/main",["jquery","underscore","egad","query/query.panel","query/query.datasource","query/query.results"],function(a,b,c,d,e,f){"use strict";var g=c.api.Module.extend({name:"query",routes:{"!/query":"goToQueryPanel","!/query/:query(/reasoning/:level)":"goToQueryPanel"},initialize:function(){b.bindAll(this)},goToQueryPanel:function(b,c){var g,h,i;if(b){h=new d.Model({query:b}),c&&h.setReasoning(c);var j=new e(h),k=new f.Model({dataSource:j});i=new f.View({model:k})}else h=new d.Model({query:""});g=new d.View({model:h}),i&&g.updateResults({resultsView:i}),a(".pageContainer").html(g.$el),g.render(),this.queryPanel=g}});return new g}),define("query",["query/main"],function(a){return a}),function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]=d[i]!==j?[d[i],g]:g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=a.browser,k=document.documentMode,l=j.msie&&(k===c||8>k),m="on"+h in b&&!l;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){return m?!1:void a(e.start)},teardown:function(){return m?!1:void a(e.stop)}}),e=function(){function c(){j=k=function(a){return a},l&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,k=function(){return d(f.document[g][i])},(j=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}})(d()))}var e,f,j,k,m={};return m.start=function(){if(!e){var f=d();j||c(),function l(){var c=d(),m=k(f);c!==f?(j(f=c,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(l,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),define("jquery.bbq",function(){}),define("pathtracker",["jquery","underscore","jquery.bbq"],function(a,b){var c=function(a){a?(this.state=a,this.state.excluded||(this.state.excluded=[])):this.state={path:[],excluded:[]}};return c.prototype.trackPath=function(a,c,d,e){this.state.path[a]||(this.state.path[a]=[]);var f="["+c+"]["+d+"]";if(e&&!b.contains(this.state.path[a],f))this.state.path[a].push(f);else if(!e&&b.contains(this.state.path[a],f)){var g=b.without(this.state.path[a],f);this.state.path[a]=g}},c.prototype.isPathExtended=function(a,c,d){this.state.path[a]||(this.state.path[a]=[]);var e="["+c+"]["+d+"]";return b.contains(this.state.path[a],e)},c.prototype.addExcluded=function(a){this.state.excluded.push(a)},c.prototype.removeExcluded=function(a){var c=b.without(this.state.excluded,a);this.state.excluded=c},c.prototype.getExcluded=function(){return this.state.excluded},c.prototype.getInLevel=function(a){var b=[];return this.state.path[a]&&(b=this.state.path[a]),b},c.prototype.getState=function(){return this.state},c.prototype.toString=function(){return JSON.stringify(this.state)},c.prototype.toParams=function(){return this.state.path=b.map(this.state.path,function(a){return b.map(a,function(a){return encodeURIComponent(a)})}),a.param(this.state)},c}),define("schema/schemabrowser",["jquery","underscore","egad","pathtracker","burry","backbone","underscore.mixins","bootstrap"],function(a,b,c,d,e,f){var g="schema_path_state",h=new e.Store(c.config.stores.EGAD_WIDGETS,120),i=null,j="icon-stop",k="icon-plus",l="icon-minus";c.config.get("modules").home&&c.config.get("modules").home.leafIcon&&(j=c.config.get("modules").home.leafIcon);var m=function(a){var c=["http://www.w3.org/2002/07/owl#","http://www.w3.org/1999/02/22-rdf-syntax-ns#","http://www.w3.org/2000/01/rdf-schema#","http://www.w3.org/2003/11/swrl#","http://www.w3.org/2001/XMLSchema#"];if("http://www.w3.org/2002/07/owl#Thing"==a||"http://www.w3.org/1999/02/22-rdf-syntax-ns#Property"==a)return!0;var d=b.find(c,function(b){return a.indexOf(b)>=0}),e=!(a.match(/bnode_.*/)&&a.match(/bnode_.*/).length>0);return!d&&e},n=c.view.ShortcutsView.extend({template:"schema/schemaBrowser",tagName:"div",id:"schemabrowser",loadedClassTree:!1,loadedPropTree:!1,events:{"click #tabClass":"loadClassTree","click #tabProp":"loadPropertyTree"},shortcuts:{c:{handler:"loadClassTree",description:"Load the class tree"},p:{handler:"loadPropertyTree",description:"Load the property tree"}},initialize:function(){b.bindAll(this);var a=h.get(g);i=new d(a)},beforeRender:function(){this.loadClassTree()},serialize:function(){return{}},afterRender:function(){c.event.CommManager.sendMessage("alerts","showInfoAlert",{title:"Instructions",message:'<p>Click on the <i class="'+k+'"></i> / <i class="'+l+'"></i> icons to expand or collapse node elements in the Schema Tree.</p>'})},loadClassTree:function(b){b&&b.preventDefault&&b.preventDefault();var d=this;if(!d.loadedClassTree){var e=function(a){var b=new p(a.classTree);b.set("@parent","");var c=new o({model:b});d.insertView("#classTree",c),d.loadedClassTree=!0},f=sessionStorage.getItem(c.config.stores.EGAD_SCHEMA_CLASSES);f=f?JSON.parse(f):c.ajax.getClassSchemaInfo(),e(f)}a("#tabClass").tab("show")},loadPropertyTree:function(b){b&&b.preventDefault&&b.preventDefault();var d=this;if(!d.loadedPropTree){var e=function(a){var b=new p(a.propertyTree);b.set("@parent","");var c=new o({model:b,isProperty:!0});d.insertView("#propertyTree",c).render(),d.loadedPropTree=!0},f=sessionStorage.getItem(c.config.stores.EGAD_SCHEMA_PROPERTIES);f=f?JSON.parse(f):c.ajax.getPropertySchemaInfo(),e(f)}a("#tabProp").tab("show")}}),o=f.Layout.extend({tagName:"ul",className:"list-no-bullets",isProperty:!1,initialize:function(a){b.bindAll(this),this.isProperty=a.isProperty||!1},beforeRender:function(){var a=new r({model:this.model,isProperty:this.isProperty});this.$el.append(a.render().view.el)},serialize:function(){return{}}}),p=f.Model.extend({}),q=f.Collection.extend({model:p}),r=f.Layout.extend({template:"schema/schemaBrowserTreeNode",tagName:"li",className:"collapsedNode",isExpanded:!1,isLoaded:!1,isProperty:!1,level:0,events:{"click .icon-plus":"toggleSubtypes","click .icon-minus":"toggleSubtypes"},initialize:function(a){b.bindAll(this),a.parentLevel>=0&&(this.level=a.parentLevel+1),this.isProperty=a.isProperty||!1},serialize:function(){if(this.model){this.model.set("label",b.stringLiteral(this.model.get("label"))),this.model.set("@isProperty",this.isProperty);var a=this.model.get("type");return this.model.set("type",b.compactURI(a,c.config.namespaces())),this.model.toJSON()}return{}},afterRender:function(){this.followPath(),a("html").is(".lt-ie9")||this.$el.find(".schemaTooltip:first").tooltip();var c=this.model.get("subtypes")?b.compact(this.model.get("subtypes")):[];0===c.length&&(this.$el.find("i:first").removeClass(l),this.$el.find("i:first").removeClass(k),this.$el.find("i:first").addClass(j))},followPath:function(){if(i.isPathExtended(this.level,this.model.get("@parent"),this.model.get("type"))&&!this.isLoaded){var a=this,b=new q(this.model.get("subtypes")),c=new s({collection:b,parentLevel:a.level,parent:a.model.get("type"),isProperty:a.isProperty});this.$el.append(c.render().view.el),this.isExpanded=this.isLoaded=!0;var d=this.$el.find("i:first");this.toggleNode(d)}},toggleSubtypes:function(b){b.stopPropagation();var c=a(b.target);if(!this.isLoaded){var d=this,e=new q(this.model.get("subtypes")),f=new s({collection:e,parentLevel:d.level,parent:d.model.get("type"),isProperty:d.isProperty});this.$el.append(f.render().view.el),this.isLoaded=!0}this.toggleNode(c),this.isExpanded=!this.isExpanded,i.trackPath(this.level,this.model.get("@parent"),this.model.get("type"),this.isExpanded),h.set(g,i.getState())},toggleNode:function(a){this.$el.hasClass("expandedNode")?(this.$el.removeClass("expandedNode"),this.$el.addClass("collapsedNode"),a.removeClass(l),a.addClass(k)):this.$el.hasClass("collapsedNode")&&(this.$el.removeClass("collapsedNode"),this.$el.addClass("expandedNode"),a.removeClass(k),a.addClass(l))}}),s=f.Layout.extend({tagName:"ul",className:"list-no-bullets",isProperty:!1,initialize:function(a){this.isProperty=a.isProperty||!1},beforeRender:function(){var a=this,b=this.options.parentType||"",c=this.options.parentLevel||0;this.collection.each(function(d){if(d.set("@parent",b),m(d.get("type"))){var e=new r({model:d,parentLevel:c,isProperty:a.isProperty});a.$el.append(e.render().view.el)}})},serialize:function(){return{}}});return n}),define("schema/main",["jquery","underscore","egad","schema/schemabrowser"],function(a,b,c,d){var e=c.api.Module.extend({name:"schema",routes:{"!/schema":"routeHandler"},initialize:function(){console.log("schema initialized!")},routeHandler:function(){console.log("schema runs!");var b=new d;a(".pageContainer").html(b.$el),b.render()}});return new e}),define("schema",["schema/main"],function(a){return a}),define("search/search",["underscore","egad","codemirror","bootstrap","sparqlMode","select2","handlebars.helpers"],function(a,b){var c={Views:{}};return c.SearchResultsModel=Backbone.Model.extend({page:0,limit:15,initialize:function(a,c){this.url=function(){this.limit=b.ajax.listingLimit||15;var a=0;return c.page&&(this.page=c.page,a=this.limit*this.page),b.ajax.searchUrl(this.id+"?limit="+this.limit+"&offset="+a)}},getResults:function(){return this.get("results")},isFull:function(){return this.getResults().length==this.limit}}),c.Views.SearchForm=Backbone.Layout.extend({template:"search/searchForm",tagName:"div",id:"advancedSearch",className:"panelContent",DEFAULT_SEARCH_MSG:"Use the form below to automatically create your advanced search",searchValue:"",initialize:function(){a.bindAll(this)},events:{"click #btnSearch":"doSearch","keyup .searchInput":"handleKeyPress"},afterRender:function(){$("#searchProxy").attr("disabled",!0),$("#search").hide(),$("#asMatchWords").focus(),this.options.term&&($("#searchProxy").val(this.options.term),$("#search").val(this.options.term),this.searchValue=$("#searchProxy").val()),this.checkSearchChanged()},serialize:function(){},checkSearchChanged:function(){var a=this.buildAdvancedSearchQuery();a&&a!=this.searchValue&&""!=a&&($("#searchProxy").val(a),$("#search").val(a))},buildAdvancedSearchQuery:function(){var a="";if($("#asMatchWords").val()&&(a=$("#asMatchWords").val()),$("#asMatchPhrase").val()&&(a=this.joinStrings(a," ",'"'+$("#asMatchPhrase").val()+'"')),$("#asOrMatch1").val()||$("#asOrMatch2").val()||$("#asOrMatch3").val()){var b=$("#asOrMatch1").val();$("#asOrMatch2").val()&&(b=this.joinStrings(b," OR ",$("#asOrMatch2").val())),$("#asOrMatch3").val()&&(b=this.joinStrings(b," OR ",$("#asOrMatch3").val())),a=this.joinStrings(a," ","("+b+")")}return $("#asNoMatch").val()&&(a=this.joinStrings(a," ","-"+$("#asNoMatch").val())),a?a:this.DEFAULT_SEARCH_MSG},joinStrings:function(a,b,c){return""!=a?a+b+c:c},handleKeyPress:function(a){13==a.keyCode?(a.preventDefault(),this.doSearch()):this.checkSearchChanged(a)},doSearch:function(a){a&&a.preventDefault();var c=$("#search").val();""!=c&&c!=this.DEFAULT_SEARCH_MSG&&b.api.Mediator.publish("router:navigate","#!/search/"+encodeURIComponent(c),{trigger:!0})}}),c.Views.SearchResults=Backbone.Layout.extend({template:"search/searchResults",tagName:"div",id:"advancedResultsDiv",className:"panelContent",initialize:function(){this._setPrefixesToURIs(),this._selectEGADLabel()},_setPrefixesToURIs:function(){var c=this;if(this.model){var d=this.model.get("results");a.each(d,function(d){d.uri=a.compactURI(d.uri,b.config.namespaces());var e=d.types;a.each(e,function(c){c.uri=a.compactURI(c.uri,b.config.namespaces())});var f=d.matches;a.each(f,function(d){d.propertyUri=a.compactURI(d.propertyUri,b.config.namespaces()),d.string=c._adjustSizeMatchingStr(d.string)})})}},_selectEGADLabel:function(){if(this.model){var c=this.model.get("results");a.each(c,function(c){if(!c.label||!a.has(c,"label")){var d=new b.model.Resource({"@id":encodeURIComponent(c.uri)});d.fetch({async:!1}),c.label=d.getLabel()}})}},_adjustSizeMatchingStr:function(a){var b=a;return a.length>25&&(b=a.substring(0,23)+"..."),b},serialize:function(){return this.model?(this.model.page>=0&&this.model.isFull()&&this.model.set("nextPage","#!/search/"+this.model.id+"/p/"+(parseInt(this.model.page)+1)),this.model.page>1?this.model.set("prevPage","#!/search/"+this.model.id+"/p/"+(parseInt(this.model.page)-1)):1==this.model.page&&this.model.set("prevPage","#!/search/"+this.model.id),this.model.toJSON()):{}}}),c}),define("search/main",["jquery","underscore","egad","search/search"],function(a,b,c,d){var e=c.api.Module.extend({name:"search",routes:{"!/search":"goToSearch","!/search/:query":"goToSearch","!/search/:query/p/:page":"goToSearch"},goToSearch:function(b,e){if(console.log("go to search"),b){b=encodeURIComponent(b);var f=new d.SearchResultsModel({id:b},{page:e});f.fetch({async:!1}).done(function(){var b=new d.Views.SearchResults({model:f});a(".pageContainer").html(b.$el),b.render().done(function(){c.api.Mediator.publish("module:search:results:render",f)})}).fail(function(){c.api.Mediator.publish("module:search:results:render")})}else{console.log("loading advanced search interface");var g=new d.Views.SearchForm;a(".pageContainer").html(g.$el),g.render().done(function(){c.api.Mediator.publish("module:search:form:render")})}}});return new e}),define("search",["search/main"],function(a){return a}),define("treebrowser/treebrowser",["jquery","underscore","egad","pathtracker","browse/properties","bootstrap","select2","handlebars.helpers","jquery.bbq"],function(a,b,c,d){var e={Views:{}},f=new d,g=null,h="icon-leaf";return c.config.get("modules").treebrowser&&c.config.get("modules").treebrowser.leafIcon&&(h=c.config.get("modules").treebrowser.leafIcon),e.Views.TreeFilter=Backbone.Layout.extend({template:"treebrowser/treeFilter",tagName:"div",id:"treeFilter",className:"filter",excluded:[],initialize:function(a){this.excluded=a.excluded||[]},afterRender:function(){var b=this.$el.find("#filterFields");b.select2({data:[],placeholder:"tree node filters...",multiple:!0,readonly:!0,initSelection:function(b,d){var e=[];a(b.val().split(",")).each(function(){var a=new c.model.ResourceLabel({"@id":this}),b=a.getLabel();e.push({id:this,text:b})}),d(e)},formatResult:function(a){return a.text&&a.text.length>0?a.text:a.id},formatSelection:function(a){return sessionStorage[a.id+"-label"]=a.text,a.text&&a.text.length>0?a.text:a.id},tokenSeparators:[","]}),b.on("removed",function(a){var b=a.choice;console.log("id",b.id.valueOf()),console.log("text",b.text.valueOf()),f.removeExcluded(b.id.valueOf()),c.api.Mediator.publish("router:navigate","#!/treebrowser/"+encodeURIComponent(g)+"?"+f.toParams(),{trigger:!0})})},serialize:function(){var a=this;return{listVal:a.excluded.join(",")}}}),e.Views.TreeContainer=Backbone.Layout.extend({template:"treebrowser/treeContainer",tagName:"div",id:"treeBrowserDiv",className:"treeContent",initialize:function(){f=this.options.state?new d(a.deparam(this.options.state)):new d},beforeRender:function(){var a=this;g=a.model.id,this.insertView("#treeContainer",new e.Views.TreeFilter({excluded:f.getExcluded()})),a.model.set("@parent",""),this.insertView("#treeContainer",new e.Views.TreeNode({model:a.model}))},serialize:function(){}}),e.Views.TreeNode=Backbone.Layout.extend({template:"treebrowser/treeNode",tagName:"ul",className:"treeNode nav nav-list",loaded:!1,expanded:!1,isleaf:!1,level:0,events:{"click .icon":"clickOnElement"},initialize:function(){b.bindAll(this),this.options.parentLevel>=0&&(this.level=this.options.parentLevel+1)},afterRender:function(){this.$el.find("a").tooltip(),this._followPath();var a=f.getExcluded(),c=0;b.each(this.model.attributes,function(d,e){"@"===e.charAt(0)||b.contains(a,e)||(c+=1)}),0==c&&(this.isleaf=!0,this.$el.find("i").removeClass("icon-chevron-right"),this.$el.find("i").removeClass("icon-chevron-down"),this.$el.find("i").addClass(h),this.$el.find("i").removeClass("icon-expandable"))},serialize:function(){return this.model?(this.model.has("@id")?this.model.set("@egadLabel",this.model.getLabel()):this.model.set("@egadLabel",this.model.getLabel("@value")),this.model.toJSON()):{}},_useIcon:function(a){this.isleaf||(this.expanded?(a.removeClass("icon-chevron-right"),a.addClass("icon-chevron-down")):(a.removeClass("icon-chevron-down"),a.addClass("icon-chevron-right")))},clickOnElement:function(a){a.preventDefault(),a.stopPropagation(),this.expanded=!this.expanded,f.trackPath(this.level,decodeURIComponent(this.model.get("@parent")),decodeURIComponent(this.model.id),this.expanded),c.api.Mediator.publish("router:navigate","#!/treebrowser/"+encodeURIComponent(g)+"?"+f.toParams(),{trigger:!0})},_followPath:function(){var a=this;if(f.isPathExtended(a.level,decodeURIComponent(this.model.get("@parent")),decodeURIComponent(this.model.id))){if(this.loaded)this.expanded=!this.expanded,this.$el.toggleClass("collapsedNode");else{this.loaded=this.expanded=!0;var d=b.clone(this.model.attributes);b.each(d,function(d,g){var h=f.getExcluded();if("@"!==g.charAt(0)&&!b.contains(h,g)){var i=new c.model.Resource({"@id":encodeURIComponent(g)});i.fetch({async:!1}).done(function(){i.set("@value",d),i.set("@parent",a.model.id),a.$el.find(".propertyList:first").append(new e.Views.TreeNodeProperty({model:i,parentLevel:a.level}).render().view.$el)}).fail(function(){i.set("@value",d),i.set("@parent",a.model.id),a.$el.find(".propertyList:first").append(new e.Views.TreeNodeProperty({model:i,parentLevel:a.level}).render().view.$el)})}})}var g=a.$el.find("i:first");this._useIcon(g)}}}),e.Views.TreeNodeProperty=Backbone.Layout.extend({template:"treebrowser/treeNodeProperty",tagName:"ul",className:"treeNodeProperty nav nav-list",loaded:!1,expanded:!1,level:0,events:{"click .icon-expandable":"clickOnProperty","click .icon-remove":"clickOnRemoveProperty","mouseenter li.nodeProperty":"showRemove","mouseleave li.nodeProperty":"hideRemove"},initialize:function(){b.bindAll(this),this.options.parentLevel>=0&&(this.level=this.options.parentLevel+1)},beforeRender:function(){var a=this.model.get("@value"),b=1;a instanceof Array&&(b=a.length),this.model.set("@valCardinality",b)},serialize:function(){return this.model.set("@egadLabel",this.model.getLabel()),this.model.toJSON()},afterRender:function(){this._followPath()},_useIcon:function(a){this.expanded?(a.removeClass("icon-chevron-right"),a.addClass("icon-chevron-down")):(a.removeClass("icon-chevron-down"),a.addClass("icon-chevron-right"))},showRemove:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target);c.find(".icon-remove").show()},hideRemove:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.target);c.find(".icon-remove").hide()},clickOnRemoveProperty:function(b){b.preventDefault(),b.stopPropagation();var d=a(b.target);f.addExcluded(d.attr("nodeId")),c.api.Mediator.publish("router:navigate","#!/treebrowser/"+encodeURIComponent(g)+"?"+f.toParams(),{trigger:!0})},clickOnProperty:function(a){a.preventDefault(),a.stopPropagation(),this.expanded=!this.expanded,f.trackPath(this.level,decodeURIComponent(this.model.get("@parent")),decodeURIComponent(this.model.id),this.expanded),c.api.Mediator.publish("router:navigate","#!/treebrowser/"+encodeURIComponent(g)+"?"+f.toParams(),{trigger:!0})},_followPath:function(){var a=this;if(f.isPathExtended(a.level,decodeURIComponent(this.model.get("@parent")),decodeURIComponent(this.model.id))){if(this.loaded)this.expanded=!this.expanded,this.$el.toggleClass("collapsedNode");else{this.loaded=this.expanded=!0;var d=this.model.get("@value"),g=[];g.push(d),g=b.flatten(g),b.each(g,function(d){if(!b.isObject(d)||b.isObject(d)&&b.has(d,"@value")){var f=new c.model.Resource({"@value":d});f.set("@parent",a.model.id),f.set("@found",!1),a.$el.find(".individualList:first").append(new e.Views.TreeNode({model:f,parentLevel:a.level}).render().view.$el)}else{var g=encodeURIComponent(d["@id"]),f=new c.model.Resource({"@id":g});f.url=function(){return c.config.get("modules").treebrowser&&c.config.get("modules").treebrowser.reasoning?this.id?c.ajax.graphReasoningUrl("resource",this.id):c.ajax.graphReasoningUrl("resource"):this.id?c.ajax.graphUrl("resource",this.id):c.ajax.graphUrl("resource")},f.fetch({async:!1}).done(function(){f.set("@parent",a.model.id),f.set("@found",!0),a.$el.find(".individualList:first").append(new e.Views.TreeNode({model:f,parentLevel:a.level}).render().view.$el)}).fail(function(){f.set("@parent",a.model.id),f.set("@found",!1),a.$el.find(".individualList:first").append(new e.Views.TreeNode({model:f,parentLevel:a.level}).render().view.$el)})}})}var h=a.$el.find("i:first");this._useIcon(h)}}}),e}),define("treebrowser/main",["jquery","underscore","egad","treebrowser/treebrowser"],function(a,b,c,d){var e=c.api.Module.extend({name:"treebrowser",routes:{"!/treebrowser/:ind?*path":"goToTreeBrowser","!/treebrowser/:ind":"goToTreeBrowser"},goToTreeBrowser:function(b,e){console.log("Path Viewer"),e&&console.log(JSON.stringify(a.deparam(e)));var f=encodeURIComponent(b),g=new c.model.Resource({"@id":f});
g.url=function(){return c.config.get("modules").treebrowser&&c.config.get("modules").treebrowser.reasoning?this.id?c.ajax.graphReasoningUrl("resource",this.id):c.ajax.graphReasoningUrl("resource"):this.id?c.ajax.graphUrl("resource",this.id):c.ajax.graphUrl("resource")},g.fetch({async:!1}).done(function(){g.set("@found",!0);var b=new d.Views.TreeContainer({model:g,state:e});a(".pageContainer").html(b.$el),b.render()}).fail(function(){c.api.Mediator.publish("router:navigate","#!/error/404",{trigger:!0})})}});return new e}),define("treebrowser",["treebrowser/main"],function(a){return a}),define("data/data",["jquery","underscore","egad","bootstrap","stardog"],function(a,b,c){var d={Views:{}};return d.Views.Main=Backbone.Layout.extend({template:"data/main",tagName:"li",id:"dataMain",className:"dropdown",initialize:function(){b.bindAll(this)},beforeRender:function(){var a=new Backbone.Model({modal:RemoveModal,label:"Remove...",modalLabel:"Remove"}),b=new ModalLink({model:a}),c=new Backbone.Model({modal:AddModal,label:"Add...",modalLabel:"Add"}),d=new ModalLink({model:c}),e=new Export;this.insertView("#dataDropdown",d),this.insertView("#dataDropdown",b),this.insertView("#dataDropdown",e)}}),Export=Backbone.Layout.extend({template:"data/dataExport",tagName:"li",id:"dataExport",className:"dropdown-submenu",parentView:null,initialize:function(a){b.bindAll(this),a&&(this.parentView=a.parent)},events:{"click .export":"doExport","mouseenter #exportdrop":"closeOthers"},serialize:function(){return console.log("rendering data export"),{}},doExport:function(b){b.preventDefault();var d=b.target.id,e="construct { ?s ?p ?o } where { ?s ?p ?o }",f=function(){var b={query:encodeURIComponent(e),attachment:!0,format:d},c="";return a.each(b,function(a,b){c+='<input type="hidden" name="'+a+'" value="'+b+'" />'}),c}();a("<form id='export-form' action='"+c.ajax.queryUrl()+"' method='get' >"+f+"</form>").appendTo("body"),a("#export-form").submit().remove()}}),ModalLink=Backbone.Layout.extend({template:"data/modalLink",tagName:"li",initialize:function(a){b.bindAll(this),a&&(this.parentView=a.parent)},events:{"click .showModal":"showModal"},serialize:function(){var a=this.model;return{label:a.get("label")}},showModal:function(b){b&&b.preventDefault();var c=this.model.get("modal"),d=this.model.get("modalLabel"),e=new Backbone.Model({label:d}),f=new c({model:e});a("body").append(f.$el),f.render()}}),ModalView=Backbone.Layout.extend({template:"data/modalView",tagName:"div",initialize:function(){b.bindAll(this)},events:{"change #uploadForm .fileChoose":"_fileChoose","click #uploadForm .cancel":"cancelFile","click #uploadForm .browse":"browse"},serialize:function(){var a=this;return{label:a.model.get("label")}},afterRender:function(){var a=this;this.$el.find("#modalView").modal({keyboard:!0,show:!0}).on("hidden",a._onHidden)},_onHidden:function(){a("#"+this.id).remove()},_hide:function(){this.$el.find("#modalView").modal("hide")},_fileChoose:function(a){var b=this,c=a.target,d=c.files[0],e=b.$el.find("#uploadForm");e.find("input.filename").val(d.name),e.find("button").show(),e.find("label").show()},browse:function(){var a=this;a.$el.find("#uploadForm .fileChoose").click()},cancelFile:function(a){a.preventDefault();var b=this.$el.find("#uploadForm"),c=b.find(".fileChoose");c.replaceWith(c=c.clone(!0)),b.find("input.filename").val(""),b.find("button").hide(),b.find("label").hide()}}),AddModal=ModalView.extend({id:"addModal",initialize:function(){b.bindAll(this)},events:function(){return b.extend({},ModalView.prototype.events,{"click #uploadForm .upload":"doAdd"})},doAdd:function(a){a.preventDefault();var b=this,c=b.$el.find("#uploadForm .fileChoose").prop("files")[0],d=new FileReader,e=Utils.determineFormat(c.name);d.onload=function(){var a=this.result,c=new Stardog.Connection,d=window.location.pathname.substring(1);c.setEndpoint("/"),c.begin({database:d},function(f,g){200==g.statusCode?c.addInTransaction({database:d,txId:f,body:a,contentType:e},function(a,e){console.log("addResponse",e),200==e.statusCode?c.commit({database:d,txId:f},function(){Utils.createSuccess({message:"Data added successfully."}),b._hide()}):400==e.statusCode?(Utils.createError({message:"Invalid file type. Please ensure that the contents of the file are valid for the chosen format."}),b._hide()):(Utils.createError({message:"The file is invalid. Please ensure that the file is correctly formed."}),b._hide())}):(Utils.createError({message:"You don't have permissions to modify data."}),b._hide())})},d.readAsText(c)}}),RemoveModal=ModalView.extend({id:"removeModal",initialize:function(){b.bindAll(this)},events:function(){return b.extend({},ModalView.prototype.events,{"click #uploadForm .upload":"doRemove"})},doRemove:function(a){a.preventDefault();var b=this,c=b.$el.find("#uploadForm .fileChoose").prop("files")[0],d=new FileReader,e=Utils.determineFormat(c.name);d.onload=function(){var a=this.result,c=new Stardog.Connection,d=window.location.pathname.substring(1);c.setEndpoint("/"),c.begin({database:d},function(f,g){200==g.statusCode?c.removeInTransaction({database:d,txId:f,body:a,contentType:e},function(a,e){console.log("removeResponse",e),200==e.statusCode?c.commit({database:d,txId:f},function(){Utils.createSuccess({message:"Data removed successfully."})}):Utils.createError(400==e.statusCode?{message:"Invalid file type. Please ensure that the contents of the file are valid for the chosen format.\nValid file types are: .rdf, .ttl, .nq, .trig, .nt, .trix."}:{message:"The file is invalid. Please ensure that the file is correctly formed."}),b._hide()}):(Utils.createError({message:"You don't have permissions to modify data."}),b._hide())})},d.readAsText(c)}}),Utils={createError:function(a){c.event.CommManager.sendMessage("alerts","showErrorAlert",{message:a.message,title:"Error!",isBlock:!0})},createSuccess:function(a){c.event.CommManager.sendMessage("alerts","showSuccessAlert",{message:a.message,title:"Success!",isBlock:!0})},determineFormat:function(a){return a.match(/.*\.xml|.*\.rdf/i)?"application/rdf+xml":a.match(/.*\.ttl/i)?"text/turtle":a.match(/.*\.nq/i)?"text/x-nquads":a.match(/.*\.trig/i)?"application/x-trig":a.match(/.*\.nt/i)?"text/plain":a.match(/.*\.trix/i)?"application/trix":"application/rdf+xml"}},d}),define("data/main",["jquery","underscore","egad","data/data"],function(a,b,c,d){var e=c.api.Module.extend({name:"data",initialize:function(){b.bindAll(this),console.log("rendering data module"),document.getElementById("navli")?this.initViews({}):c.api.Mediator.subscribe("module:navbar:afterRender",this.initViews)},initViews:function(){var b=new d.Views.Main;a("#navli").append(b.$el),b.render()}});return new e}),define("data",["data/main"],function(a){return a}),define("webconsole/home.view",["jquery","underscore","egad","backbone","bootstrap","handlebars.helpers","handlebars.partials"],function(a,b,c,d){"use strict";var e=d.Layout.extend({template:"webconsole/home"});return e}),function(a){a.color={},a.color.make=function(b,c,d,e){var f={};return f.r=b||0,f.g=c||0,f.b=d||0,f.a=null!=e?e:1,f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()},f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function a(a,b,c){return a>b?a:b>c?c:b}return f.r=a(0,parseInt(f.r),255),f.g=a(0,parseInt(f.g),255),f.b=a(0,parseInt(f.b),255),f.a=a(0,f.a,1),f},f.clone=function(){return a.color.make(f.r,f.b,f.g,f.a)},f.normalize()},a.color.extract=function(b,c){var d;do{if(d=b.css(c).toLowerCase(),""!=d&&"transparent"!=d)break;b=b.parent()}while(b.length&&!a.nodeName(b.get(0),"body"));return"rgba(0, 0, 0, 0)"==d&&(d="transparent"),a.color.parse(d)},a.color.parse=function(c){var d,e=a.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));var f=a.trim(c).toLowerCase();return"transparent"==f?e(255,255,255,0):(d=b[f]||[0,0,0],e(d[0],d[1],d[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){function b(b,c){var d=c.children("."+b)[0];if(null==d&&(d=document.createElement("canvas"),d.className=b,a(d).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!d.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");d=window.G_vmlCanvasManager.initElement(d)}this.element=d;var e=this.context=d.getContext("2d"),f=window.devicePixelRatio||1,g=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;this.pixelRatio=f/g,this.resize(c.width(),c.height()),this.textContainer=null,this.text={},this._textCache={}}function c(c,e,f,g){function h(a,b){b=[qb].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function i(){for(var c={Canvas:b},d=0;d<g.length;++d){var e=g[d];e.init(qb,c),e.options&&a.extend(!0,eb,e.options)}}function j(b){a.extend(!0,eb,b),b&&b.colors&&(eb.colors=b.colors),null==eb.xaxis.color&&(eb.xaxis.color=a.color.parse(eb.grid.color).scale("a",.22).toString()),null==eb.yaxis.color&&(eb.yaxis.color=a.color.parse(eb.grid.color).scale("a",.22).toString()),null==eb.xaxis.tickColor&&(eb.xaxis.tickColor=eb.grid.tickColor||eb.xaxis.color),null==eb.yaxis.tickColor&&(eb.yaxis.tickColor=eb.grid.tickColor||eb.yaxis.color),null==eb.grid.borderColor&&(eb.grid.borderColor=eb.grid.color),null==eb.grid.tickColor&&(eb.grid.tickColor=a.color.parse(eb.grid.color).scale("a",.22).toString());var d,e,f,g=c.css("font-size"),i=g?+g.replace("px",""):13,j={style:c.css("font-style"),size:Math.round(.8*i),variant:c.css("font-variant"),weight:c.css("font-weight"),family:c.css("font-family")};for(f=eb.xaxes.length||1,d=0;f>d;++d)e=eb.xaxes[d],e&&!e.tickColor&&(e.tickColor=e.color),e=a.extend(!0,{},eb.xaxis,e),eb.xaxes[d]=e,e.font&&(e.font=a.extend({},j,e.font),e.font.color||(e.font.color=e.color),e.font.lineHeight||(e.font.lineHeight=Math.round(1.15*e.font.size)));for(f=eb.yaxes.length||1,d=0;f>d;++d)e=eb.yaxes[d],e&&!e.tickColor&&(e.tickColor=e.color),e=a.extend(!0,{},eb.yaxis,e),eb.yaxes[d]=e,e.font&&(e.font=a.extend({},j,e.font),e.font.color||(e.font.color=e.color),e.font.lineHeight||(e.font.lineHeight=Math.round(1.15*e.font.size)));for(eb.xaxis.noTicks&&null==eb.xaxis.ticks&&(eb.xaxis.ticks=eb.xaxis.noTicks),eb.yaxis.noTicks&&null==eb.yaxis.ticks&&(eb.yaxis.ticks=eb.yaxis.noTicks),eb.x2axis&&(eb.xaxes[1]=a.extend(!0,{},eb.xaxis,eb.x2axis),eb.xaxes[1].position="top",null==eb.x2axis.min&&(eb.xaxes[1].min=null),null==eb.x2axis.max&&(eb.xaxes[1].max=null)),eb.y2axis&&(eb.yaxes[1]=a.extend(!0,{},eb.yaxis,eb.y2axis),eb.yaxes[1].position="right",null==eb.y2axis.min&&(eb.yaxes[1].min=null),null==eb.y2axis.max&&(eb.yaxes[1].max=null)),eb.grid.coloredAreas&&(eb.grid.markings=eb.grid.coloredAreas),eb.grid.coloredAreasColor&&(eb.grid.markingsColor=eb.grid.coloredAreasColor),eb.lines&&a.extend(!0,eb.series.lines,eb.lines),eb.points&&a.extend(!0,eb.series.points,eb.points),eb.bars&&a.extend(!0,eb.series.bars,eb.bars),null!=eb.shadowSize&&(eb.series.shadowSize=eb.shadowSize),null!=eb.highlightColor&&(eb.series.highlightColor=eb.highlightColor),d=0;d<eb.xaxes.length;++d)q(kb,d+1).options=eb.xaxes[d];for(d=0;d<eb.yaxes.length;++d)q(lb,d+1).options=eb.yaxes[d];for(var k in pb)eb.hooks[k]&&eb.hooks[k].length&&(pb[k]=pb[k].concat(eb.hooks[k]));h(pb.processOptions,[eb])}function k(a){db=l(a),r(),s()}function l(b){for(var c=[],d=0;d<b.length;++d){var e=a.extend(!0,{},eb.series);null!=b[d].data?(e.data=b[d].data,delete b[d].data,a.extend(!0,e,b[d]),b[d].data=e.data):e.data=b[d],c.push(e)}return c}function m(a,b){var c=a[b+"axis"];return"object"==typeof c&&(c=c.n),"number"!=typeof c&&(c=1),c}function n(){return a.grep(kb.concat(lb),function(a){return a})}function o(a){var b,c,d={};for(b=0;b<kb.length;++b)c=kb[b],c&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<lb.length;++b)c=lb[b],c&&c.used&&(d["y"+c.n]=c.c2p(a.top));return void 0!==d.x1&&(d.x=d.x1),void 0!==d.y1&&(d.y=d.y1),d}function p(a){var b,c,d,e={};for(b=0;b<kb.length;++b)if(c=kb[b],c&&c.used&&(d="x"+c.n,null==a[d]&&1==c.n&&(d="x"),null!=a[d])){e.left=c.p2c(a[d]);break}for(b=0;b<lb.length;++b)if(c=lb[b],c&&c.used&&(d="y"+c.n,null==a[d]&&1==c.n&&(d="y"),null!=a[d])){e.top=c.p2c(a[d]);break}return e}function q(b,c){return b[c-1]||(b[c-1]={n:c,direction:b==kb?"x":"y",options:a.extend(!0,{},b==kb?eb.xaxis:eb.yaxis)}),b[c-1]}function r(){var b,c=db.length,d=-1;for(b=0;b<db.length;++b){var e=db[b].color;null!=e&&(c--,"number"==typeof e&&e>d&&(d=e))}d>=c&&(c=d+1);var f,g=[],h=eb.colors,i=h.length,j=0;for(b=0;c>b;b++)f=a.color.parse(h[b%i]||"#666"),b%i==0&&b&&(j=j>=0?.5>j?-j-.2:0:-j),g[b]=f.scale("rgb",1+j);var k,l=0;for(b=0;b<db.length;++b){if(k=db[b],null==k.color?(k.color=g[l].toString(),++l):"number"==typeof k.color&&(k.color=g[k.color].toString()),null==k.lines.show){var n,o=!0;for(n in k)if(k[n]&&k[n].show){o=!1;break}o&&(k.lines.show=!0)}null==k.lines.zero&&(k.lines.zero=!!k.lines.fill),k.xaxis=q(kb,m(k,"x")),k.yaxis=q(lb,m(k,"y"))}}function s(){function b(a,b,c){b<a.datamin&&b!=-s&&(a.datamin=b),c>a.datamax&&c!=s&&(a.datamax=c)}var c,d,e,f,g,i,j,k,l,m,o,p,q=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=Number.MAX_VALUE;for(a.each(n(),function(a,b){b.datamin=q,b.datamax=r,b.used=!1}),c=0;c<db.length;++c)g=db[c],g.datapoints={points:[]},h(pb.processRawData,[g,g.data,g.datapoints]);for(c=0;c<db.length;++c){if(g=db[c],o=g.data,p=g.datapoints.format,!p){if(p=[],p.push({x:!0,number:!0,required:!0}),p.push({y:!0,number:!0,required:!0}),g.bars.show||g.lines.show&&g.lines.fill){var t=!!(g.bars.show&&g.bars.zero||g.lines.show&&g.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:t}),g.bars.horizontal&&(delete p[p.length-1].y,p[p.length-1].x=!0)}g.datapoints.format=p}if(null==g.datapoints.pointsize){g.datapoints.pointsize=p.length,j=g.datapoints.pointsize,i=g.datapoints.points;var u=g.lines.show&&g.lines.steps;for(g.xaxis.used=g.yaxis.used=!0,d=e=0;d<o.length;++d,e+=j){m=o[d];var v=null==m;if(!v)for(f=0;j>f;++f)k=m[f],l=p[f],l&&(l.number&&null!=k&&(k=+k,isNaN(k)?k=null:1/0==k?k=s:k==-1/0&&(k=-s)),null==k&&(l.required&&(v=!0),null!=l.defaultValue&&(k=l.defaultValue))),i[e+f]=k;if(v)for(f=0;j>f;++f)k=i[e+f],null!=k&&(l=p[f],l.autoscale!==!1&&(l.x&&b(g.xaxis,k,k),l.y&&b(g.yaxis,k,k))),i[e+f]=null;else if(u&&e>0&&null!=i[e-j]&&i[e-j]!=i[e]&&i[e-j+1]!=i[e+1]){for(f=0;j>f;++f)i[e+j+f]=i[e+f];i[e+1]=i[e-j+1],e+=j}}}}for(c=0;c<db.length;++c)g=db[c],h(pb.processDatapoints,[g,g.datapoints]);for(c=0;c<db.length;++c){g=db[c],i=g.datapoints.points,j=g.datapoints.pointsize,p=g.datapoints.format;var w=q,x=q,y=r,z=r;for(d=0;d<i.length;d+=j)if(null!=i[d])for(f=0;j>f;++f)k=i[d+f],l=p[f],l&&l.autoscale!==!1&&k!=s&&k!=-s&&(l.x&&(w>k&&(w=k),k>y&&(y=k)),l.y&&(x>k&&(x=k),k>z&&(z=k)));if(g.bars.show){var A;switch(g.bars.align){case"left":A=0;break;case"right":A=-g.bars.barWidth;break;default:A=-g.bars.barWidth/2}g.bars.horizontal?(x+=A,z+=A+g.bars.barWidth):(w+=A,y+=A+g.bars.barWidth)}b(g.xaxis,w,y),b(g.yaxis,x,z)}a.each(n(),function(a,b){b.datamin==q&&(b.datamin=null),b.datamax==r&&(b.datamax=null)})}function t(){c.css("padding",0).children().filter(function(){return!a(this).hasClass("flot-overlay")&&!a(this).hasClass("flot-base")}).remove(),"static"==c.css("position")&&c.css("position","relative"),fb=new b("flot-base",c),gb=new b("flot-overlay",c),ib=fb.context,jb=gb.context,hb=a(gb.element).unbind();var d=c.data("plot");d&&(d.shutdown(),gb.clear()),c.data("plot",qb)}function u(){eb.grid.hoverable&&(hb.mousemove(T),hb.bind("mouseleave",U)),eb.grid.clickable&&hb.click(V),h(pb.bindEvents,[hb])}function v(){sb&&clearTimeout(sb),hb.unbind("mousemove",T),hb.unbind("mouseleave",U),hb.unbind("click",V),h(pb.shutdown,[hb])}function w(a){function b(a){return a}var c,d,e=a.options.transform||b,f=a.options.inverseTransform;"x"==a.direction?(c=a.scale=nb/Math.abs(e(a.max)-e(a.min)),d=Math.min(e(a.max),e(a.min))):(c=a.scale=ob/Math.abs(e(a.max)-e(a.min)),c=-c,d=Math.max(e(a.max),e(a.min))),a.p2c=e==b?function(a){return(a-d)*c}:function(a){return(e(a)-d)*c},a.c2p=f?function(a){return f(d+a/c)}:function(a){return d+a/c}}function x(a){for(var b=a.options,c=a.ticks||[],d=b.labelWidth||0,e=b.labelHeight||0,f=d||("x"==a.direction?Math.floor(fb.width/(c.length||1)):null),g=a.direction+"Axis "+a.direction+a.n+"Axis",h="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+g,i=b.font||"flot-tick-label tickLabel",j=0;j<c.length;++j){var k=c[j];if(k.label){var l=fb.getTextInfo(h,k.label,i,null,f);d=Math.max(d,l.width),e=Math.max(e,l.height)}}a.labelWidth=b.labelWidth||d,a.labelHeight=b.labelHeight||e}function y(b){var c=b.labelWidth,d=b.labelHeight,e=b.options.position,f="x"===b.direction,g=b.options.tickLength,h=eb.grid.axisMargin,i=eb.grid.labelMargin,j=!0,k=!0,l=!0,m=!1;a.each(f?kb:lb,function(a,c){c&&(c.show||c.reserveSpace)&&(c===b?m=!0:c.options.position===e&&(m?k=!1:j=!1),m||(l=!1))}),k&&(h=0),null==g&&(g=l?"full":5),isNaN(+g)||(i+=+g),f?(d+=i,"bottom"==e?(mb.bottom+=d+h,b.box={top:fb.height-mb.bottom,height:d}):(b.box={top:mb.top+h,height:d},mb.top+=d+h)):(c+=i,"left"==e?(b.box={left:mb.left+h,width:c},mb.left+=c+h):(mb.right+=c+h,b.box={left:fb.width-mb.right,width:c})),b.position=e,b.tickLength=g,b.box.padding=i,b.innermost=j}function z(a){"x"==a.direction?(a.box.left=mb.left-a.labelWidth/2,a.box.width=fb.width-mb.left-mb.right+a.labelWidth):(a.box.top=mb.top-a.labelHeight/2,a.box.height=fb.height-mb.bottom-mb.top+a.labelHeight)}function A(){var b,c=eb.grid.minBorderMargin;if(null==c)for(c=0,b=0;b<db.length;++b)c=Math.max(c,2*(db[b].points.radius+db[b].points.lineWidth/2));var d={left:c,right:c,top:c,bottom:c};a.each(n(),function(a,b){b.reserveSpace&&b.ticks&&b.ticks.length&&("x"===b.direction?(d.left=Math.max(d.left,b.labelWidth/2),d.right=Math.max(d.right,b.labelWidth/2)):(d.bottom=Math.max(d.bottom,b.labelHeight/2),d.top=Math.max(d.top,b.labelHeight/2)))}),mb.left=Math.ceil(Math.max(d.left,mb.left)),mb.right=Math.ceil(Math.max(d.right,mb.right)),mb.top=Math.ceil(Math.max(d.top,mb.top)),mb.bottom=Math.ceil(Math.max(d.bottom,mb.bottom))}function B(){var b,c=n(),d=eb.grid.show;for(var e in mb){var f=eb.grid.margin||0;mb[e]="number"==typeof f?f:f[e]||0}h(pb.processOffset,[mb]);for(var e in mb)mb[e]+="object"==typeof eb.grid.borderWidth?d?eb.grid.borderWidth[e]:0:d?eb.grid.borderWidth:0;if(a.each(c,function(a,b){var c=b.options;b.show=null==c.show?b.used:c.show,b.reserveSpace=null==c.reserveSpace?b.show:c.reserveSpace,C(b)}),d){var g=a.grep(c,function(a){return a.show||a.reserveSpace});for(a.each(g,function(a,b){D(b),E(b),F(b,b.ticks),x(b)}),b=g.length-1;b>=0;--b)y(g[b]);A(),a.each(g,function(a,b){z(b)})}nb=fb.width-mb.left-mb.right,ob=fb.height-mb.bottom-mb.top,a.each(c,function(a,b){w(b)}),d&&K(),R()}function C(a){var b=a.options,c=+(null!=b.min?b.min:a.datamin),d=+(null!=b.max?b.max:a.datamax),e=d-c;if(0==e){var f=0==d?1:.01;null==b.min&&(c-=f),(null==b.max||null!=b.min)&&(d+=f)}else{var g=b.autoscaleMargin;null!=g&&(null==b.min&&(c-=e*g,0>c&&null!=a.datamin&&a.datamin>=0&&(c=0)),null==b.max&&(d+=e*g,d>0&&null!=a.datamax&&a.datamax<=0&&(d=0)))}a.min=c,a.max=d}function D(b){var c,e=b.options;c="number"==typeof e.ticks&&e.ticks>0?e.ticks:.3*Math.sqrt("x"==b.direction?fb.width:fb.height);var f=(b.max-b.min)/c,g=-Math.floor(Math.log(f)/Math.LN10),h=e.tickDecimals;null!=h&&g>h&&(g=h);var i,j=Math.pow(10,-g),k=f/j;if(1.5>k?i=1:3>k?(i=2,k>2.25&&(null==h||h>=g+1)&&(i=2.5,++g)):i=7.5>k?5:10,i*=j,null!=e.minTickSize&&i<e.minTickSize&&(i=e.minTickSize),b.delta=f,b.tickDecimals=Math.max(0,null!=h?h:g),b.tickSize=e.tickSize||i,"time"==e.mode&&!b.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(b.tickGenerator||(b.tickGenerator=function(a){var b,c=[],e=d(a.min,a.tickSize),f=0,g=Number.NaN;do b=g,g=e+f*a.tickSize,c.push(g),++f;while(g<a.max&&g!=b);return c},b.tickFormatter=function(a,b){var c=b.tickDecimals?Math.pow(10,b.tickDecimals):1,d=""+Math.round(a*c)/c;if(null!=b.tickDecimals){var e=d.indexOf("."),f=-1==e?0:d.length-e-1;if(f<b.tickDecimals)return(f?d:d+".")+(""+c).substr(1,b.tickDecimals-f)}return d}),a.isFunction(e.tickFormatter)&&(b.tickFormatter=function(a,b){return""+e.tickFormatter(a,b)}),null!=e.alignTicksWithAxis){var l=("x"==b.direction?kb:lb)[e.alignTicksWithAxis-1];if(l&&l.used&&l!=b){var m=b.tickGenerator(b);if(m.length>0&&(null==e.min&&(b.min=Math.min(b.min,m[0])),null==e.max&&m.length>1&&(b.max=Math.max(b.max,m[m.length-1]))),b.tickGenerator=function(a){var b,c,d=[];for(c=0;c<l.ticks.length;++c)b=(l.ticks[c].v-l.min)/(l.max-l.min),b=a.min+b*(a.max-a.min),d.push(b);return d},!b.mode&&null==e.tickDecimals){var n=Math.max(0,-Math.floor(Math.log(b.delta)/Math.LN10)+1),o=b.tickGenerator(b);o.length>1&&/\..*0$/.test((o[1]-o[0]).toFixed(n))||(b.tickDecimals=n)}}}}function E(b){var c=b.options.ticks,d=[];null==c||"number"==typeof c&&c>0?d=b.tickGenerator(b):c&&(d=a.isFunction(c)?c(b):c);var e,f;for(b.ticks=[],e=0;e<d.length;++e){var g=null,h=d[e];"object"==typeof h?(f=+h[0],h.length>1&&(g=h[1])):f=+h,null==g&&(g=b.tickFormatter(f,b)),isNaN(f)||b.ticks.push({v:f,label:g})}}function F(a,b){a.options.autoscaleMargin&&b.length>0&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&b.length>1&&(a.max=Math.max(a.max,b[b.length-1].v)))}function G(){fb.clear(),h(pb.drawBackground,[ib]);var a=eb.grid;a.show&&a.backgroundColor&&I(),a.show&&!a.aboveData&&J();for(var b=0;b<db.length;++b)h(pb.drawSeries,[ib,db[b]]),L(db[b]);h(pb.draw,[ib]),a.show&&a.aboveData&&J(),fb.render(),X()}function H(a,b){for(var c,d,e,f,g=n(),h=0;h<g.length;++h)if(c=g[h],c.direction==b&&(f=b+c.n+"axis",a[f]||1!=c.n||(f=b+"axis"),a[f])){d=a[f].from,e=a[f].to;break}if(a[f]||(c="x"==b?kb[0]:lb[0],d=a[b+"1"],e=a[b+"2"]),null!=d&&null!=e&&d>e){var i=d;d=e,e=i}return{from:d,to:e,axis:c}}function I(){ib.save(),ib.translate(mb.left,mb.top),ib.fillStyle=cb(eb.grid.backgroundColor,ob,0,"rgba(255, 255, 255, 0)"),ib.fillRect(0,0,nb,ob),ib.restore()}function J(){var b,c,d,e;ib.save(),ib.translate(mb.left,mb.top);var f=eb.grid.markings;if(f)for(a.isFunction(f)&&(c=qb.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,f=f(c)),b=0;b<f.length;++b){var g=f[b],h=H(g,"x"),i=H(g,"y");if(null==h.from&&(h.from=h.axis.min),null==h.to&&(h.to=h.axis.max),null==i.from&&(i.from=i.axis.min),null==i.to&&(i.to=i.axis.max),!(h.to<h.axis.min||h.from>h.axis.max||i.to<i.axis.min||i.from>i.axis.max)){h.from=Math.max(h.from,h.axis.min),h.to=Math.min(h.to,h.axis.max),i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max);var j=h.from===h.to,k=i.from===i.to;if(!j||!k)if(h.from=Math.floor(h.axis.p2c(h.from)),h.to=Math.floor(h.axis.p2c(h.to)),i.from=Math.floor(i.axis.p2c(i.from)),i.to=Math.floor(i.axis.p2c(i.to)),j||k){var l=g.lineWidth||eb.grid.markingsLineWidth,m=l%2?.5:0;ib.beginPath(),ib.strokeStyle=g.color||eb.grid.markingsColor,ib.lineWidth=l,j?(ib.moveTo(h.to+m,i.from),ib.lineTo(h.to+m,i.to)):(ib.moveTo(h.from,i.to+m),ib.lineTo(h.to,i.to+m)),ib.stroke()}else ib.fillStyle=g.color||eb.grid.markingsColor,ib.fillRect(h.from,i.to,h.to-h.from,i.from-i.to)}}c=n(),d=eb.grid.borderWidth;for(var o=0;o<c.length;++o){var p,q,r,s,t=c[o],u=t.box,v=t.tickLength;if(t.show&&0!=t.ticks.length){for(ib.lineWidth=1,"x"==t.direction?(p=0,q="full"==v?"top"==t.position?0:ob:u.top-mb.top+("top"==t.position?u.height:0)):(q=0,p="full"==v?"left"==t.position?0:nb:u.left-mb.left+("left"==t.position?u.width:0)),t.innermost||(ib.strokeStyle=t.options.color,ib.beginPath(),r=s=0,"x"==t.direction?r=nb+1:s=ob+1,1==ib.lineWidth&&("x"==t.direction?q=Math.floor(q)+.5:p=Math.floor(p)+.5),ib.moveTo(p,q),ib.lineTo(p+r,q+s),ib.stroke()),ib.strokeStyle=t.options.tickColor,ib.beginPath(),b=0;b<t.ticks.length;++b){var w=t.ticks[b].v;r=s=0,isNaN(w)||w<t.min||w>t.max||"full"==v&&("object"==typeof d&&d[t.position]>0||d>0)&&(w==t.min||w==t.max)||("x"==t.direction?(p=t.p2c(w),s="full"==v?-ob:v,"top"==t.position&&(s=-s)):(q=t.p2c(w),r="full"==v?-nb:v,"left"==t.position&&(r=-r)),1==ib.lineWidth&&("x"==t.direction?p=Math.floor(p)+.5:q=Math.floor(q)+.5),ib.moveTo(p,q),ib.lineTo(p+r,q+s))}ib.stroke()}}d&&(e=eb.grid.borderColor,"object"==typeof d||"object"==typeof e?("object"!=typeof d&&(d={top:d,right:d,bottom:d,left:d}),"object"!=typeof e&&(e={top:e,right:e,bottom:e,left:e}),d.top>0&&(ib.strokeStyle=e.top,ib.lineWidth=d.top,ib.beginPath(),ib.moveTo(0-d.left,0-d.top/2),ib.lineTo(nb,0-d.top/2),ib.stroke()),d.right>0&&(ib.strokeStyle=e.right,ib.lineWidth=d.right,ib.beginPath(),ib.moveTo(nb+d.right/2,0-d.top),ib.lineTo(nb+d.right/2,ob),ib.stroke()),d.bottom>0&&(ib.strokeStyle=e.bottom,ib.lineWidth=d.bottom,ib.beginPath(),ib.moveTo(nb+d.right,ob+d.bottom/2),ib.lineTo(0,ob+d.bottom/2),ib.stroke()),d.left>0&&(ib.strokeStyle=e.left,ib.lineWidth=d.left,ib.beginPath(),ib.moveTo(0-d.left/2,ob+d.bottom),ib.lineTo(0-d.left/2,0),ib.stroke())):(ib.lineWidth=d,ib.strokeStyle=eb.grid.borderColor,ib.strokeRect(-d/2,-d/2,nb+d,ob+d))),ib.restore()}function K(){a.each(n(),function(a,b){var c,d,e,f,g,h=b.box,i=b.direction+"Axis "+b.direction+b.n+"Axis",j="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+i,k=b.options.font||"flot-tick-label tickLabel";if(fb.removeText(j),b.show&&0!=b.ticks.length)for(var l=0;l<b.ticks.length;++l)c=b.ticks[l],!c.label||c.v<b.min||c.v>b.max||("x"==b.direction?(f="center",d=mb.left+b.p2c(c.v),"bottom"==b.position?e=h.top+h.padding:(e=h.top+h.height-h.padding,g="bottom")):(g="middle",e=mb.top+b.p2c(c.v),"left"==b.position?(d=h.left+h.width-h.padding,f="right"):d=h.left+h.padding),fb.addText(j,d,e,c.label,k,null,null,f,g))})}function L(a){a.lines.show&&M(a),a.bars.show&&P(a),a.points.show&&N(a)}function M(a){function b(a,b,c,d,e){var f=a.points,g=a.pointsize,h=null,i=null;ib.beginPath();for(var j=g;j<f.length;j+=g){var k=f[j-g],l=f[j-g+1],m=f[j],n=f[j+1];if(null!=k&&null!=m){if(n>=l&&l<e.min){if(n<e.min)continue;k=(e.min-l)/(n-l)*(m-k)+k,l=e.min}else if(l>=n&&n<e.min){if(l<e.min)continue;m=(e.min-l)/(n-l)*(m-k)+k,n=e.min}if(l>=n&&l>e.max){if(n>e.max)continue;k=(e.max-l)/(n-l)*(m-k)+k,l=e.max}else if(n>=l&&n>e.max){if(l>e.max)continue;m=(e.max-l)/(n-l)*(m-k)+k,n=e.max}if(m>=k&&k<d.min){if(m<d.min)continue;l=(d.min-k)/(m-k)*(n-l)+l,k=d.min}else if(k>=m&&m<d.min){if(k<d.min)continue;n=(d.min-k)/(m-k)*(n-l)+l,m=d.min}if(k>=m&&k>d.max){if(m>d.max)continue;l=(d.max-k)/(m-k)*(n-l)+l,k=d.max}else if(m>=k&&m>d.max){if(k>d.max)continue;n=(d.max-k)/(m-k)*(n-l)+l,m=d.max}(k!=h||l!=i)&&ib.moveTo(d.p2c(k)+b,e.p2c(l)+c),h=m,i=n,ib.lineTo(d.p2c(m)+b,e.p2c(n)+c)}}ib.stroke()}function c(a,b,c){for(var d=a.points,e=a.pointsize,f=Math.min(Math.max(0,c.min),c.max),g=0,h=!1,i=1,j=0,k=0;;){if(e>0&&g>d.length+e)break;g+=e;var l=d[g-e],m=d[g-e+i],n=d[g],o=d[g+i];if(h){if(e>0&&null!=l&&null==n){k=g,e=-e,i=2;continue}if(0>e&&g==j+e){ib.fill(),h=!1,e=-e,i=1,g=j=k+e;continue}}if(null!=l&&null!=n){if(n>=l&&l<b.min){if(n<b.min)continue;m=(b.min-l)/(n-l)*(o-m)+m,l=b.min}else if(l>=n&&n<b.min){if(l<b.min)continue;o=(b.min-l)/(n-l)*(o-m)+m,n=b.min}if(l>=n&&l>b.max){if(n>b.max)continue;m=(b.max-l)/(n-l)*(o-m)+m,l=b.max}else if(n>=l&&n>b.max){if(l>b.max)continue;o=(b.max-l)/(n-l)*(o-m)+m,n=b.max}if(h||(ib.beginPath(),ib.moveTo(b.p2c(l),c.p2c(f)),h=!0),m>=c.max&&o>=c.max)ib.lineTo(b.p2c(l),c.p2c(c.max)),ib.lineTo(b.p2c(n),c.p2c(c.max));else if(m<=c.min&&o<=c.min)ib.lineTo(b.p2c(l),c.p2c(c.min)),ib.lineTo(b.p2c(n),c.p2c(c.min));else{var p=l,q=n;o>=m&&m<c.min&&o>=c.min?(l=(c.min-m)/(o-m)*(n-l)+l,m=c.min):m>=o&&o<c.min&&m>=c.min&&(n=(c.min-m)/(o-m)*(n-l)+l,o=c.min),m>=o&&m>c.max&&o<=c.max?(l=(c.max-m)/(o-m)*(n-l)+l,m=c.max):o>=m&&o>c.max&&m<=c.max&&(n=(c.max-m)/(o-m)*(n-l)+l,o=c.max),l!=p&&ib.lineTo(b.p2c(p),c.p2c(m)),ib.lineTo(b.p2c(l),c.p2c(m)),ib.lineTo(b.p2c(n),c.p2c(o)),n!=q&&(ib.lineTo(b.p2c(n),c.p2c(o)),ib.lineTo(b.p2c(q),c.p2c(o)))}}}}ib.save(),ib.translate(mb.left,mb.top),ib.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){ib.lineWidth=e,ib.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+e/2),Math.cos(f)*(d/2+e/2),a.xaxis,a.yaxis),ib.lineWidth=e/2,b(a.datapoints,Math.sin(f)*(d/2+e/4),Math.cos(f)*(d/2+e/4),a.xaxis,a.yaxis)}ib.lineWidth=d,ib.strokeStyle=a.color;var g=Q(a.lines,a.color,0,ob);g&&(ib.fillStyle=g,c(a.datapoints,a.xaxis,a.yaxis)),d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis),ib.restore()}function N(a){function b(a,b,c,d,e,f,g,h){for(var i=a.points,j=a.pointsize,k=0;k<i.length;k+=j){var l=i[k],m=i[k+1];null==l||l<f.min||l>f.max||m<g.min||m>g.max||(ib.beginPath(),l=f.p2c(l),m=g.p2c(m)+d,"circle"==h?ib.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):h(ib,l,m,b,e),ib.closePath(),c&&(ib.fillStyle=c,ib.fill()),ib.stroke())}}ib.save(),ib.translate(mb.left,mb.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;if(0==c&&(c=1e-4),c>0&&d>0){var g=d/2;ib.lineWidth=g,ib.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,g+g/2,!0,a.xaxis,a.yaxis,f),ib.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,g/2,!0,a.xaxis,a.yaxis,f)}ib.lineWidth=c,ib.strokeStyle=a.color,b(a.datapoints,e,Q(a.points,a.color),0,!1,a.xaxis,a.yaxis,f),ib.restore()}function O(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q,r,s,t;j?(s=q=r=!0,p=!1,l=c,m=a,o=b+d,n=b+e,l>m&&(t=m,m=l,l=t,p=!0,q=!1)):(p=q=r=!0,s=!1,l=a+d,m=a+e,n=c,o=b,n>o&&(t=o,o=n,n=t,s=!0,r=!1)),m<g.min||l>g.max||o<h.min||n>h.max||(l<g.min&&(l=g.min,p=!1),m>g.max&&(m=g.max,q=!1),n<h.min&&(n=h.min,s=!1),o>h.max&&(o=h.max,r=!1),l=g.p2c(l),n=h.p2c(n),m=g.p2c(m),o=h.p2c(o),f&&(i.fillStyle=f(n,o),i.fillRect(l,o,m-l,n-o)),k>0&&(p||q||r||s)&&(i.beginPath(),i.moveTo(l,n),p?i.lineTo(l,o):i.moveTo(l,o),r?i.lineTo(m,o):i.moveTo(m,o),q?i.lineTo(m,n):i.moveTo(m,n),s?i.lineTo(l,n):i.moveTo(l,n),i.stroke()))}function P(a){function b(b,c,d,e,f,g){for(var h=b.points,i=b.pointsize,j=0;j<h.length;j+=i)null!=h[j]&&O(h[j],h[j+1],h[j+2],c,d,e,f,g,ib,a.bars.horizontal,a.bars.lineWidth)}ib.save(),ib.translate(mb.left,mb.top),ib.lineWidth=a.bars.lineWidth,ib.strokeStyle=a.color;
var c;switch(a.bars.align){case"left":c=0;break;case"right":c=-a.bars.barWidth;break;default:c=-a.bars.barWidth/2}var d=a.bars.fill?function(b,c){return Q(a.bars,a.color,b,c)}:null;b(a.datapoints,c,c+a.bars.barWidth,d,a.xaxis,a.yaxis),ib.restore()}function Q(b,c,d,e){var f=b.fill;if(!f)return null;if(b.fillColor)return cb(b.fillColor,d,e,c);var g=a.color.parse(c);return g.a="number"==typeof f?f:.4,g.normalize(),g.toString()}function R(){if(null!=eb.legend.container?a(eb.legend.container).html(""):c.find(".legend").remove(),eb.legend.show){for(var b,d,e=[],f=[],g=!1,h=eb.legend.labelFormatter,i=0;i<db.length;++i)b=db[i],b.label&&(d=h?h(b.label,b):b.label,d&&f.push({label:d,color:b.color}));if(eb.legend.sorted)if(a.isFunction(eb.legend.sorted))f.sort(eb.legend.sorted);else if("reverse"==eb.legend.sorted)f.reverse();else{var j="descending"!=eb.legend.sorted;f.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=j?1:-1})}for(var i=0;i<f.length;++i){var k=f[i];i%eb.legend.noColumns==0&&(g&&e.push("</tr>"),e.push("<tr>"),g=!0),e.push('<td class="legendColorBox"><div style="border:1px solid '+eb.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+k.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+k.label+"</td>")}if(g&&e.push("</tr>"),0!=e.length){var l='<table style="font-size:smaller;color:'+eb.grid.color+'">'+e.join("")+"</table>";if(null!=eb.legend.container)a(eb.legend.container).html(l);else{var m="",n=eb.legend.position,o=eb.legend.margin;null==o[0]&&(o=[o,o]),"n"==n.charAt(0)?m+="top:"+(o[1]+mb.top)+"px;":"s"==n.charAt(0)&&(m+="bottom:"+(o[1]+mb.bottom)+"px;"),"e"==n.charAt(1)?m+="right:"+(o[0]+mb.right)+"px;":"w"==n.charAt(1)&&(m+="left:"+(o[0]+mb.left)+"px;");var p=a('<div class="legend">'+l.replace('style="','style="position:absolute;'+m+";")+"</div>").appendTo(c);if(0!=eb.legend.backgroundOpacity){var q=eb.legend.backgroundColor;null==q&&(q=eb.grid.backgroundColor,q=q&&"string"==typeof q?a.color.parse(q):a.color.extract(p,"background-color"),q.a=1,q=q.toString());var r=p.children();a('<div style="position:absolute;width:'+r.width()+"px;height:"+r.height()+"px;"+m+"background-color:"+q+';"> </div>').prependTo(p).css("opacity",eb.legend.backgroundOpacity)}}}}}function S(a,b,c){var d,e,f,g=eb.grid.mouseActiveRadius,h=g*g+1,i=null;for(d=db.length-1;d>=0;--d)if(c(db[d])){var j=db[d],k=j.xaxis,l=j.yaxis,m=j.datapoints.points,n=k.c2p(a),o=l.c2p(b),p=g/k.scale,q=g/l.scale;if(f=j.datapoints.pointsize,k.options.inverseTransform&&(p=Number.MAX_VALUE),l.options.inverseTransform&&(q=Number.MAX_VALUE),j.lines.show||j.points.show)for(e=0;e<m.length;e+=f){var r=m[e],s=m[e+1];if(null!=r&&!(r-n>p||-p>r-n||s-o>q||-q>s-o)){var t=Math.abs(k.p2c(r)-a),u=Math.abs(l.p2c(s)-b),v=t*t+u*u;h>v&&(h=v,i=[d,e/f])}}if(j.bars.show&&!i){var w,x;switch(j.bars.align){case"left":w=0;break;case"right":w=-j.bars.barWidth;break;default:w=-j.bars.barWidth/2}for(x=w+j.bars.barWidth,e=0;e<m.length;e+=f){var r=m[e],s=m[e+1],y=m[e+2];null!=r&&(db[d].bars.horizontal?n<=Math.max(y,r)&&n>=Math.min(y,r)&&o>=s+w&&s+x>=o:n>=r+w&&r+x>=n&&o>=Math.min(y,s)&&o<=Math.max(y,s))&&(i=[d,e/f])}}}return i?(d=i[0],e=i[1],f=db[d].datapoints.pointsize,{datapoint:db[d].datapoints.points.slice(e*f,(e+1)*f),dataIndex:e,series:db[d],seriesIndex:d}):null}function T(a){eb.grid.hoverable&&W("plothover",a,function(a){return 0!=a.hoverable})}function U(a){eb.grid.hoverable&&W("plothover",a,function(){return!1})}function V(a){W("plotclick",a,function(a){return 0!=a.clickable})}function W(a,b,d){var e=hb.offset(),f=b.pageX-e.left-mb.left,g=b.pageY-e.top-mb.top,h=o({left:f,top:g});h.pageX=b.pageX,h.pageY=b.pageY;var i=S(f,g,d);if(i&&(i.pageX=parseInt(i.series.xaxis.p2c(i.datapoint[0])+e.left+mb.left,10),i.pageY=parseInt(i.series.yaxis.p2c(i.datapoint[1])+e.top+mb.top,10)),eb.grid.autoHighlight){for(var j=0;j<rb.length;++j){var k=rb[j];k.auto!=a||i&&k.series==i.series&&k.point[0]==i.datapoint[0]&&k.point[1]==i.datapoint[1]||$(k.series,k.point)}i&&Z(i.series,i.datapoint,a)}c.trigger(a,[h,i])}function X(){var a=eb.interaction.redrawOverlayInterval;return-1==a?void Y():void(sb||(sb=setTimeout(Y,a)))}function Y(){sb=null,jb.save(),gb.clear(),jb.translate(mb.left,mb.top);var a,b;for(a=0;a<rb.length;++a)b=rb[a],b.series.bars.show?bb(b.series,b.point):ab(b.series,b.point);jb.restore(),h(pb.drawOverlay,[jb])}function Z(a,b,c){if("number"==typeof a&&(a=db[a]),"number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}var e=_(a,b);-1==e?(rb.push({series:a,point:b,auto:c}),X()):c||(rb[e].auto=!1)}function $(a,b){if(null==a&&null==b)return rb=[],void X();if("number"==typeof a&&(a=db[a]),"number"==typeof b){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}var d=_(a,b);-1!=d&&(rb.splice(d,1),X())}function _(a,b){for(var c=0;c<rb.length;++c){var d=rb[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function ab(b,c){var d=c[0],e=c[1],f=b.xaxis,g=b.yaxis,h="string"==typeof b.highlightColor?b.highlightColor:a.color.parse(b.color).scale("a",.5).toString();if(!(d<f.min||d>f.max||e<g.min||e>g.max)){var i=b.points.radius+b.points.lineWidth/2;jb.lineWidth=i,jb.strokeStyle=h;var j=1.5*i;d=f.p2c(d),e=g.p2c(e),jb.beginPath(),"circle"==b.points.symbol?jb.arc(d,e,j,0,2*Math.PI,!1):b.points.symbol(jb,d,e,j,!1),jb.closePath(),jb.stroke()}}function bb(b,c){var d,e="string"==typeof b.highlightColor?b.highlightColor:a.color.parse(b.color).scale("a",.5).toString(),f=e;switch(b.bars.align){case"left":d=0;break;case"right":d=-b.bars.barWidth;break;default:d=-b.bars.barWidth/2}jb.lineWidth=b.bars.lineWidth,jb.strokeStyle=e,O(c[0],c[1],c[2]||0,d,d+b.bars.barWidth,function(){return f},b.xaxis,b.yaxis,jb,b.bars.horizontal,b.bars.lineWidth)}function cb(b,c,d,e){if("string"==typeof b)return b;for(var f=ib.createLinearGradient(0,d,0,c),g=0,h=b.colors.length;h>g;++g){var i=b.colors[g];if("string"!=typeof i){var j=a.color.parse(e);null!=i.brightness&&(j=j.scale("rgb",i.brightness)),null!=i.opacity&&(j.a*=i.opacity),i=j.toString()}f.addColorStop(g/(h-1),i)}return f}var db=[],eb={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},fb=null,gb=null,hb=null,ib=null,jb=null,kb=[],lb=[],mb={left:0,right:0,top:0,bottom:0},nb=0,ob=0,pb={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},qb=this;qb.setData=k,qb.setupGrid=B,qb.draw=G,qb.getPlaceholder=function(){return c},qb.getCanvas=function(){return fb.element},qb.getPlotOffset=function(){return mb},qb.width=function(){return nb},qb.height=function(){return ob},qb.offset=function(){var a=hb.offset();return a.left+=mb.left,a.top+=mb.top,a},qb.getData=function(){return db},qb.getAxes=function(){var b={};return a.each(kb.concat(lb),function(a,c){c&&(b[c.direction+(1!=c.n?c.n:"")+"axis"]=c)}),b},qb.getXAxes=function(){return kb},qb.getYAxes=function(){return lb},qb.c2p=o,qb.p2c=p,qb.getOptions=function(){return eb},qb.highlight=Z,qb.unhighlight=$,qb.triggerRedrawOverlay=X,qb.pointOffset=function(a){return{left:parseInt(kb[m(a,"x")-1].p2c(+a.x)+mb.left,10),top:parseInt(lb[m(a,"y")-1].p2c(+a.y)+mb.top,10)}},qb.shutdown=v,qb.destroy=function(){v(),c.removeData("plot").empty(),db=[],eb=null,fb=null,gb=null,hb=null,ib=null,jb=null,kb=[],lb=[],pb=null,rb=[],qb=null},qb.resize=function(){var a=c.width(),b=c.height();fb.resize(a,b),gb.resize(a,b)},qb.hooks=pb,i(qb),j(f),t(),k(e),B(),G(),u();var rb=[],sb=null}function d(a,b){return b*Math.floor(a/b)}var e=Object.prototype.hasOwnProperty;a.fn.detach||(a.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),b.prototype.resize=function(a,b){if(0>=a||0>=b)throw new Error("Invalid dimensions for plot, width = "+a+", height = "+b);var c=this.element,d=this.context,e=this.pixelRatio;this.width!=a&&(c.width=a*e,c.style.width=a+"px",this.width=a),this.height!=b&&(c.height=b*e,c.style.height=b+"px",this.height=b),d.restore(),d.save(),d.scale(e,e)},b.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},b.prototype.render=function(){var a=this._textCache;for(var b in a)if(e.call(a,b)){var c=this.getTextLayer(b),d=a[b];c.hide();for(var f in d)if(e.call(d,f)){var g=d[f];for(var h in g)if(e.call(g,h)){for(var i,j=g[h].positions,k=0;i=j[k];k++)i.active?i.rendered||(c.append(i.element),i.rendered=!0):(j.splice(k--,1),i.rendered&&i.element.detach());0==j.length&&delete g[h]}}c.show()}},b.prototype.getTextLayer=function(b){var c=this.text[b];return null==c&&(null==this.textContainer&&(this.textContainer=a("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),c=this.text[b]=a("<div></div>").addClass(b).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),c},b.prototype.getTextInfo=function(b,c,d,e,f){var g,h,i,j;if(c=""+c,g="object"==typeof d?d.style+" "+d.variant+" "+d.weight+" "+d.size+"px/"+d.lineHeight+"px "+d.family:d,h=this._textCache[b],null==h&&(h=this._textCache[b]={}),i=h[g],null==i&&(i=h[g]={}),j=i[c],null==j){var k=a("<div></div>").html(c).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(b));"object"==typeof d?k.css({font:g,color:d.color}):"string"==typeof d&&k.addClass(d),j=i[c]={width:k.outerWidth(!0),height:k.outerHeight(!0),element:k,positions:[]},k.detach()}return j},b.prototype.addText=function(a,b,c,d,e,f,g,h,i){var j=this.getTextInfo(a,d,e,f,g),k=j.positions;"center"==h?b-=j.width/2:"right"==h&&(b-=j.width),"middle"==i?c-=j.height/2:"bottom"==i&&(c-=j.height);for(var l,m=0;l=k[m];m++)if(l.x==b&&l.y==c)return void(l.active=!0);l={active:!0,rendered:!1,element:k.length?j.element.clone():j.element,x:b,y:c},k.push(l),l.element.css({top:Math.round(c),left:Math.round(b),"text-align":h})},b.prototype.removeText=function(a,b,c,d,f,g){if(null==d){var h=this._textCache[a];if(null!=h)for(var i in h)if(e.call(h,i)){var j=h[i];for(var k in j)if(e.call(j,k))for(var l,m=j[k].positions,n=0;l=m[n];n++)l.active=!1}}else for(var l,m=this.getTextInfo(a,d,f,g).positions,n=0;l=m[n];n++)l.x==b&&l.y==c&&(l.active=!1)},a.plot=function(b,d,e){var f=new c(a(b),d,e,a.plot.plugins);return f},a.plot.version="0.8.3",a.plot.plugins=[],a.fn.plot=function(b,c){return this.each(function(){a.plot(this,b,c)})}}(jQuery),define("flot",function(){}),define("webconsole/charts",["jquery","underscore","backbone","nprogress","bootstrap","flot","handlebars.helpers"],function(a,b,c){"use strict";var d={Views:{}};return d.Views.Main=c.Layout.extend({template:"webconsole/charts",tagName:"div",id:"chartsView",className:"row",initialize:function(){b.bindAll(this)},serialize:function(){return console.log("rendering charts"),{}},afterRender:function(){function c(c){var d=c.field,e=c.rawData,f=c.totalDataPoints;return a.ajax("/watchdog",{global:!1,dataType:"json"}).done(function(a){var b=a[d];"heapUsed"===d&&(b/=Math.pow(10,9)),e.push(b?b:e[e.length-1])}),e.length>0&&e.length>f&&(e=e.slice(1)),c.rawData=e,b.zip(b.range(e.length),e)}function d(f){var h=a(f.placeholder),j=h&&h.css("font-size");if(j){var k=f.placeholder,l=f.label,m=c(f),n=b.max(m,function(a){return a[1]});i.yaxis.max=n[1]+.15*n[1],a.plot(k,e(l,m),i);var o=function(){d(f)};window.setTimeout(o,g)}}function e(a,b){return[{label:a,data:b,color:"#0088CC"}]}function f(b,f){var g=a.plot(b.placeholder,e(b.label,c(b)),f);return d(b),g}var g=2e3,h={cpu:{rawData:[],placeholder:"#openConnectionsPlaceholder",field:"cpuLoad",label:"CPU Load (%)",totalDataPoints:50},heap:{rawData:[],placeholder:"#openTransactionsPlaceholder",field:"heapUsed",label:"Heap Used (GB)",totalDataPoints:50}},i={series:{shadowSize:0},yaxis:{min:0,max:10},xaxis:{show:!1},grid:{backgroundColor:"#e3e3e3",borderWidth:{top:1,right:1,bottom:1,left:1},borderColor:"#555"}};f(h.cpu,i),f(h.heap,i),a("#updateInterval").val(g).change(function(){var b=a(this).val();b&&!isNaN(+b)&&(g=+b,1>g&&(g=1),a(this).val(""+g))})}}),d}),define("webconsole/main",["jquery","underscore","egad","webconsole/home.view","webconsole/charts","metadata/datasetinfo","salvattore"],function(a,b,c,d,e,f,g){"use strict";var h=c.api.Module.extend({name:"webconsole",routes:{"!/webconsole":"webConsoleHome"},webConsoleHome:function(){var b,c=new d;b=new f({template:"webconsole/metadata",afterRender:function(){g.setup()}}),c.insertView("#webconsole-front",b),a(".pageContainer").html(c.$el),c.render()}});return new h}),define("webconsole",["webconsole/main"],function(a){return a}),define("help/help",["jquery","underscore","egad","backbone","bootstrap"],function(a,b,c,d){var e={isSetup:!1,Views:{},Models:{}};return e.Models.ShortcutsDescriptionModel=d.Model.extend({}),e.Views.ShortcutsModal=d.Layout.extend({template:"help/shortcutsModal",tagName:"div",id:"shortcutsModal",className:"modal fade",attributes:{tabindex:"-1",role:"dialog","aria-labelledby":"Shortcuts","aria-hidden":"true"},initialize:function(){b.bindAll(this)},serialize:function(){var a=b.map(this.model.get("descriptions"),function(a,b){return{name:b,value:a}});return{descriptions:a}},afterRender:function(){var a=this,b=a.$el;b.modal({keyboard:!0,show:!1}),b.on("hidden.bs.modal",function(){a.remove(),c.api.Mediator.publish("module:help:removed")}),this.show(),c.api.Mediator.publish("module:help:render")},show:function(){this.$el.modal("show")},hide:function(){this.$el.modal("hide")},toggle:function(){this.$el.modal("toggle")}}),c.api.Mediator.subscribe("module:navbar:afterRender",function(){e.isSetup||(a("#help-link").click(function(a){a.preventDefault();var d=c.event.ShortcutsManager.showHelp;b.isFunction(d)&&d()}),e.isSetup=!0)}),e}),define("help/main",["jquery","underscore","egad","help/help"],function(a,b,c,d){var e=c.api.Module.extend({initialize:function(){b.bindAll(this),c.event.CommManager.addListener("help","showHelp","Renders help panel",function(b){var c=a("#shortcutsModal");if(!(c.length>0)){var e=new d.Models.ShortcutsDescriptionModel({descriptions:b.moduleEvents}),f=new d.Views.ShortcutsModal({model:e});a("#wrapper").append(f.$el),f.render()}})}});return new e}),define("help",["help/main"],function(a){return a}),define("app",["jquery","underscore","egad","nprogress","alerts","home","footer","navbar","browse","query","schema","search","metadata","treebrowser","data","webconsole","help"],function(a,b,c){var d={root:"/"};return a(document).ajaxStart(function(){NProgress.start()}),a(document).ajaxComplete(function(){NProgress.done()}),sessionStorage.removeItem(c.config.stores.EGAD_NAMESPACES),sessionStorage.removeItem(c.config.stores.EGAD_SCHEMA_CLASSES),sessionStorage.removeItem(c.config.stores.EGAD_SCHEMA_PROPERTIES),sessionStorage.removeItem(c.config.stores.EGAD_METADATA),a("html").is(".lt-ie10")&&a.ajaxSetup({cache:!1}),d}),define("router",["jquery","underscore","backbone","egad"],function(a,b,c,d){var e=c.Router.extend({routes:{"*routes":"router"},initialize:function(){var a=this;d.api.Mediator.subscribe("router:navigate",function(b,c){a.navigate(b,c)})},router:function(a){Array.prototype.slice;a=a?a.split("/"):["!","home"];var b=Array.prototype.slice.call(a);console.log("args in route: "+b),d.api.Mediator.publish("router:go",b)},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return b.map(d,function(a){return a?this.decode?decodeURIComponent(a):a:null})}});return e}),require(["app","router"],function(a,b){a.router=new b,Backbone.history.start({pushState:!1,root:a.root}),$(document).on("click","a:not([data-bypass])",function(a){var b=$(this).attr("href");b&&0===b.indexOf("#")&&(a.preventDefault(),Backbone.history.navigate(b,!0))})}),define("main",function(){}),require.config({deps:["main"],paths:{libs:"libs",plugins:"plugins",components:"../components",flot:"libs/webconsole/jquery.flot.min",egad:"core/egad","egad.config.model":"core/egad.config.model","egad.config":"core/egad.config","egad.ajax":"core/egad.ajax","egad.model":"core/egad.model","egad.vocabulary":"core/egad.vocabulary","egad.event":"core/egad.event","egad.view":"core/egad.view",lodash:"../components/lodash/dist/lodash.compat",underscore:"../components/lodash/dist/lodash.underscore","mediator-js":"../components/mediator-js/lib/mediator",handlebars:"../components/handlebars.js/dist/handlebars",string:"../components/stringjs/lib/string",nprogress:"../components/nprogress/nprogress",backbone:"../components/backbone/backbone",d3:"../components/d3/d3.min",moment:"../components/moment/min/moment.min",datetimepicker:"../components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min",blob:"../components/blob/Blob",filesaver:"../components/FileSaver/FileSaver",stardog:"../components/stardog/js/stardog",jquery:"libs/jquery","jquery-ui":"libs/jquery-ui",bootstrap:"../components/bootstrap/dist/js/bootstrap",visualsearch:"libs/visualsearch",codemirror:"libs/codemirror/codemirror",matchbrackets:"libs/codemirror/matchbrackets",sparqlMode:"libs/codemirror/sparql",turtleMode:"libs/codemirror/turtle",showHint:"libs/codemirror/show-hint",sparqlHint:"libs/codemirror/sparql-hint",select2:"../components/select2/select2",salvattore:"libs/salvattore",keymaster:"libs/keymaster",uri:"libs/uri","fuelux-datagrid":"libs/datagrid",pathtracker:"libs/pathtracker",layoutconfig:"plugins/layoutconfig","underscore.mixins":"plugins/underscore.mixins","handlebars.helpers":"plugins/handlebars.helpers","handlebars.partials":"plugins/handlebars.partials","backbone.layoutmanager":"plugins/backbone.layoutmanager","jquery.bbq":"plugins/jquery.bbq",burry:"plugins/backbone.cachingsync/burry","backbone.cachingsync":"plugins/backbone.cachingsync/backbone.cachingsync"},packages:[{name:"home",location:"../modules/home"},{name:"footer",location:"../modules/footer"},{name:"navbar",location:"../modules/navbar"},{name:"browse",location:"../modules/browse"},{name:"query",location:"../modules/query"},{name:"schema",location:"../modules/schema"},{name:"search",location:"../modules/search"},{name:"metadata",location:"../modules/metadata"},{name:"treebrowser",location:"../modules/treebrowser"},{name:"data",location:"../modules/data"},{name:"webconsole",location:"../modules/webconsole"},{name:"help",location:"../modules/help"},{name:"skos",location:"../modules/skos"},{name:"pelorus",location:"../modules/pelorus"},{name:"alerts",location:"../modules/alerts"}],shim:{flot:["jquery"],backbone:{deps:["underscore","jquery"],exports:"Backbone"},select2:{deps:["jquery","bootstrap"]},sparqlMode:{deps:["codemirror"]},turtleMode:{deps:["codemirror"]},codemirror:{exports:"CodeMirror"},showHint:{deps:["codemirror"]},sparqlHint:{deps:["codemirror","sparqlMode","showHint"]},matchbrackets:{deps:["codemirror"]},underscore:{exports:"_"},"underscore.mixins":{deps:["underscore"]},jquery:{exports:"$"},nprogress:{deps:["jquery"],exports:"NProgress"},"jquery-ui":{deps:["jquery"]},handlebars:{deps:["jquery"],exports:"Handlebars"},"fuelux-datagrid":["jquery"],visualsearch:{deps:["jquery","jquery-ui","backbone","underscore"],exports:"VS"},blob:{exports:"Blob"},stardog:{deps:["jquery","underscore"]},datetimepicker:["jquery","bootstrap","moment"],keymaster:{exports:"key"},layoutconfig:["backbone.layoutmanager","handlebars","handlebars.helpers","handlebars.partials"],"handlebars.helpers":["jquery","handlebars","string"],"handlebars.partials":["jquery","handlebars"],"backbone.layoutmanager":["jquery","underscore","backbone"],"backbone.cachingsync":["jquery","backbone","underscore","burry"],bootstrap:["jquery"],"jquery.bbq":["jquery"],"egad.event":["keymaster"],"egad.model":["egad.ajax"],"egad.view":["layoutconfig"],"egad.config":["egad.config.model"],egad:["egad.ajax","egad.config","egad.model","egad.vocabulary","egad.event","egad.view"],app:["egad","backbone.cachingsync"],main:["app","router"]}}),define("config",function(){})}();